{% extends "home/base.html" %}
{% block content %}
<div class="container mt-4">
    <h2 class="mb-4">BLASTP</h2>
    
    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    
    <div class="card">
        <div class="card-body">
            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="sequence">Protein Sequence:</label>
                    <textarea class="form-control" id="sequence" name="sequence" rows="10" required 
                              >{{ query_sequence|default:'' }}</textarea>
                    <button type="button" class="btn btn-sm btn-outline-secondary mt-2" id="fillExample">
                        load example
                    </button>
                    
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="evalue">E-value threshold:</label>
                            <input type="number" class="form-control" id="evalue" name="evalue" 
                                   value="{{ evalue|default:'0.01' }}" step="0.01" min="0">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="max_target_seqs">Maximum target sequences:</label>
                            <input type="number" class="form-control" id="max_target_seqs" name="max_target_seqs" 
                                   value="{{ max_target_seqs|default:'30' }}" min="1" max="50">
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i> Search
                </button>
                
                <button type="reset" class="btn btn-outline-secondary ml-2">
                    <i class="fas fa-undo"></i> Reset
                </button>
            </form>
        </div>
    </div>
</div>
<script>
    document.getElementById('fillExample').addEventListener('click', function() {
        const exampleIDs = "MGEAIKKQEGVSTVKEDNKLIDSKKKKANNSNLAKKTSWRRIDLMATKNQRNDDSSTRKRKSSEGEFDMCGIEVAYEDELKRLKQEGKEDRDECKVKNPDKSLISAYIHDIQQLLVKYRKCRFEYIPPMENNLAHILATETLKNKKEFYLVGSVPKSAEKKEERDRVREPD";
        document.getElementById('sequence').value = exampleIDs;
    });
</script>
{% endblock %}