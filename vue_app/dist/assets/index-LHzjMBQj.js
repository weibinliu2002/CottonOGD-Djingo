var iu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);import{r as F,c as b,a as As,b as s,d as K,e as Q,w as _e,f as gt,E as au,o as _,g as ne,h as sa,u as Tn,i as lu,p as qn,s as cu,j as vt,k as uu,l as Ne,m as Rn,n as oa,q as Jn,t as Gt,v as du,x as we,y as Ye,z as hu,A as pe,B as S,C as _t,F as X,D as be,G as Cs,H as ra,I as ia,J as aa,K as la,L as Wt,M as De,N as fu,O as ys,P as pu,Q as mu,R as gu,S as _u,T as vu,U as bu,V as yu,W as wu,X as ku,Y as Eu}from"./element-plus-kI5dZbzF.js";import{s as Lt,c as xu,d as Cu,a as Su,o as Au,b as Tu,T as qu,r as Ru,e as bi,l as yi,m as Iu,f as wi,g as ki}from"./d3-FZRuB6XP.js";import{r as Ou}from"./tools-BemMMEYA.js";import{C as ca,r as Du}from"./chart-js-Bcjh2pZL.js";var Jy=iu((Ja,Do)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const ua="/assets/egg-CeAhh0Oe.jpg",$u={class:"app"},Pu={class:"navbar navbar-expand-lg custom-navbar"},Lu={class:"container"},Nu={class:"collapse navbar-collapse",id:"navbarNav"},Mu={class:"navbar-nav"},Fu={class:"nav-item"},ju={class:"nav-item dropdown"},Uu={class:"dropdown-menu","aria-labelledby":"BrowseDropdown"},Bu={class:"nav-item"},Gu={class:"nav-item dropdown"},Vu={class:"dropdown-menu","aria-labelledby":"toolsDropdown"},Ku={class:"nav-item"},zu={class:"nav-item"},Hu={class:"nav-item"},Ju={class:"container"},Wu={key:0,class:"loading-overlay"},Qu={class:"backtop-content"},Xu={__name:"App",setup(t){const e=F(!1),r=()=>{e.value=!0},a=()=>{e.value=!1};return qn("isLoading",e),qn("showLoading",r),qn("hideLoading",a),(o,i)=>{const l=gt("router-link"),f=gt("router-view"),d=sa,p=au;return _(),b("div",$u,[i[20]||(i[20]=As('<div id="head-container"><div class="head-content"><img src="'+ua+'" alt="Logo" style="height:90px;width:100px;"><div class="site-title"><span class="main-title"> CottonOGD </span><span class="sub-title"> —— a comprehensive cotton orthogroups database </span></div></div></div>',1)),s("nav",Pu,[s("div",Lu,[i[18]||(i[18]=s("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav"},[s("span",{class:"navbar-toggler-icon"})],-1)),s("div",Nu,[s("ul",Mu,[s("li",Fu,[Q(l,{class:"nav-link",to:"/","exact-active-class":"active"},{default:_e(()=>[...i[0]||(i[0]=[ne("Home",-1)])]),_:1})]),s("li",ju,[i[4]||(i[4]=s("a",{class:"nav-link dropdown-toggle",href:"#",id:"BrowseDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"Browse",-1)),s("ul",Uu,[s("li",null,[Q(l,{class:"dropdown-item",to:"/browse/genome"},{default:_e(()=>[...i[1]||(i[1]=[ne("Genome",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/browse/species"},{default:_e(()=>[...i[2]||(i[2]=[ne("Species",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/browse/tf"},{default:_e(()=>[...i[3]||(i[3]=[ne("TF",-1)])]),_:1})])])]),s("li",Bu,[Q(l,{class:"nav-link",to:"/jbrowse","exact-active-class":"active"},{default:_e(()=>[...i[5]||(i[5]=[ne("Jbrowse",-1)])]),_:1})]),s("li",Gu,[i[14]||(i[14]=s("a",{class:"nav-link dropdown-toggle",href:"#",id:"toolsDropdown",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},"Tools",-1)),s("ul",Vu,[s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/id-search"},{default:_e(()=>[...i[6]||(i[6]=[ne("Search by GeneID",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/blastp"},{default:_e(()=>[...i[7]||(i[7]=[ne("blastp",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/go-enrichment"},{default:_e(()=>[...i[8]||(i[8]=[ne("go_enrichment",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/go-annotation"},{default:_e(()=>[...i[9]||(i[9]=[ne("go_annotation",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/kegg-annotation"},{default:_e(()=>[...i[10]||(i[10]=[ne("kegg_annotation",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/kegg-enrichment"},{default:_e(()=>[...i[11]||(i[11]=[ne("kegg_enrichment",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/gene-expression"},{default:_e(()=>[...i[12]||(i[12]=[ne("gene_expression",-1)])]),_:1})]),s("li",null,[Q(l,{class:"dropdown-item",to:"/tools/gene-expression-efp"},{default:_e(()=>[...i[13]||(i[13]=[ne("gene_expression_in_eFP",-1)])]),_:1})])])]),s("li",Ku,[Q(l,{class:"nav-link",to:"/download"},{default:_e(()=>[...i[15]||(i[15]=[ne("Download",-1)])]),_:1})]),s("li",zu,[Q(l,{class:"nav-link",to:"/about-us"},{default:_e(()=>[...i[16]||(i[16]=[ne("About",-1)])]),_:1})]),s("li",Hu,[Q(l,{class:"nav-link",to:"/contact-us"},{default:_e(()=>[...i[17]||(i[17]=[ne("Contact us",-1)])]),_:1})])])])])]),s("main",Ju,[Q(f)]),e.value?(_(),b("div",Wu,[...i[19]||(i[19]=[s("div",{class:"loading-content"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")]),s("div",{class:"mt-3"},"正在检索中...")],-1)])])):K("",!0),i[21]||(i[21]=s("div",{class:"footer-section"},[s("footer",null,[s("div",{class:"container"},[s("p",{class:"mb-0"},"CottonOGD Website © 2025")])])],-1)),Q(p,{"visibility-height":200,right:40,bottom:40,target:".app"},{default:_e(()=>[s("div",Qu,[Q(d,{class:"backtop-icon"},{default:_e(()=>[Q(Tn(lu))]),_:1})])]),_:1})])}}};const An=typeof document<"u";function da(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Yu(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&da(t.default)}const Ee=Object.assign;function _o(t,e){const r={};for(const a in e){const o=e[a];r[a]=qt(o)?o.map(t):t(o)}return r}const Wn=()=>{},qt=Array.isArray;function Ei(t,e){const r={};for(const a in t)r[a]=a in e?e[a]:t[a];return r}const ha=/#/g,Zu=/&/g,ed=/\//g,td=/=/g,nd=/\?/g,fa=/\+/g,sd=/%5B/g,od=/%5D/g,pa=/%5E/g,rd=/%60/g,ma=/%7B/g,id=/%7C/g,ga=/%7D/g,ad=/%20/g;function $o(t){return t==null?"":encodeURI(""+t).replace(id,"|").replace(sd,"[").replace(od,"]")}function ld(t){return $o(t).replace(ma,"{").replace(ga,"}").replace(pa,"^")}function Co(t){return $o(t).replace(fa,"%2B").replace(ad,"+").replace(ha,"%23").replace(Zu,"%26").replace(rd,"`").replace(ma,"{").replace(ga,"}").replace(pa,"^")}function cd(t){return Co(t).replace(td,"%3D")}function ud(t){return $o(t).replace(ha,"%23").replace(nd,"%3F")}function dd(t){return ud(t).replace(ed,"%2F")}function Qn(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const hd=/\/$/,fd=t=>t.replace(hd,"");function vo(t,e,r="/"){let a,o={},i="",l="";const f=e.indexOf("#");let d=e.indexOf("?");return d=f>=0&&d>f?-1:d,d>=0&&(a=e.slice(0,d),i=e.slice(d,f>0?f:e.length),o=t(i.slice(1))),f>=0&&(a=a||e.slice(0,f),l=e.slice(f,e.length)),a=_d(a??e,r),{fullPath:a+i+l,path:a,query:o,hash:Qn(l)}}function pd(t,e){const r=e.query?t(e.query):"";return e.path+(r&&"?")+r+(e.hash||"")}function xi(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function md(t,e,r){const a=e.matched.length-1,o=r.matched.length-1;return a>-1&&a===o&&In(e.matched[a],r.matched[o])&&_a(e.params,r.params)&&t(e.query)===t(r.query)&&e.hash===r.hash}function In(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function _a(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!gd(t[r],e[r]))return!1;return!0}function gd(t,e){return qt(t)?Ci(t,e):qt(e)?Ci(e,t):t?.valueOf()===e?.valueOf()}function Ci(t,e){return qt(e)?t.length===e.length&&t.every((r,a)=>r===e[a]):t.length===1&&t[0]===e}function _d(t,e){if(t.startsWith("/"))return t;if(!t)return e;const r=e.split("/"),a=t.split("/"),o=a[a.length-1];(o===".."||o===".")&&a.push("");let i=r.length-1,l,f;for(l=0;l<a.length;l++)if(f=a[l],f!==".")if(f==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+a.slice(l).join("/")}const Ht={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let So=(function(t){return t.pop="pop",t.push="push",t})({}),bo=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function vd(t){if(!t)if(An){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),fd(t)}const bd=/^[^#]+#/;function yd(t,e){return t.replace(bd,"#")+e}function wd(t,e){const r=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-r.left-(e.left||0),top:a.top-r.top-(e.top||0)}}const Ts=()=>({left:window.scrollX,top:window.scrollY});function kd(t){let e;if("el"in t){const r=t.el,a=typeof r=="string"&&r.startsWith("#"),o=typeof r=="string"?a?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!o)return;e=wd(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Si(t,e){return(history.state?history.state.position-e:-1)+t}const Ao=new Map;function Ed(t,e){Ao.set(t,e)}function xd(t){const e=Ao.get(t);return Ao.delete(t),e}function Cd(t){return typeof t=="string"||t&&typeof t=="object"}function va(t){return typeof t=="string"||typeof t=="symbol"}let je=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const ba=Symbol("");je.MATCHER_NOT_FOUND+"",je.NAVIGATION_GUARD_REDIRECT+"",je.NAVIGATION_ABORTED+"",je.NAVIGATION_CANCELLED+"",je.NAVIGATION_DUPLICATED+"";function On(t,e){return Ee(new Error,{type:t,[ba]:!0},e)}function Bt(t,e){return t instanceof Error&&ba in t&&(e==null||!!(t.type&e))}const Sd=["params","query","hash"];function Ad(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const r of Sd)r in t&&(e[r]=t[r]);return JSON.stringify(e,null,2)}function Td(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let a=0;a<r.length;++a){const o=r[a].replace(fa," "),i=o.indexOf("="),l=Qn(i<0?o:o.slice(0,i)),f=i<0?null:Qn(o.slice(i+1));if(l in e){let d=e[l];qt(d)||(d=e[l]=[d]),d.push(f)}else e[l]=f}return e}function Ai(t){let e="";for(let r in t){const a=t[r];if(r=cd(r),a==null){a!==void 0&&(e+=(e.length?"&":"")+r);continue}(qt(a)?a.map(o=>o&&Co(o)):[a&&Co(a)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+r,o!=null&&(e+="="+o))})}return e}function qd(t){const e={};for(const r in t){const a=t[r];a!==void 0&&(e[r]=qt(a)?a.map(o=>o==null?null:""+o):a==null?a:""+a)}return e}const Rd=Symbol(""),Ti=Symbol(""),qs=Symbol(""),Po=Symbol(""),To=Symbol("");function zn(){let t=[];function e(a){return t.push(a),()=>{const o=t.indexOf(a);o>-1&&t.splice(o,1)}}function r(){t=[]}return{add:e,list:()=>t.slice(),reset:r}}function Jt(t,e,r,a,o,i=l=>l()){const l=a&&(a.enterCallbacks[o]=a.enterCallbacks[o]||[]);return()=>new Promise((f,d)=>{const p=g=>{g===!1?d(On(je.NAVIGATION_ABORTED,{from:r,to:e})):g instanceof Error?d(g):Cd(g)?d(On(je.NAVIGATION_GUARD_REDIRECT,{from:e,to:g})):(l&&a.enterCallbacks[o]===l&&typeof g=="function"&&l.push(g),f())},m=i(()=>t.call(a&&a.instances[o],e,r,p));let v=Promise.resolve(m);t.length<3&&(v=v.then(p)),v.catch(g=>d(g))})}function yo(t,e,r,a,o=i=>i()){const i=[];for(const l of t)for(const f in l.components){let d=l.components[f];if(!(e!=="beforeRouteEnter"&&!l.instances[f]))if(da(d)){const p=(d.__vccOpts||d)[e];p&&i.push(Jt(p,r,a,l,f,o))}else{let p=d();i.push(()=>p.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${f}" at "${l.path}"`);const v=Yu(m)?m.default:m;l.mods[f]=m,l.components[f]=v;const g=(v.__vccOpts||v)[e];return g&&Jt(g,r,a,l,f,o)()}))}}return i}function Id(t,e){const r=[],a=[],o=[],i=Math.max(e.matched.length,t.matched.length);for(let l=0;l<i;l++){const f=e.matched[l];f&&(t.matched.find(p=>In(p,f))?a.push(f):r.push(f));const d=t.matched[l];d&&(e.matched.find(p=>In(p,d))||o.push(d))}return[r,a,o]}let Od=()=>location.protocol+"//"+location.host;function ya(t,e){const{pathname:r,search:a,hash:o}=e,i=t.indexOf("#");if(i>-1){let l=o.includes(t.slice(i))?t.slice(i).length:1,f=o.slice(l);return f[0]!=="/"&&(f="/"+f),xi(f,"")}return xi(r,t)+a+o}function Dd(t,e,r,a){let o=[],i=[],l=null;const f=({state:g})=>{const k=ya(t,location),E=r.value,T=e.value;let A=0;if(g){if(r.value=k,e.value=g,l&&l===E){l=null;return}A=T?g.position-T.position:0}else a(k);o.forEach(q=>{q(r.value,E,{delta:A,type:So.pop,direction:A?A>0?bo.forward:bo.back:bo.unknown})})};function d(){l=r.value}function p(g){o.push(g);const k=()=>{const E=o.indexOf(g);E>-1&&o.splice(E,1)};return i.push(k),k}function m(){if(document.visibilityState==="hidden"){const{history:g}=window;if(!g.state)return;g.replaceState(Ee({},g.state,{scroll:Ts()}),"")}}function v(){for(const g of i)g();i=[],window.removeEventListener("popstate",f),window.removeEventListener("pagehide",m),document.removeEventListener("visibilitychange",m)}return window.addEventListener("popstate",f),window.addEventListener("pagehide",m),document.addEventListener("visibilitychange",m),{pauseListeners:d,listen:p,destroy:v}}function qi(t,e,r,a=!1,o=!1){return{back:t,current:e,forward:r,replaced:a,position:window.history.length,scroll:o?Ts():null}}function $d(t){const{history:e,location:r}=window,a={value:ya(t,r)},o={value:e.state};o.value||i(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(d,p,m){const v=t.indexOf("#"),g=v>-1?(r.host&&document.querySelector("base")?t:t.slice(v))+d:Od()+t+d;try{e[m?"replaceState":"pushState"](p,"",g),o.value=p}catch(k){console.error(k),r[m?"replace":"assign"](g)}}function l(d,p){i(d,Ee({},e.state,qi(o.value.back,d,o.value.forward,!0),p,{position:o.value.position}),!0),a.value=d}function f(d,p){const m=Ee({},o.value,e.state,{forward:d,scroll:Ts()});i(m.current,m,!0),i(d,Ee({},qi(a.value,d,null),{position:m.position+1},p),!1),a.value=d}return{location:a,state:o,push:f,replace:l}}function Pd(t){t=vd(t);const e=$d(t),r=Dd(t,e.state,e.location,e.replace);function a(i,l=!0){l||r.pauseListeners(),history.go(i)}const o=Ee({location:"",base:t,go:a,createHref:yd.bind(null,t)},e,r);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}let ln=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var He=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(He||{});const Ld={type:ln.Static,value:""},Nd=/[a-zA-Z0-9_]/;function Md(t){if(!t)return[[]];if(t==="/")return[[Ld]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(k){throw new Error(`ERR (${r})/"${p}": ${k}`)}let r=He.Static,a=r;const o=[];let i;function l(){i&&o.push(i),i=[]}let f=0,d,p="",m="";function v(){p&&(r===He.Static?i.push({type:ln.Static,value:p}):r===He.Param||r===He.ParamRegExp||r===He.ParamRegExpEnd?(i.length>1&&(d==="*"||d==="+")&&e(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),i.push({type:ln.Param,value:p,regexp:m,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):e("Invalid state to consume buffer"),p="")}function g(){p+=d}for(;f<t.length;){if(d=t[f++],d==="\\"&&r!==He.ParamRegExp){a=r,r=He.EscapeNext;continue}switch(r){case He.Static:d==="/"?(p&&v(),l()):d===":"?(v(),r=He.Param):g();break;case He.EscapeNext:g(),r=a;break;case He.Param:d==="("?r=He.ParamRegExp:Nd.test(d)?g():(v(),r=He.Static,d!=="*"&&d!=="?"&&d!=="+"&&f--);break;case He.ParamRegExp:d===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+d:r=He.ParamRegExpEnd:m+=d;break;case He.ParamRegExpEnd:v(),r=He.Static,d!=="*"&&d!=="?"&&d!=="+"&&f--,m="";break;default:e("Unknown state");break}}return r===He.ParamRegExp&&e(`Unfinished custom RegExp for param "${p}"`),v(),l(),o}const Ri="[^/]+?",Fd={sensitive:!1,strict:!1,start:!0,end:!0};var lt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(lt||{});const jd=/[.+*?^${}()[\]/\\]/g;function Ud(t,e){const r=Ee({},Fd,e),a=[];let o=r.start?"^":"";const i=[];for(const p of t){const m=p.length?[]:[lt.Root];r.strict&&!p.length&&(o+="/");for(let v=0;v<p.length;v++){const g=p[v];let k=lt.Segment+(r.sensitive?lt.BonusCaseSensitive:0);if(g.type===ln.Static)v||(o+="/"),o+=g.value.replace(jd,"\\$&"),k+=lt.Static;else if(g.type===ln.Param){const{value:E,repeatable:T,optional:A,regexp:q}=g;i.push({name:E,repeatable:T,optional:A});const P=q||Ri;if(P!==Ri){k+=lt.BonusCustomRegExp;try{`${P}`}catch(U){throw new Error(`Invalid custom RegExp for param "${E}" (${P}): `+U.message)}}let j=T?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(j=A&&p.length<2?`(?:/${j})`:"/"+j),A&&(j+="?"),o+=j,k+=lt.Dynamic,A&&(k+=lt.BonusOptional),T&&(k+=lt.BonusRepeatable),P===".*"&&(k+=lt.BonusWildcard)}m.push(k)}a.push(m)}if(r.strict&&r.end){const p=a.length-1;a[p][a[p].length-1]+=lt.BonusStrict}r.strict||(o+="/?"),r.end?o+="$":r.strict&&!o.endsWith("/")&&(o+="(?:/|$)");const l=new RegExp(o,r.sensitive?"":"i");function f(p){const m=p.match(l),v={};if(!m)return null;for(let g=1;g<m.length;g++){const k=m[g]||"",E=i[g-1];v[E.name]=k&&E.repeatable?k.split("/"):k}return v}function d(p){let m="",v=!1;for(const g of t){(!v||!m.endsWith("/"))&&(m+="/"),v=!1;for(const k of g)if(k.type===ln.Static)m+=k.value;else if(k.type===ln.Param){const{value:E,repeatable:T,optional:A}=k,q=E in p?p[E]:"";if(qt(q)&&!T)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const P=qt(q)?q.join("/"):q;if(!P)if(A)g.length<2&&(m.endsWith("/")?m=m.slice(0,-1):v=!0);else throw new Error(`Missing required param "${E}"`);m+=P}}return m||"/"}return{re:l,score:a,keys:i,parse:f,stringify:d}}function Bd(t,e){let r=0;for(;r<t.length&&r<e.length;){const a=e[r]-t[r];if(a)return a;r++}return t.length<e.length?t.length===1&&t[0]===lt.Static+lt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===lt.Static+lt.Segment?1:-1:0}function wa(t,e){let r=0;const a=t.score,o=e.score;for(;r<a.length&&r<o.length;){const i=Bd(a[r],o[r]);if(i)return i;r++}if(Math.abs(o.length-a.length)===1){if(Ii(a))return 1;if(Ii(o))return-1}return o.length-a.length}function Ii(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const Gd={strict:!1,end:!0,sensitive:!1};function Vd(t,e,r){const a=Ud(Md(t.path),r),o=Ee(a,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function Kd(t,e){const r=[],a=new Map;e=Ei(Gd,e);function o(v){return a.get(v)}function i(v,g,k){const E=!k,T=Di(v);T.aliasOf=k&&k.record;const A=Ei(e,v),q=[T];if("alias"in v){const U=typeof v.alias=="string"?[v.alias]:v.alias;for(const Y of U)q.push(Di(Ee({},T,{components:k?k.record.components:T.components,path:Y,aliasOf:k?k.record:T})))}let P,j;for(const U of q){const{path:Y}=U;if(g&&Y[0]!=="/"){const se=g.record.path,Z=se[se.length-1]==="/"?"":"/";U.path=g.record.path+(Y&&Z+Y)}if(P=Vd(U,g,A),k?k.alias.push(P):(j=j||P,j!==P&&j.alias.push(P),E&&v.name&&!$i(P)&&l(v.name)),ka(P)&&d(P),T.children){const se=T.children;for(let Z=0;Z<se.length;Z++)i(se[Z],P,k&&k.children[Z])}k=k||P}return j?()=>{l(j)}:Wn}function l(v){if(va(v)){const g=a.get(v);g&&(a.delete(v),r.splice(r.indexOf(g),1),g.children.forEach(l),g.alias.forEach(l))}else{const g=r.indexOf(v);g>-1&&(r.splice(g,1),v.record.name&&a.delete(v.record.name),v.children.forEach(l),v.alias.forEach(l))}}function f(){return r}function d(v){const g=Jd(v,r);r.splice(g,0,v),v.record.name&&!$i(v)&&a.set(v.record.name,v)}function p(v,g){let k,E={},T,A;if("name"in v&&v.name){if(k=a.get(v.name),!k)throw On(je.MATCHER_NOT_FOUND,{location:v});A=k.record.name,E=Ee(Oi(g.params,k.keys.filter(j=>!j.optional).concat(k.parent?k.parent.keys.filter(j=>j.optional):[]).map(j=>j.name)),v.params&&Oi(v.params,k.keys.map(j=>j.name))),T=k.stringify(E)}else if(v.path!=null)T=v.path,k=r.find(j=>j.re.test(T)),k&&(E=k.parse(T),A=k.record.name);else{if(k=g.name?a.get(g.name):r.find(j=>j.re.test(g.path)),!k)throw On(je.MATCHER_NOT_FOUND,{location:v,currentLocation:g});A=k.record.name,E=Ee({},g.params,v.params),T=k.stringify(E)}const q=[];let P=k;for(;P;)q.unshift(P.record),P=P.parent;return{name:A,path:T,params:E,matched:q,meta:Hd(q)}}t.forEach(v=>i(v));function m(){r.length=0,a.clear()}return{addRoute:i,resolve:p,removeRoute:l,clearRoutes:m,getRoutes:f,getRecordMatcher:o}}function Oi(t,e){const r={};for(const a of e)a in t&&(r[a]=t[a]);return r}function Di(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:zd(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function zd(t){const e={},r=t.props||!1;if("component"in t)e.default=r;else for(const a in t.components)e[a]=typeof r=="object"?r[a]:r;return e}function $i(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Hd(t){return t.reduce((e,r)=>Ee(e,r.meta),{})}function Jd(t,e){let r=0,a=e.length;for(;r!==a;){const i=r+a>>1;wa(t,e[i])<0?a=i:r=i+1}const o=Wd(t);return o&&(a=e.lastIndexOf(o,a-1)),a}function Wd(t){let e=t;for(;e=e.parent;)if(ka(e)&&wa(t,e)===0)return e}function ka({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Pi(t){const e=Gt(qs),r=Gt(Po),a=Ne(()=>{const d=Tn(t.to);return e.resolve(d)}),o=Ne(()=>{const{matched:d}=a.value,{length:p}=d,m=d[p-1],v=r.matched;if(!m||!v.length)return-1;const g=v.findIndex(In.bind(null,m));if(g>-1)return g;const k=Li(d[p-2]);return p>1&&Li(m)===k&&v[v.length-1].path!==k?v.findIndex(In.bind(null,d[p-2])):g}),i=Ne(()=>o.value>-1&&eh(r.params,a.value.params)),l=Ne(()=>o.value>-1&&o.value===r.matched.length-1&&_a(r.params,a.value.params));function f(d={}){if(Zd(d)){const p=e[Tn(t.replace)?"replace":"push"](Tn(t.to)).catch(Wn);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>p),p}return Promise.resolve()}return{route:a,href:Ne(()=>a.value.href),isActive:i,isExactActive:l,navigate:f}}function Qd(t){return t.length===1?t[0]:t}const Xd=vt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Pi,setup(t,{slots:e}){const r=du(Pi(t)),{options:a}=Gt(qs),o=Ne(()=>({[Ni(t.activeClass,a.linkActiveClass,"router-link-active")]:r.isActive,[Ni(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const i=e.default&&Qd(e.default(r));return t.custom?i:oa("a",{"aria-current":r.isExactActive?t.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:o.value},i)}}}),Yd=Xd;function Zd(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function eh(t,e){for(const r in e){const a=e[r],o=t[r];if(typeof a=="string"){if(a!==o)return!1}else if(!qt(o)||o.length!==a.length||a.some((i,l)=>i.valueOf()!==o[l].valueOf()))return!1}return!0}function Li(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Ni=(t,e,r)=>t??e??r,th=vt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:r}){const a=Gt(To),o=Ne(()=>t.route||a.value),i=Gt(Ti,0),l=Ne(()=>{let p=Tn(i);const{matched:m}=o.value;let v;for(;(v=m[p])&&!v.components;)p++;return p}),f=Ne(()=>o.value.matched[l.value]);qn(Ti,Ne(()=>l.value+1)),qn(Rd,f),qn(To,o);const d=F();return Rn(()=>[d.value,f.value,t.name],([p,m,v],[g,k,E])=>{m&&(m.instances[v]=p,k&&k!==m&&p&&p===g&&(m.leaveGuards.size||(m.leaveGuards=k.leaveGuards),m.updateGuards.size||(m.updateGuards=k.updateGuards))),p&&m&&(!k||!In(m,k)||!g)&&(m.enterCallbacks[v]||[]).forEach(T=>T(p))},{flush:"post"}),()=>{const p=o.value,m=t.name,v=f.value,g=v&&v.components[m];if(!g)return Mi(r.default,{Component:g,route:p});const k=v.props[m],E=k?k===!0?p.params:typeof k=="function"?k(p):k:null,A=oa(g,Ee({},E,e,{onVnodeUnmounted:q=>{q.component.isUnmounted&&(v.instances[m]=null)},ref:d}));return Mi(r.default,{Component:A,route:p})||A}}});function Mi(t,e){if(!t)return null;const r=t(e);return r.length===1?r[0]:r}const nh=th;function sh(t){const e=Kd(t.routes,t),r=t.parseQuery||Td,a=t.stringifyQuery||Ai,o=t.history,i=zn(),l=zn(),f=zn(),d=cu(Ht);let p=Ht;An&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=_o.bind(null,x=>""+x),v=_o.bind(null,dd),g=_o.bind(null,Qn);function k(x,z){let G,te;return va(x)?(G=e.getRecordMatcher(x),te=z):te=x,e.addRoute(te,G)}function E(x){const z=e.getRecordMatcher(x);z&&e.removeRoute(z)}function T(){return e.getRoutes().map(x=>x.record)}function A(x){return!!e.getRecordMatcher(x)}function q(x,z){if(z=Ee({},z||d.value),typeof x=="string"){const re=vo(r,x,z.path),Ae=e.resolve({path:re.path},z),bt=o.createHref(re.fullPath);return Ee(re,Ae,{params:g(Ae.params),hash:Qn(re.hash),redirectedFrom:void 0,href:bt})}let G;if(x.path!=null)G=Ee({},x,{path:vo(r,x.path,z.path).path});else{const re=Ee({},x.params);for(const Ae in re)re[Ae]==null&&delete re[Ae];G=Ee({},x,{params:v(re)}),z.params=v(z.params)}const te=e.resolve(G,z),he=x.hash||"";te.params=m(g(te.params));const Se=pd(a,Ee({},x,{hash:ld(he),path:te.path})),ue=o.createHref(Se);return Ee({fullPath:Se,hash:he,query:a===Ai?qd(x.query):x.query||{}},te,{redirectedFrom:void 0,href:ue})}function P(x){return typeof x=="string"?vo(r,x,d.value.path):Ee({},x)}function j(x,z){if(p!==x)return On(je.NAVIGATION_CANCELLED,{from:z,to:x})}function U(x){return Z(x)}function Y(x){return U(Ee(P(x),{replace:!0}))}function se(x,z){const G=x.matched[x.matched.length-1];if(G&&G.redirect){const{redirect:te}=G;let he=typeof te=="function"?te(x,z):te;return typeof he=="string"&&(he=he.includes("?")||he.includes("#")?he=P(he):{path:he},he.params={}),Ee({query:x.query,hash:x.hash,params:he.path!=null?{}:x.params},he)}}function Z(x,z){const G=p=q(x),te=d.value,he=x.state,Se=x.force,ue=x.replace===!0,re=se(G,te);if(re)return Z(Ee(P(re),{state:typeof re=="object"?Ee({},he,re.state):he,force:Se,replace:ue}),z||G);const Ae=G;Ae.redirectedFrom=z;let bt;return!Se&&md(a,te,G)&&(bt=On(je.NAVIGATION_DUPLICATED,{to:Ae,from:te}),Ve(te,te,!0,!1)),(bt?Promise.resolve(bt):D(Ae,te)).catch(M=>Bt(M)?Bt(M,je.NAVIGATION_GUARD_REDIRECT)?M:Je(M):Re(M,Ae,te)).then(M=>{if(M){if(Bt(M,je.NAVIGATION_GUARD_REDIRECT))return Z(Ee({replace:ue},P(M.to),{state:typeof M.to=="object"?Ee({},he,M.to.state):he,force:Se}),z||Ae)}else M=N(Ae,te,!0,ue,he);return I(Ae,te,M),M})}function W(x,z){const G=j(x,z);return G?Promise.reject(G):Promise.resolve()}function C(x){const z=Ke.values().next().value;return z&&typeof z.runWithContext=="function"?z.runWithContext(x):x()}function D(x,z){let G;const[te,he,Se]=Id(x,z);G=yo(te.reverse(),"beforeRouteLeave",x,z);for(const re of te)re.leaveGuards.forEach(Ae=>{G.push(Jt(Ae,x,z))});const ue=W.bind(null,x,z);return G.push(ue),ct(G).then(()=>{G=[];for(const re of i.list())G.push(Jt(re,x,z));return G.push(ue),ct(G)}).then(()=>{G=yo(he,"beforeRouteUpdate",x,z);for(const re of he)re.updateGuards.forEach(Ae=>{G.push(Jt(Ae,x,z))});return G.push(ue),ct(G)}).then(()=>{G=[];for(const re of Se)if(re.beforeEnter)if(qt(re.beforeEnter))for(const Ae of re.beforeEnter)G.push(Jt(Ae,x,z));else G.push(Jt(re.beforeEnter,x,z));return G.push(ue),ct(G)}).then(()=>(x.matched.forEach(re=>re.enterCallbacks={}),G=yo(Se,"beforeRouteEnter",x,z,C),G.push(ue),ct(G))).then(()=>{G=[];for(const re of l.list())G.push(Jt(re,x,z));return G.push(ue),ct(G)}).catch(re=>Bt(re,je.NAVIGATION_CANCELLED)?re:Promise.reject(re))}function I(x,z,G){f.list().forEach(te=>C(()=>te(x,z,G)))}function N(x,z,G,te,he){const Se=j(x,z);if(Se)return Se;const ue=z===Ht,re=An?history.state:{};G&&(te||ue?o.replace(x.fullPath,Ee({scroll:ue&&re&&re.scroll},he)):o.push(x.fullPath,he)),d.value=x,Ve(x,z,G,ue),Je()}let ee;function ke(){ee||(ee=o.listen((x,z,G)=>{if(!Le.listening)return;const te=q(x),he=se(te,Le.currentRoute.value);if(he){Z(Ee(he,{replace:!0,force:!0}),te).catch(Wn);return}p=te;const Se=d.value;An&&Ed(Si(Se.fullPath,G.delta),Ts()),D(te,Se).catch(ue=>Bt(ue,je.NAVIGATION_ABORTED|je.NAVIGATION_CANCELLED)?ue:Bt(ue,je.NAVIGATION_GUARD_REDIRECT)?(Z(Ee(P(ue.to),{force:!0}),te).then(re=>{Bt(re,je.NAVIGATION_ABORTED|je.NAVIGATION_DUPLICATED)&&!G.delta&&G.type===So.pop&&o.go(-1,!1)}).catch(Wn),Promise.reject()):(G.delta&&o.go(-G.delta,!1),Re(ue,te,Se))).then(ue=>{ue=ue||N(te,Se,!1),ue&&(G.delta&&!Bt(ue,je.NAVIGATION_CANCELLED)?o.go(-G.delta,!1):G.type===So.pop&&Bt(ue,je.NAVIGATION_ABORTED|je.NAVIGATION_DUPLICATED)&&o.go(-1,!1)),I(te,Se,ue)}).catch(Wn)}))}let Me=zn(),ge=zn(),et;function Re(x,z,G){Je(x);const te=ge.list();return te.length?te.forEach(he=>he(x,z,G)):console.error(x),Promise.reject(x)}function $(){return et&&d.value!==Ht?Promise.resolve():new Promise((x,z)=>{Me.add([x,z])})}function Je(x){return et||(et=!x,ke(),Me.list().forEach(([z,G])=>x?G(x):z()),Me.reset()),x}function Ve(x,z,G,te){const{scrollBehavior:he}=t;if(!An||!he)return Promise.resolve();const Se=!G&&xd(Si(x.fullPath,0))||(te||!G)&&history.state&&history.state.scroll||null;return Jn().then(()=>he(x,z,Se)).then(ue=>ue&&kd(ue)).catch(ue=>Re(ue,x,z))}const We=x=>o.go(x);let Be;const Ke=new Set,Le={currentRoute:d,listening:!0,addRoute:k,removeRoute:E,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:T,resolve:q,options:t,push:U,replace:Y,go:We,back:()=>We(-1),forward:()=>We(1),beforeEach:i.add,beforeResolve:l.add,afterEach:f.add,onError:ge.add,isReady:$,install(x){x.component("RouterLink",Yd),x.component("RouterView",nh),x.config.globalProperties.$router=Le,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>Tn(d)}),An&&!Be&&d.value===Ht&&(Be=!0,U(o.location).catch(te=>{}));const z={};for(const te in Ht)Object.defineProperty(z,te,{get:()=>d.value[te],enumerable:!0});x.provide(qs,Le),x.provide(Po,uu(z)),x.provide(To,d);const G=x.unmount;Ke.add(x),x.unmount=function(){Ke.delete(x),Ke.size<1&&(p=Ht,ee&&ee(),ee=null,d.value=Ht,Be=!1,et=!1),G()}}};function ct(x){return x.reduce((z,G)=>z.then(()=>C(G)),Promise.resolve())}return Le}function $n(){return Gt(qs)}function Pn(t){return Gt(Po)}const Pe=(t,e)=>{const r=t.__vccOpts||t;for(const[a,o]of e)r[a]=o;return r},oh={name:"HomeView",data(){return{searchQuery:""}},methods:{performSearch(){this.searchQuery.trim()&&this.$router.push({path:"/tools/id-search/results",query:{q:this.searchQuery.trim()}})}}},rh={class:"home"},ih={class:"hero-section"},ah={class:"container"},lh={class:"search-box-container"},ch={class:"input-group"},uh={class:"features-section py-8"},dh={class:"container"},hh={class:"row"},fh={class:"col-md-4 mb-4"},ph={class:"feature-card h-100"},mh={class:"col-md-4 mb-4"},gh={class:"feature-card h-100"},_h={class:"col-md-4 mb-4"},vh={class:"feature-card h-100"};function bh(t,e,r,a,o,i){const l=gt("router-link");return _(),b("div",rh,[s("div",ih,[s("div",ah,[e[4]||(e[4]=s("h1",{class:"text-center mb-4"},"Welcome to CottonOGD Website",-1)),e[5]||(e[5]=s("p",{class:"text-center mb-6"},"Comprehensive genomic database for cotton research",-1)),s("div",lh,[s("div",ch,[we(s("input",{type:"text",class:"form-control form-control-lg",placeholder:"Enter gene ID, symbol or keyword...","onUpdate:modelValue":e[0]||(e[0]=f=>o.searchQuery=f),onKeyup:e[1]||(e[1]=hu((...f)=>i.performSearch&&i.performSearch(...f),["enter"]))},null,544),[[Ye,o.searchQuery]]),s("button",{class:"btn btn-primary btn-lg",onClick:e[2]||(e[2]=(...f)=>i.performSearch&&i.performSearch(...f))},[...e[3]||(e[3]=[s("i",{class:"fas fa-search"},null,-1),ne(" Search ",-1)])])])])])]),s("div",uh,[s("div",dh,[s("div",hh,[s("div",fh,[s("div",ph,[e[7]||(e[7]=s("div",{class:"icon-container"},[s("i",{class:"fas fa-database fa-3x text-primary"})],-1)),e[8]||(e[8]=s("h3",{class:"mt-3 mb-2"},"Browse",-1)),e[9]||(e[9]=s("p",{class:"mb-4"},"Explore cotton genome data, species information and transcription factors",-1)),Q(l,{to:"/browse/genome",class:"btn btn-outline-primary"},{default:_e(()=>[...e[6]||(e[6]=[ne(" Get Started ",-1)])]),_:1})])]),s("div",mh,[s("div",gh,[e[11]||(e[11]=s("div",{class:"icon-container"},[s("i",{class:"fas fa-chart-line fa-3x text-primary"})],-1)),e[12]||(e[12]=s("h3",{class:"mt-3 mb-2"},"Visualization",-1)),e[13]||(e[13]=s("p",{class:"mb-4"},"View genomic data interactively with JBrowse and expression patterns",-1)),Q(l,{to:"/jbrowse",class:"btn btn-outline-primary"},{default:_e(()=>[...e[10]||(e[10]=[ne(" Launch JBrowse ",-1)])]),_:1})])]),s("div",_h,[s("div",vh,[e[15]||(e[15]=s("div",{class:"icon-container"},[s("i",{class:"fas fa-tools fa-3x text-primary"})],-1)),e[16]||(e[16]=s("h3",{class:"mt-3 mb-2"},"Tools",-1)),e[17]||(e[17]=s("p",{class:"mb-4"},"Use various analysis tools for gene function, expression and enrichment",-1)),Q(l,{to:"/tools/id-search",class:"btn btn-outline-primary"},{default:_e(()=>[...e[14]||(e[14]=[ne(" Explore Tools ",-1)])]),_:1})])])])])]),e[18]||(e[18]=As('<div class="research-section bg-light py-8" data-v-fafdabbe><div class="container" data-v-fafdabbe><h2 class="text-center mb-6" data-v-fafdabbe>Latest Research Highlights</h2><div class="row" data-v-fafdabbe><div class="col-md-6 mb-4" data-v-fafdabbe><div class="research-card bg-white rounded-lg shadow-sm p-4" data-v-fafdabbe><h4 data-v-fafdabbe>Genome-Wide Analysis of Cotton Transcription Factors</h4><p class="text-muted" data-v-fafdabbe>Identification and characterization of transcription factor families across cotton species</p></div></div><div class="col-md-6 mb-4" data-v-fafdabbe><div class="research-card bg-white rounded-lg shadow-sm p-4" data-v-fafdabbe><h4 data-v-fafdabbe>Comparative Genomics of Gossypium</h4><p class="text-muted" data-v-fafdabbe>Evolutionary insights from comparative analysis of multiple cotton genomes</p></div></div></div></div></div>',1))])}const yh=Pe(oh,[["render",bh],["__scopeId","data-v-fafdabbe"]]),wh={name:"BrowseGenomeView"},kh={class:"container mt-4"};function Eh(t,e,r,a,o,i){return _(),b("div",kh,[...e[0]||(e[0]=[s("h1",null,"浏览基因组",-1),s("p",null,"此页面正在开发中...",-1)])])}const xh=Pe(wh,[["render",Eh]]);function Ea(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ch}=Object.prototype,{getPrototypeOf:Lo}=Object,{iterator:Rs,toStringTag:xa}=Symbol,Is=(t=>e=>{const r=Ch.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Rt=t=>(t=t.toLowerCase(),e=>Is(e)===t),Os=t=>e=>typeof e===t,{isArray:Ln}=Array,Dn=Os("undefined");function Xn(t){return t!==null&&!Dn(t)&&t.constructor!==null&&!Dn(t.constructor)&&ut(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Ca=Rt("ArrayBuffer");function Sh(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Ca(t.buffer),e}const Ah=Os("string"),ut=Os("function"),Sa=Os("number"),Yn=t=>t!==null&&typeof t=="object",Th=t=>t===!0||t===!1,ks=t=>{if(Is(t)!=="object")return!1;const e=Lo(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(xa in t)&&!(Rs in t)},qh=t=>{if(!Yn(t)||Xn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Rh=Rt("Date"),Ih=Rt("File"),Oh=Rt("Blob"),Dh=Rt("FileList"),$h=t=>Yn(t)&&ut(t.pipe),Ph=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ut(t.append)&&((e=Is(t))==="formdata"||e==="object"&&ut(t.toString)&&t.toString()==="[object FormData]"))},Lh=Rt("URLSearchParams"),[Nh,Mh,Fh,jh]=["ReadableStream","Request","Response","Headers"].map(Rt),Uh=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Zn(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),Ln(t))for(a=0,o=t.length;a<o;a++)e.call(null,t[a],a,t);else{if(Xn(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let f;for(a=0;a<l;a++)f=i[a],e.call(null,t[f],f,t)}}function Aa(t,e){if(Xn(t))return null;e=e.toLowerCase();const r=Object.keys(t);let a=r.length,o;for(;a-- >0;)if(o=r[a],e===o.toLowerCase())return o;return null}const cn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ta=t=>!Dn(t)&&t!==cn;function qo(){const{caseless:t,skipUndefined:e}=Ta(this)&&this||{},r={},a=(o,i)=>{const l=t&&Aa(r,i)||i;ks(r[l])&&ks(o)?r[l]=qo(r[l],o):ks(o)?r[l]=qo({},o):Ln(o)?r[l]=o.slice():(!e||!Dn(o))&&(r[l]=o)};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&Zn(arguments[o],a);return r}const Bh=(t,e,r,{allOwnKeys:a}={})=>(Zn(e,(o,i)=>{r&&ut(o)?t[i]=Ea(o,r):t[i]=o},{allOwnKeys:a}),t),Gh=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Vh=(t,e,r,a)=>{t.prototype=Object.create(e.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Kh=(t,e,r,a)=>{let o,i,l;const f={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),i=o.length;i-- >0;)l=o[i],(!a||a(l,t,e))&&!f[l]&&(e[l]=t[l],f[l]=!0);t=r!==!1&&Lo(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},zh=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const a=t.indexOf(e,r);return a!==-1&&a===r},Hh=t=>{if(!t)return null;if(Ln(t))return t;let e=t.length;if(!Sa(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Jh=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Lo(Uint8Array)),Wh=(t,e)=>{const a=(t&&t[Rs]).call(t);let o;for(;(o=a.next())&&!o.done;){const i=o.value;e.call(t,i[0],i[1])}},Qh=(t,e)=>{let r;const a=[];for(;(r=t.exec(e))!==null;)a.push(r);return a},Xh=Rt("HTMLFormElement"),Yh=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,o){return a.toUpperCase()+o}),Fi=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),Zh=Rt("RegExp"),qa=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),a={};Zn(r,(o,i)=>{let l;(l=e(o,i,t))!==!1&&(a[i]=l||o)}),Object.defineProperties(t,a)},ef=t=>{qa(t,(e,r)=>{if(ut(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(ut(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},tf=(t,e)=>{const r={},a=o=>{o.forEach(i=>{r[i]=!0})};return Ln(t)?a(t):a(String(t).split(e)),r},nf=()=>{},sf=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function of(t){return!!(t&&ut(t.append)&&t[xa]==="FormData"&&t[Rs])}const rf=t=>{const e=new Array(10),r=(a,o)=>{if(Yn(a)){if(e.indexOf(a)>=0)return;if(Xn(a))return a;if(!("toJSON"in a)){e[o]=a;const i=Ln(a)?[]:{};return Zn(a,(l,f)=>{const d=r(l,o+1);!Dn(d)&&(i[f]=d)}),e[o]=void 0,i}}return a};return r(t,0)},af=Rt("AsyncFunction"),lf=t=>t&&(Yn(t)||ut(t))&&ut(t.then)&&ut(t.catch),Ra=((t,e)=>t?setImmediate:e?((r,a)=>(cn.addEventListener("message",({source:o,data:i})=>{o===cn&&i===r&&a.length&&a.shift()()},!1),o=>{a.push(o),cn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",ut(cn.postMessage)),cf=typeof queueMicrotask<"u"?queueMicrotask.bind(cn):typeof process<"u"&&process.nextTick||Ra,uf=t=>t!=null&&ut(t[Rs]),R={isArray:Ln,isArrayBuffer:Ca,isBuffer:Xn,isFormData:Ph,isArrayBufferView:Sh,isString:Ah,isNumber:Sa,isBoolean:Th,isObject:Yn,isPlainObject:ks,isEmptyObject:qh,isReadableStream:Nh,isRequest:Mh,isResponse:Fh,isHeaders:jh,isUndefined:Dn,isDate:Rh,isFile:Ih,isBlob:Oh,isRegExp:Zh,isFunction:ut,isStream:$h,isURLSearchParams:Lh,isTypedArray:Jh,isFileList:Dh,forEach:Zn,merge:qo,extend:Bh,trim:Uh,stripBOM:Gh,inherits:Vh,toFlatObject:Kh,kindOf:Is,kindOfTest:Rt,endsWith:zh,toArray:Hh,forEachEntry:Wh,matchAll:Qh,isHTMLForm:Xh,hasOwnProperty:Fi,hasOwnProp:Fi,reduceDescriptors:qa,freezeMethods:ef,toObjectSet:tf,toCamelCase:Yh,noop:nf,toFiniteNumber:sf,findKey:Aa,global:cn,isContextDefined:Ta,isSpecCompliantForm:of,toJSONObject:rf,isAsyncFn:af,isThenable:lf,setImmediate:Ra,asap:cf,isIterable:uf};function ce(t,e,r,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),a&&(this.request=a),o&&(this.response=o,this.status=o.status?o.status:null)}R.inherits(ce,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:R.toJSONObject(this.config),code:this.code,status:this.status}}});const Ia=ce.prototype,Oa={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Oa[t]={value:t}});Object.defineProperties(ce,Oa);Object.defineProperty(Ia,"isAxiosError",{value:!0});ce.from=(t,e,r,a,o,i)=>{const l=Object.create(Ia);R.toFlatObject(t,l,function(m){return m!==Error.prototype},p=>p!=="isAxiosError");const f=t&&t.message?t.message:"Error",d=e==null&&t?t.code:e;return ce.call(l,f,d,r,a,o),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const df=null;function Ro(t){return R.isPlainObject(t)||R.isArray(t)}function Da(t){return R.endsWith(t,"[]")?t.slice(0,-2):t}function ji(t,e,r){return t?t.concat(e).map(function(o,i){return o=Da(o),!r&&i?"["+o+"]":o}).join(r?".":""):e}function hf(t){return R.isArray(t)&&!t.some(Ro)}const ff=R.toFlatObject(R,{},null,function(e){return/^is[A-Z]/.test(e)});function Ds(t,e,r){if(!R.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=R.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,A){return!R.isUndefined(A[T])});const a=r.metaTokens,o=r.visitor||m,i=r.dots,l=r.indexes,d=(r.Blob||typeof Blob<"u"&&Blob)&&R.isSpecCompliantForm(e);if(!R.isFunction(o))throw new TypeError("visitor must be a function");function p(E){if(E===null)return"";if(R.isDate(E))return E.toISOString();if(R.isBoolean(E))return E.toString();if(!d&&R.isBlob(E))throw new ce("Blob is not supported. Use a Buffer instead.");return R.isArrayBuffer(E)||R.isTypedArray(E)?d&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function m(E,T,A){let q=E;if(E&&!A&&typeof E=="object"){if(R.endsWith(T,"{}"))T=a?T:T.slice(0,-2),E=JSON.stringify(E);else if(R.isArray(E)&&hf(E)||(R.isFileList(E)||R.endsWith(T,"[]"))&&(q=R.toArray(E)))return T=Da(T),q.forEach(function(j,U){!(R.isUndefined(j)||j===null)&&e.append(l===!0?ji([T],U,i):l===null?T:T+"[]",p(j))}),!1}return Ro(E)?!0:(e.append(ji(A,T,i),p(E)),!1)}const v=[],g=Object.assign(ff,{defaultVisitor:m,convertValue:p,isVisitable:Ro});function k(E,T){if(!R.isUndefined(E)){if(v.indexOf(E)!==-1)throw Error("Circular reference detected in "+T.join("."));v.push(E),R.forEach(E,function(q,P){(!(R.isUndefined(q)||q===null)&&o.call(e,q,R.isString(P)?P.trim():P,T,g))===!0&&k(q,T?T.concat(P):[P])}),v.pop()}}if(!R.isObject(t))throw new TypeError("data must be an object");return k(t),e}function Ui(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function No(t,e){this._pairs=[],t&&Ds(t,this,e)}const $a=No.prototype;$a.append=function(e,r){this._pairs.push([e,r])};$a.toString=function(e){const r=e?function(a){return e.call(this,a,Ui)}:Ui;return this._pairs.map(function(o){return r(o[0])+"="+r(o[1])},"").join("&")};function pf(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Pa(t,e,r){if(!e)return t;const a=r&&r.encode||pf;R.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(o?i=o(e,r):i=R.isURLSearchParams(e)?e.toString():new No(e,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Bi{constructor(){this.handlers=[]}use(e,r,a){return this.handlers.push({fulfilled:e,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){R.forEach(this.handlers,function(a){a!==null&&e(a)})}}const La={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mf=typeof URLSearchParams<"u"?URLSearchParams:No,gf=typeof FormData<"u"?FormData:null,_f=typeof Blob<"u"?Blob:null,vf={isBrowser:!0,classes:{URLSearchParams:mf,FormData:gf,Blob:_f},protocols:["http","https","file","blob","url","data"]},Mo=typeof window<"u"&&typeof document<"u",Io=typeof navigator=="object"&&navigator||void 0,bf=Mo&&(!Io||["ReactNative","NativeScript","NS"].indexOf(Io.product)<0),yf=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wf=Mo&&window.location.href||"http://localhost",kf=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Mo,hasStandardBrowserEnv:bf,hasStandardBrowserWebWorkerEnv:yf,navigator:Io,origin:wf},Symbol.toStringTag,{value:"Module"})),nt={...kf,...vf};function Ef(t,e){return Ds(t,new nt.classes.URLSearchParams,{visitor:function(r,a,o,i){return nt.isNode&&R.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function xf(t){return R.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Cf(t){const e={},r=Object.keys(t);let a;const o=r.length;let i;for(a=0;a<o;a++)i=r[a],e[i]=t[i];return e}function Na(t){function e(r,a,o,i){let l=r[i++];if(l==="__proto__")return!0;const f=Number.isFinite(+l),d=i>=r.length;return l=!l&&R.isArray(o)?o.length:l,d?(R.hasOwnProp(o,l)?o[l]=[o[l],a]:o[l]=a,!f):((!o[l]||!R.isObject(o[l]))&&(o[l]=[]),e(r,a,o[l],i)&&R.isArray(o[l])&&(o[l]=Cf(o[l])),!f)}if(R.isFormData(t)&&R.isFunction(t.entries)){const r={};return R.forEachEntry(t,(a,o)=>{e(xf(a),o,r,0)}),r}return null}function Sf(t,e,r){if(R.isString(t))try{return(e||JSON.parse)(t),R.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const es={transitional:La,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const a=r.getContentType()||"",o=a.indexOf("application/json")>-1,i=R.isObject(e);if(i&&R.isHTMLForm(e)&&(e=new FormData(e)),R.isFormData(e))return o?JSON.stringify(Na(e)):e;if(R.isArrayBuffer(e)||R.isBuffer(e)||R.isStream(e)||R.isFile(e)||R.isBlob(e)||R.isReadableStream(e))return e;if(R.isArrayBufferView(e))return e.buffer;if(R.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ef(e,this.formSerializer).toString();if((f=R.isFileList(e))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Ds(f?{"files[]":e}:e,d&&new d,this.formSerializer)}}return i||o?(r.setContentType("application/json",!1),Sf(e)):e}],transformResponse:[function(e){const r=this.transitional||es.transitional,a=r&&r.forcedJSONParsing,o=this.responseType==="json";if(R.isResponse(e)||R.isReadableStream(e))return e;if(e&&R.isString(e)&&(a&&!this.responseType||o)){const l=!(r&&r.silentJSONParsing)&&o;try{return JSON.parse(e,this.parseReviver)}catch(f){if(l)throw f.name==="SyntaxError"?ce.from(f,ce.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nt.classes.FormData,Blob:nt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};R.forEach(["delete","get","head","post","put","patch"],t=>{es.headers[t]={}});const Af=R.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Tf=t=>{const e={};let r,a,o;return t&&t.split(`
`).forEach(function(l){o=l.indexOf(":"),r=l.substring(0,o).trim().toLowerCase(),a=l.substring(o+1).trim(),!(!r||e[r]&&Af[r])&&(r==="set-cookie"?e[r]?e[r].push(a):e[r]=[a]:e[r]=e[r]?e[r]+", "+a:a)}),e},Gi=Symbol("internals");function Hn(t){return t&&String(t).trim().toLowerCase()}function Es(t){return t===!1||t==null?t:R.isArray(t)?t.map(Es):String(t)}function qf(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)e[a[1]]=a[2];return e}const Rf=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function wo(t,e,r,a,o){if(R.isFunction(a))return a.call(this,e,r);if(o&&(e=r),!!R.isString(e)){if(R.isString(a))return e.indexOf(a)!==-1;if(R.isRegExp(a))return a.test(e)}}function If(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,a)=>r.toUpperCase()+a)}function Of(t,e){const r=R.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(o,i,l){return this[a].call(this,e,o,i,l)},configurable:!0})})}let dt=class{constructor(e){e&&this.set(e)}set(e,r,a){const o=this;function i(f,d,p){const m=Hn(d);if(!m)throw new Error("header name must be a non-empty string");const v=R.findKey(o,m);(!v||o[v]===void 0||p===!0||p===void 0&&o[v]!==!1)&&(o[v||d]=Es(f))}const l=(f,d)=>R.forEach(f,(p,m)=>i(p,m,d));if(R.isPlainObject(e)||e instanceof this.constructor)l(e,r);else if(R.isString(e)&&(e=e.trim())&&!Rf(e))l(Tf(e),r);else if(R.isObject(e)&&R.isIterable(e)){let f={},d,p;for(const m of e){if(!R.isArray(m))throw TypeError("Object iterator must return a key-value pair");f[p=m[0]]=(d=f[p])?R.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}l(f,r)}else e!=null&&i(r,e,a);return this}get(e,r){if(e=Hn(e),e){const a=R.findKey(this,e);if(a){const o=this[a];if(!r)return o;if(r===!0)return qf(o);if(R.isFunction(r))return r.call(this,o,a);if(R.isRegExp(r))return r.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=Hn(e),e){const a=R.findKey(this,e);return!!(a&&this[a]!==void 0&&(!r||wo(this,this[a],a,r)))}return!1}delete(e,r){const a=this;let o=!1;function i(l){if(l=Hn(l),l){const f=R.findKey(a,l);f&&(!r||wo(a,a[f],f,r))&&(delete a[f],o=!0)}}return R.isArray(e)?e.forEach(i):i(e),o}clear(e){const r=Object.keys(this);let a=r.length,o=!1;for(;a--;){const i=r[a];(!e||wo(this,this[i],i,e,!0))&&(delete this[i],o=!0)}return o}normalize(e){const r=this,a={};return R.forEach(this,(o,i)=>{const l=R.findKey(a,i);if(l){r[l]=Es(o),delete r[i];return}const f=e?If(i):String(i).trim();f!==i&&delete r[i],r[f]=Es(o),a[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return R.forEach(this,(a,o)=>{a!=null&&a!==!1&&(r[o]=e&&R.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const a=new this(e);return r.forEach(o=>a.set(o)),a}static accessor(e){const a=(this[Gi]=this[Gi]={accessors:{}}).accessors,o=this.prototype;function i(l){const f=Hn(l);a[f]||(Of(o,l),a[f]=!0)}return R.isArray(e)?e.forEach(i):i(e),this}};dt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);R.reduceDescriptors(dt.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(a){this[r]=a}}});R.freezeMethods(dt);function ko(t,e){const r=this||es,a=e||r,o=dt.from(a.headers);let i=a.data;return R.forEach(t,function(f){i=f.call(r,i,o.normalize(),e?e.status:void 0)}),o.normalize(),i}function Ma(t){return!!(t&&t.__CANCEL__)}function Nn(t,e,r){ce.call(this,t??"canceled",ce.ERR_CANCELED,e,r),this.name="CanceledError"}R.inherits(Nn,ce,{__CANCEL__:!0});function Fa(t,e,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):e(new ce("Request failed with status code "+r.status,[ce.ERR_BAD_REQUEST,ce.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Df(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function $f(t,e){t=t||10;const r=new Array(t),a=new Array(t);let o=0,i=0,l;return e=e!==void 0?e:1e3,function(d){const p=Date.now(),m=a[i];l||(l=p),r[o]=d,a[o]=p;let v=i,g=0;for(;v!==o;)g+=r[v++],v=v%t;if(o=(o+1)%t,o===i&&(i=(i+1)%t),p-l<e)return;const k=m&&p-m;return k?Math.round(g*1e3/k):void 0}}function Pf(t,e){let r=0,a=1e3/e,o,i;const l=(p,m=Date.now())=>{r=m,o=null,i&&(clearTimeout(i),i=null),t(...p)};return[(...p)=>{const m=Date.now(),v=m-r;v>=a?l(p,m):(o=p,i||(i=setTimeout(()=>{i=null,l(o)},a-v)))},()=>o&&l(o)]}const Ss=(t,e,r=3)=>{let a=0;const o=$f(50,250);return Pf(i=>{const l=i.loaded,f=i.lengthComputable?i.total:void 0,d=l-a,p=o(d),m=l<=f;a=l;const v={loaded:l,total:f,progress:f?l/f:void 0,bytes:d,rate:p||void 0,estimated:p&&f&&m?(f-l)/p:void 0,event:i,lengthComputable:f!=null,[e?"download":"upload"]:!0};t(v)},r)},Vi=(t,e)=>{const r=t!=null;return[a=>e[0]({lengthComputable:r,total:t,loaded:a}),e[1]]},Ki=t=>(...e)=>R.asap(()=>t(...e)),Lf=nt.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,nt.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(nt.origin),nt.navigator&&/(msie|trident)/i.test(nt.navigator.userAgent)):()=>!0,Nf=nt.hasStandardBrowserEnv?{write(t,e,r,a,o,i,l){if(typeof document>"u")return;const f=[`${t}=${encodeURIComponent(e)}`];R.isNumber(r)&&f.push(`expires=${new Date(r).toUTCString()}`),R.isString(a)&&f.push(`path=${a}`),R.isString(o)&&f.push(`domain=${o}`),i===!0&&f.push("secure"),R.isString(l)&&f.push(`SameSite=${l}`),document.cookie=f.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Mf(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ff(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ja(t,e,r){let a=!Mf(e);return t&&(a||r==!1)?Ff(t,e):e}const zi=t=>t instanceof dt?{...t}:t;function dn(t,e){e=e||{};const r={};function a(p,m,v,g){return R.isPlainObject(p)&&R.isPlainObject(m)?R.merge.call({caseless:g},p,m):R.isPlainObject(m)?R.merge({},m):R.isArray(m)?m.slice():m}function o(p,m,v,g){if(R.isUndefined(m)){if(!R.isUndefined(p))return a(void 0,p,v,g)}else return a(p,m,v,g)}function i(p,m){if(!R.isUndefined(m))return a(void 0,m)}function l(p,m){if(R.isUndefined(m)){if(!R.isUndefined(p))return a(void 0,p)}else return a(void 0,m)}function f(p,m,v){if(v in e)return a(p,m);if(v in t)return a(void 0,p)}const d={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:f,headers:(p,m,v)=>o(zi(p),zi(m),v,!0)};return R.forEach(Object.keys({...t,...e}),function(m){const v=d[m]||o,g=v(t[m],e[m],m);R.isUndefined(g)&&v!==f||(r[m]=g)}),r}const Ua=t=>{const e=dn({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:o,xsrfCookieName:i,headers:l,auth:f}=e;if(e.headers=l=dt.from(l),e.url=Pa(ja(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),f&&l.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):""))),R.isFormData(r)){if(nt.hasStandardBrowserEnv||nt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(R.isFunction(r.getHeaders)){const d=r.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([m,v])=>{p.includes(m.toLowerCase())&&l.set(m,v)})}}if(nt.hasStandardBrowserEnv&&(a&&R.isFunction(a)&&(a=a(e)),a||a!==!1&&Lf(e.url))){const d=o&&i&&Nf.read(i);d&&l.set(o,d)}return e},jf=typeof XMLHttpRequest<"u",Uf=jf&&function(t){return new Promise(function(r,a){const o=Ua(t);let i=o.data;const l=dt.from(o.headers).normalize();let{responseType:f,onUploadProgress:d,onDownloadProgress:p}=o,m,v,g,k,E;function T(){k&&k(),E&&E(),o.cancelToken&&o.cancelToken.unsubscribe(m),o.signal&&o.signal.removeEventListener("abort",m)}let A=new XMLHttpRequest;A.open(o.method.toUpperCase(),o.url,!0),A.timeout=o.timeout;function q(){if(!A)return;const j=dt.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),Y={data:!f||f==="text"||f==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:j,config:t,request:A};Fa(function(Z){r(Z),T()},function(Z){a(Z),T()},Y),A=null}"onloadend"in A?A.onloadend=q:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(q)},A.onabort=function(){A&&(a(new ce("Request aborted",ce.ECONNABORTED,t,A)),A=null)},A.onerror=function(U){const Y=U&&U.message?U.message:"Network Error",se=new ce(Y,ce.ERR_NETWORK,t,A);se.event=U||null,a(se),A=null},A.ontimeout=function(){let U=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const Y=o.transitional||La;o.timeoutErrorMessage&&(U=o.timeoutErrorMessage),a(new ce(U,Y.clarifyTimeoutError?ce.ETIMEDOUT:ce.ECONNABORTED,t,A)),A=null},i===void 0&&l.setContentType(null),"setRequestHeader"in A&&R.forEach(l.toJSON(),function(U,Y){A.setRequestHeader(Y,U)}),R.isUndefined(o.withCredentials)||(A.withCredentials=!!o.withCredentials),f&&f!=="json"&&(A.responseType=o.responseType),p&&([g,E]=Ss(p,!0),A.addEventListener("progress",g)),d&&A.upload&&([v,k]=Ss(d),A.upload.addEventListener("progress",v),A.upload.addEventListener("loadend",k)),(o.cancelToken||o.signal)&&(m=j=>{A&&(a(!j||j.type?new Nn(null,t,A):j),A.abort(),A=null)},o.cancelToken&&o.cancelToken.subscribe(m),o.signal&&(o.signal.aborted?m():o.signal.addEventListener("abort",m)));const P=Df(o.url);if(P&&nt.protocols.indexOf(P)===-1){a(new ce("Unsupported protocol "+P+":",ce.ERR_BAD_REQUEST,t));return}A.send(i||null)})},Bf=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let a=new AbortController,o;const i=function(p){if(!o){o=!0,f();const m=p instanceof Error?p:this.reason;a.abort(m instanceof ce?m:new Nn(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,i(new ce(`timeout ${e} of ms exceeded`,ce.ETIMEDOUT))},e);const f=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(i):p.removeEventListener("abort",i)}),t=null)};t.forEach(p=>p.addEventListener("abort",i));const{signal:d}=a;return d.unsubscribe=()=>R.asap(f),d}},Gf=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let a=0,o;for(;a<r;)o=a+e,yield t.slice(a,o),a=o},Vf=async function*(t,e){for await(const r of Kf(t))yield*Gf(r,e)},Kf=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:a}=await e.read();if(r)break;yield a}}finally{await e.cancel()}},Hi=(t,e,r,a)=>{const o=Vf(t,e);let i=0,l,f=d=>{l||(l=!0,a&&a(d))};return new ReadableStream({async pull(d){try{const{done:p,value:m}=await o.next();if(p){f(),d.close();return}let v=m.byteLength;if(r){let g=i+=v;r(g)}d.enqueue(new Uint8Array(m))}catch(p){throw f(p),p}},cancel(d){return f(d),o.return()}},{highWaterMark:2})},Ji=64*1024,{isFunction:ws}=R,zf=(({Request:t,Response:e})=>({Request:t,Response:e}))(R.global),{ReadableStream:Wi,TextEncoder:Qi}=R.global,Xi=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Hf=t=>{t=R.merge.call({skipUndefined:!0},zf,t);const{fetch:e,Request:r,Response:a}=t,o=e?ws(e):typeof fetch=="function",i=ws(r),l=ws(a);if(!o)return!1;const f=o&&ws(Wi),d=o&&(typeof Qi=="function"?(E=>T=>E.encode(T))(new Qi):async E=>new Uint8Array(await new r(E).arrayBuffer())),p=i&&f&&Xi(()=>{let E=!1;const T=new r(nt.origin,{body:new Wi,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!T}),m=l&&f&&Xi(()=>R.isReadableStream(new a("").body)),v={stream:m&&(E=>E.body)};o&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!v[E]&&(v[E]=(T,A)=>{let q=T&&T[E];if(q)return q.call(T);throw new ce(`Response type '${E}' is not supported`,ce.ERR_NOT_SUPPORT,A)})});const g=async E=>{if(E==null)return 0;if(R.isBlob(E))return E.size;if(R.isSpecCompliantForm(E))return(await new r(nt.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(R.isArrayBufferView(E)||R.isArrayBuffer(E))return E.byteLength;if(R.isURLSearchParams(E)&&(E=E+""),R.isString(E))return(await d(E)).byteLength},k=async(E,T)=>{const A=R.toFiniteNumber(E.getContentLength());return A??g(T)};return async E=>{let{url:T,method:A,data:q,signal:P,cancelToken:j,timeout:U,onDownloadProgress:Y,onUploadProgress:se,responseType:Z,headers:W,withCredentials:C="same-origin",fetchOptions:D}=Ua(E),I=e||fetch;Z=Z?(Z+"").toLowerCase():"text";let N=Bf([P,j&&j.toAbortSignal()],U),ee=null;const ke=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let Me;try{if(se&&p&&A!=="get"&&A!=="head"&&(Me=await k(W,q))!==0){let Ve=new r(T,{method:"POST",body:q,duplex:"half"}),We;if(R.isFormData(q)&&(We=Ve.headers.get("content-type"))&&W.setContentType(We),Ve.body){const[Be,Ke]=Vi(Me,Ss(Ki(se)));q=Hi(Ve.body,Ji,Be,Ke)}}R.isString(C)||(C=C?"include":"omit");const ge=i&&"credentials"in r.prototype,et={...D,signal:N,method:A.toUpperCase(),headers:W.normalize().toJSON(),body:q,duplex:"half",credentials:ge?C:void 0};ee=i&&new r(T,et);let Re=await(i?I(ee,D):I(T,et));const $=m&&(Z==="stream"||Z==="response");if(m&&(Y||$&&ke)){const Ve={};["status","statusText","headers"].forEach(Le=>{Ve[Le]=Re[Le]});const We=R.toFiniteNumber(Re.headers.get("content-length")),[Be,Ke]=Y&&Vi(We,Ss(Ki(Y),!0))||[];Re=new a(Hi(Re.body,Ji,Be,()=>{Ke&&Ke(),ke&&ke()}),Ve)}Z=Z||"text";let Je=await v[R.findKey(v,Z)||"text"](Re,E);return!$&&ke&&ke(),await new Promise((Ve,We)=>{Fa(Ve,We,{data:Je,headers:dt.from(Re.headers),status:Re.status,statusText:Re.statusText,config:E,request:ee})})}catch(ge){throw ke&&ke(),ge&&ge.name==="TypeError"&&/Load failed|fetch/i.test(ge.message)?Object.assign(new ce("Network Error",ce.ERR_NETWORK,E,ee),{cause:ge.cause||ge}):ce.from(ge,ge&&ge.code,E,ee)}}},Jf=new Map,Ba=t=>{let e=t&&t.env||{};const{fetch:r,Request:a,Response:o}=e,i=[a,o,r];let l=i.length,f=l,d,p,m=Jf;for(;f--;)d=i[f],p=m.get(d),p===void 0&&m.set(d,p=f?new Map:Hf(e)),m=p;return p};Ba();const Fo={http:df,xhr:Uf,fetch:{get:Ba}};R.forEach(Fo,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Yi=t=>`- ${t}`,Wf=t=>R.isFunction(t)||t===null||t===!1;function Qf(t,e){t=R.isArray(t)?t:[t];const{length:r}=t;let a,o;const i={};for(let l=0;l<r;l++){a=t[l];let f;if(o=a,!Wf(a)&&(o=Fo[(f=String(a)).toLowerCase()],o===void 0))throw new ce(`Unknown adapter '${f}'`);if(o&&(R.isFunction(o)||(o=o.get(e))))break;i[f||"#"+l]=o}if(!o){const l=Object.entries(i).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let f=r?l.length>1?`since :
`+l.map(Yi).join(`
`):" "+Yi(l[0]):"as no adapter specified";throw new ce("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return o}const Ga={getAdapter:Qf,adapters:Fo};function Eo(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Nn(null,t)}function Zi(t){return Eo(t),t.headers=dt.from(t.headers),t.data=ko.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ga.getAdapter(t.adapter||es.adapter,t)(t).then(function(a){return Eo(t),a.data=ko.call(t,t.transformResponse,a),a.headers=dt.from(a.headers),a},function(a){return Ma(a)||(Eo(t),a&&a.response&&(a.response.data=ko.call(t,t.transformResponse,a.response),a.response.headers=dt.from(a.response.headers))),Promise.reject(a)})}const Va="1.13.2",$s={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{$s[t]=function(a){return typeof a===t||"a"+(e<1?"n ":" ")+t}});const ea={};$s.transitional=function(e,r,a){function o(i,l){return"[Axios v"+Va+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,f)=>{if(e===!1)throw new ce(o(l," has been removed"+(r?" in "+r:"")),ce.ERR_DEPRECATED);return r&&!ea[l]&&(ea[l]=!0,console.warn(o(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,l,f):!0}};$s.spelling=function(e){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function Xf(t,e,r){if(typeof t!="object")throw new ce("options must be an object",ce.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const i=a[o],l=e[i];if(l){const f=t[i],d=f===void 0||l(f,i,t);if(d!==!0)throw new ce("option "+i+" must be "+d,ce.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ce("Unknown option "+i,ce.ERR_BAD_OPTION)}}const xs={assertOptions:Xf,validators:$s},Nt=xs.validators;let un=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Bi,response:new Bi}}async request(e,r){try{return await this._request(e,r)}catch(a){if(a instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const i=o.stack?o.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch{}}throw a}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=dn(this.defaults,r);const{transitional:a,paramsSerializer:o,headers:i}=r;a!==void 0&&xs.assertOptions(a,{silentJSONParsing:Nt.transitional(Nt.boolean),forcedJSONParsing:Nt.transitional(Nt.boolean),clarifyTimeoutError:Nt.transitional(Nt.boolean)},!1),o!=null&&(R.isFunction(o)?r.paramsSerializer={serialize:o}:xs.assertOptions(o,{encode:Nt.function,serialize:Nt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),xs.assertOptions(r,{baseUrl:Nt.spelling("baseURL"),withXsrfToken:Nt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&R.merge(i.common,i[r.method]);i&&R.forEach(["delete","get","head","post","put","patch","common"],E=>{delete i[E]}),r.headers=dt.concat(l,i);const f=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(r)===!1||(d=d&&T.synchronous,f.unshift(T.fulfilled,T.rejected))});const p=[];this.interceptors.response.forEach(function(T){p.push(T.fulfilled,T.rejected)});let m,v=0,g;if(!d){const E=[Zi.bind(this),void 0];for(E.unshift(...f),E.push(...p),g=E.length,m=Promise.resolve(r);v<g;)m=m.then(E[v++],E[v++]);return m}g=f.length;let k=r;for(;v<g;){const E=f[v++],T=f[v++];try{k=E(k)}catch(A){T.call(this,A);break}}try{m=Zi.call(this,k)}catch(E){return Promise.reject(E)}for(v=0,g=p.length;v<g;)m=m.then(p[v++],p[v++]);return m}getUri(e){e=dn(this.defaults,e);const r=ja(e.baseURL,e.url,e.allowAbsoluteUrls);return Pa(r,e.params,e.paramsSerializer)}};R.forEach(["delete","get","head","options"],function(e){un.prototype[e]=function(r,a){return this.request(dn(a||{},{method:e,url:r,data:(a||{}).data}))}});R.forEach(["post","put","patch"],function(e){function r(a){return function(i,l,f){return this.request(dn(f||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}un.prototype[e]=r(),un.prototype[e+"Form"]=r(!0)});let Yf=class Ka{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(o=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](o);a._listeners=null}),this.promise.then=o=>{let i;const l=new Promise(f=>{a.subscribe(f),i=f}).then(o);return l.cancel=function(){a.unsubscribe(i)},l},e(function(i,l,f){a.reason||(a.reason=new Nn(i,l,f),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=a=>{e.abort(a)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Ka(function(o){e=o}),cancel:e}}};function Zf(t){return function(r){return t.apply(null,r)}}function ep(t){return R.isObject(t)&&t.isAxiosError===!0}const Oo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Oo).forEach(([t,e])=>{Oo[e]=t});function za(t){const e=new un(t),r=Ea(un.prototype.request,e);return R.extend(r,un.prototype,e,{allOwnKeys:!0}),R.extend(r,e,null,{allOwnKeys:!0}),r.create=function(o){return za(dn(t,o))},r}const Ue=za(es);Ue.Axios=un;Ue.CanceledError=Nn;Ue.CancelToken=Yf;Ue.isCancel=Ma;Ue.VERSION=Va;Ue.toFormData=Ds;Ue.AxiosError=ce;Ue.Cancel=Ue.CanceledError;Ue.all=function(e){return Promise.all(e)};Ue.spread=Zf;Ue.isAxiosError=ep;Ue.mergeConfig=dn;Ue.AxiosHeaders=dt;Ue.formToJSON=t=>Na(R.isHTMLForm(t)?new FormData(t):t);Ue.getAdapter=Ga.getAdapter;Ue.HttpStatusCode=Oo;Ue.default=Ue;const{Axios:n1,AxiosError:s1,CanceledError:o1,isCancel:r1,CancelToken:i1,VERSION:a1,all:l1,Cancel:c1,isAxiosError:u1,spread:d1,toFormData:h1,AxiosHeaders:f1,HttpStatusCode:p1,formToJSON:m1,getAdapter:g1,mergeConfig:_1}=Ue,St=Ue.create({timeout:1e12,withCredentials:!0});St.interceptors.response.use(t=>t.data,t=>Promise.reject(t));St.interceptors.request.use(t=>{const e=document.cookie.match(/csrftoken=([^;]+)/)?.[1];return e&&(t.headers["X-CSRFToken"]=e),t},t=>Promise.reject(t));const Ze=[];for(let t=0;t<256;++t)Ze.push((t+256).toString(16).slice(1));function tp(t,e=0){return(Ze[t[e+0]]+Ze[t[e+1]]+Ze[t[e+2]]+Ze[t[e+3]]+"-"+Ze[t[e+4]]+Ze[t[e+5]]+"-"+Ze[t[e+6]]+Ze[t[e+7]]+"-"+Ze[t[e+8]]+Ze[t[e+9]]+"-"+Ze[t[e+10]]+Ze[t[e+11]]+Ze[t[e+12]]+Ze[t[e+13]]+Ze[t[e+14]]+Ze[t[e+15]]).toLowerCase()}let xo;const np=new Uint8Array(16);function sp(){if(!xo){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");xo=crypto.getRandomValues.bind(crypto)}return xo(np)}const op=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ta={randomUUID:op};function rp(t,e,r){t=t||{};const a=t.random??t.rng?.()??sp();if(a.length<16)throw new Error("Random bytes length must be >= 16");if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[r+o]=a[o];return e}return tp(a)}function jo(t,e,r){return ta.randomUUID&&!e&&!t?ta.randomUUID():rp(t,e,r)}const ip={name:"IdSearchView",inject:["showLoading","hideLoading"],data(){return{geneIds:"",fileName:"",errorMessage:"",upstreamLength:2e3,downstreamLength:2e3}},methods:{loadExample(){this.geneIds=`Ghir_A01G000040.1
Ghir_A01G000060
Ghir_A01G000290.1
Ghir_A01G000120.2`,this.errorMessage=""},reset(){this.geneIds="",this.fileName="",this.errorMessage="";const t=document.getElementById("fileInput");t&&(t.value="")},handleFileSelect(t){const e=t.target.files[0];if(e){const r=new FileReader;r.onload=a=>{try{const o=a.target.result;this.geneIds=o.trim(),this.fileName=e.name,console.log("已从文件中读取基因ID:",this.geneIds)}catch(o){this.errorMessage="文件读取失败: "+o.message,console.error("文件读取错误:",o)}},r.onerror=()=>{this.errorMessage="文件读取错误",console.error("文件读取器错误")},r.readAsText(e)}else this.geneIds="",this.fileName="";t.target.value=""},async handleSubmit(){this.errorMessage="",this.showLoading();try{if(!this.geneIds||!this.geneIds.trim())throw new Error("请输入或上传基因ID");const t=jo();console.log("Request ID:",t);const e=`gene_ids=${encodeURIComponent(this.geneIds)}&request_id=${encodeURIComponent(t)}`;console.log("formDataString:",e);const r=await St.post("/tools/id-search/api/id-search-form/",e,{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Request-ID":t}});if(!r)throw new Error("无效的响应数据");const a=r;if(a.status!=="success")throw new Error(a.error||"搜索失败");if(!a.query_ids||!Array.isArray(a.query_ids))throw new Error("无效的查询ID数据");if(a.query_ids.length===1)this.$router.push({path:"/tools/id-search/results/",query:{id:a.query_ids[0],request_id:t}});else if(a.query_ids.length>1)this.$router.push({path:"/tools/id-search/id-search-summary/",query:{id:a.query_ids.join(","),request_id:t}});else throw new Error("没有找到匹配的基因ID")}catch(t){console.error("搜索错误详情:",t),console.error("错误类型:",typeof t),console.error("错误堆栈:",t.stack),console.error("错误响应:",t.response),this.errorMessage=t.response?.data?.error||t.message||"未知搜索错误",console.error("搜索错误:",this.errorMessage)}finally{this.hideLoading()}}}},ap={class:"container mt-4"},lp={class:"text-left"},cp={class:"card-body"},up={class:"form-group"},dp={class:"mb-4"},hp={class:"mb-4"},fp={class:"input-group"},pp={class:"input-group-text"},mp={key:0,class:"alert alert-danger mt-3"};function gp(t,e,r,a,o,i){return _(),b("div",ap,[e[10]||(e[10]=s("h1",null,"Search by ID",-1)),s("div",lp,[s("div",cp,[s("form",{onSubmit:e[4]||(e[4]=pe((...l)=>i.handleSubmit&&i.handleSubmit(...l),["prevent"]))},[s("div",up,[s("div",dp,[e[5]||(e[5]=s("label",{for:"geneIdInput",class:"form-label"},"Input Gene IDs",-1)),we(s("textarea",{class:"form-control",id:"geneIdInput",rows:"6",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=l=>o.geneIds=l),ref:"gene_ids"},null,512),[[Ye,o.geneIds]]),s("button",{type:"button",class:"btn btn-info mt-2 mr-3",onClick:e[1]||(e[1]=(...l)=>i.loadExample&&i.loadExample(...l))},"load example"),s("button",{type:"button",class:"btn btn-secondary mt-2",onClick:e[2]||(e[2]=(...l)=>i.reset&&i.reset(...l))},"Reset"),e[6]||(e[6]=s("p",{class:"text-muted mt-1"},"one gene ID per line",-1))]),s("div",hp,[e[7]||(e[7]=s("label",{class:"form-label"},"select file",-1)),s("div",fp,[s("input",{type:"file",class:"form-control",id:"fileInput",accept:".txt,.csv,.xls,.xlsx",onChange:e[3]||(e[3]=(...l)=>i.handleFileSelect&&i.handleFileSelect(...l))},null,32),s("span",pp,S(o.fileName||"未选择文件"),1)]),e[8]||(e[8]=s("p",{class:"text-muted mt-1"},"support .txt or .csv file",-1))]),e[9]||(e[9]=s("div",{class:"d-flex gap-2"},[s("button",{type:"submit",class:"btn btn-primary"}," Search ")],-1))])],32),o.errorMessage?(_(),b("div",mp,S(o.errorMessage),1)):K("",!0)])])])}const _p=Pe(ip,[["render",gp]]),vp={name:"SequenceDisplay",props:{displayMode:{type:String,default:"buttons",validator:t=>["buttons","full"].includes(t)},gene_seq:String,mrna_seq:String,upstream_seq:String,downstream_seq:String,cdna_seq:String,cds_seq:String,protein_seq:String,gene_id:String,currentTranscript:{type:Object,default:null},results:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},upstreamLength:{type:Number,default:1e4},downstreamLength:{type:Number,default:1e4}},emits:["show-sequence","download-all","copy-all"],data(){return{sequenceTypes:[{key:"genomic",title:"基因组序列"},{key:"mrna",title:"mRNA序列"},{key:"upstream",title:"上游序列"},{key:"downstream",title:"下游序列"},{key:"cdna",title:"cDNA序列"},{key:"cds",title:"CDS序列"},{key:"protein",title:"蛋白序列"}],showSequences:!1,selectedUpstreamLength:this.upstreamLength,selectedDownstreamLength:this.downstreamLength,lengthOptions:[500,1e3,2e3,3e3,4e3,5e3,1e4]}},methods:{toggleSequenceDisplay(){this.showSequences=!this.showSequences},hasSequences(t){console.log(`检查序列类型: ${t}`),console.log("直接序列属性:",{upstream_seq:this.upstream_seq,downstream_seq:this.downstream_seq,cdna_seq:this.cdna_seq}),console.log("currentTranscript:",this.currentTranscript),console.log("results:",this.results);let e=!1;t==="genomic"?e=this.gene_seq&&this.gene_seq!==""&&this.gene_seq!=="N/A":t==="mrna"?e=this.mrna_seq&&this.mrna_seq!==""&&this.mrna_seq!=="N/A":t==="upstream"?e=this.upstream_seq&&this.upstream_seq!==""&&this.upstream_seq!=="N/A":t==="downstream"?e=this.downstream_seq&&this.downstream_seq!==""&&this.downstream_seq!=="N/A":t==="cdna"?e=this.cdna_seq&&this.cdna_seq!==""&&this.cdna_seq!=="N/A"&&this.cdna_seq!=="unavailable":t==="cds"?e=this.cds_seq&&this.cds_seq!=="N/A"&&this.cds_seq!=="未找到CDS序列":t==="protein"&&(e=this.protein_seq&&this.protein_seq!=="N/A"&&this.protein_seq!=="未找到蛋白序列");let r=!1;this.currentTranscript&&(t==="mrna"?r=this.currentTranscript.mrna_seq&&this.currentTranscript.mrna_seq!=="N/A":t==="upstream"?r=this.currentTranscript.upstream_seq&&this.currentTranscript.upstream_seq!=="N/A":t==="downstream"?r=this.currentTranscript.downstream_seq&&this.currentTranscript.downstream_seq!=="N/A":t==="cdna"?r=this.currentTranscript.cdna_seq&&this.currentTranscript.cdna_seq!=="N/A"&&this.currentTranscript.cdna_seq!=="unavailable":t==="cds"?r=this.currentTranscript.cds_seq&&this.currentTranscript.cds_seq!=="N/A"&&this.currentTranscript.cds_seq!=="未找到CDS序列":t==="protein"&&(r=this.currentTranscript.protein_seq&&this.currentTranscript.protein_seq!=="N/A"&&this.currentTranscript.protein_seq!=="未找到蛋白序列"));let a=!1;return this.results&&this.results.length>0&&(a=this.results.some(o=>{let i=!1;return t==="genomic"?i=o.gene_seq&&o.gene_seq!==""&&o.gene_seq!=="N/A":t==="mrna"?i=o.mrna_seq&&o.mrna_seq!==""&&o.mrna_seq!=="N/A":t==="upstream"?i=o.upstream_seq&&o.upstream_seq!==""&&o.upstream_seq!=="N/A":t==="downstream"?i=o.downstream_seq&&o.downstream_seq!==""&&o.downstream_seq!=="N/A":t==="cdna"?i=o.cdna_seq&&o.cdna_seq!==""&&o.cdna_seq!=="N/A"&&o.cdna_seq!=="unavailable":t==="cds"?i=o.cds_seq&&o.cds_seq!=="N/A"&&o.cds_seq!=="未找到CDS序列":t==="protein"&&(i=o.protein_seq&&o.protein_seq!=="N/A"&&o.protein_seq!=="未找到蛋白序列"),!i&&o.mrna_transcripts&&o.mrna_transcripts.length>0&&(t==="mrna"?i=o.mrna_transcripts.some(l=>l.mrna_seq&&l.mrna_seq!=="N/A"):t==="upstream"?i=o.mrna_transcripts.some(l=>l.upstream_seq&&l.upstream_seq!=="N/A"):t==="downstream"?i=o.mrna_transcripts.some(l=>l.downstream_seq&&l.downstream_seq!=="N/A"):t==="cdna"?i=o.mrna_transcripts.some(l=>l.cdna_seq&&l.cdna_seq!=="N/A"&&l.cdna_seq!=="unavailable"):t==="cds"?i=o.mrna_transcripts.some(l=>l.cds_seq&&l.cds_seq!=="N/A"&&l.cds_seq!=="未找到CDS序列"):t==="protein"&&(i=o.mrna_transcripts.some(l=>l.protein_seq&&l.protein_seq!=="N/A"&&l.protein_seq!=="未找到蛋白序列"))),i})),e||r||a},getSequence(t){if(this.currentTranscript){if(t==="mrna")return this.currentTranscript.mrna_seq;if(t==="upstream")return this.currentTranscript.upstream_seq?this.currentTranscript.upstream_seq.slice(0,this.selectedUpstreamLength):"";if(t==="downstream")return this.currentTranscript.downstream_seq?this.currentTranscript.downstream_seq.slice(0,this.selectedDownstreamLength):"";if(t==="cdna")return this.currentTranscript.cdna_seq;if(t==="cds")return this.currentTranscript.cds_seq;if(t==="protein")return this.currentTranscript.protein_seq}if(t==="genomic")return this.gene_seq;if(t==="mrna")return this.mrna_seq;if(t==="upstream")return this.upstream_seq?this.upstream_seq.slice(0,this.selectedUpstreamLength):"";if(t==="downstream")return this.downstream_seq?this.downstream_seq.slice(0,this.selectedDownstreamLength):"";if(t==="cdna")return this.cdna_seq;if(t==="cds")return this.cds_seq;if(t==="protein")return this.protein_seq;if(this.results&&this.results.length>0){const e=this.results[0];if(t==="genomic")return e.gene_seq;if(t==="mrna")return e.mrna_seq;if(t==="upstream")return e.upstream_seq?e.upstream_seq.slice(0,this.selectedUpstreamLength):"";if(t==="downstream")return e.downstream_seq?e.downstream_seq.slice(0,this.selectedDownstreamLength):"";if(t==="cdna")return e.cdna_seq;if(t==="cds")return e.cds_seq;if(t==="protein")return e.protein_seq}return""},getGeneId(){return this.results&&this.results.length===1?this.results[0].IDs||"":this.currentTranscript?this.currentTranscript.id||"":this.gene_id||""},handleButtonClick(t,e,r,a){console.log("按钮点击事件触发:",{type:t,title:e,content:r,id:a}),console.log("this.$emit:",this.$emit);let o="";const i=this.getGeneId();if(!this.results||this.results.length===0){t==="genomic"&&this.gene_seq&&this.gene_seq!=="N/A"&&(o+=`>${i} ${t}
${this.gene_seq}

`);let l="",f="";if(this.currentTranscript?t==="mrna"?l=this.currentTranscript.mrna_seq:t==="upstream"?(l=this.currentTranscript.upstream_seq?this.currentTranscript.upstream_seq.slice(0,this.selectedUpstreamLength):"",f=` (${this.selectedUpstreamLength}bp)`):t==="downstream"?(l=this.currentTranscript.downstream_seq?this.currentTranscript.downstream_seq.slice(0,this.selectedDownstreamLength):"",f=` (${this.selectedDownstreamLength}bp)`):t==="cdna"?l=this.currentTranscript.cdna_seq:t==="cds"?l=this.currentTranscript.cds_seq:t==="protein"&&(l=this.currentTranscript.protein_seq):t==="mrna"?l=this.mrna_seq:t==="upstream"?(l=this.upstream_seq?this.upstream_seq.slice(0,this.selectedUpstreamLength):"",f=` (${this.selectedUpstreamLength}bp)`):t==="downstream"?(l=this.downstream_seq?this.downstream_seq.slice(0,this.selectedDownstreamLength):"",f=` (${this.selectedDownstreamLength}bp)`):t==="cdna"?l=this.cdna_seq:t==="cds"?l=this.cds_seq:t==="protein"&&(l=this.protein_seq),l&&l!=="N/A"&&l!==""&&l!=="unavailable"&&l!=="未找到CDS序列"&&l!=="未找到蛋白序列"){const d=this.currentTranscript?this.currentTranscript.id:"",p=d?` (${d})`:"";o+=`>${i} ${t}${f}${p}
${l}

`}}else this.results.forEach(l=>{const f=l.IDs||"";t==="genomic"&&l.gene_seq&&l.gene_seq!=="N/A"?o+=`>${f} ${t}
${l.gene_seq}

`:t==="mrna"?l.mrna_transcripts&&l.mrna_transcripts.length>0&&l.mrna_transcripts.forEach((d,p)=>{d.mrna_seq&&d.mrna_seq!=="N/A"&&(o+=`>${f} ${t} (转录本 ${p+1}: ${d.id})
${d.mrna_seq}

`)}):t==="upstream"?l.mrna_transcripts&&l.mrna_transcripts.length>0&&l.mrna_transcripts.forEach((d,p)=>{d.upstream_seq&&d.upstream_seq!=="N/A"&&(o+=`>${f} ${t} (转录本 ${p+1}: ${d.id}, ${this.selectedUpstreamLength}bp)
${d.upstream_seq.slice(0,this.selectedUpstreamLength)}

`)}):t==="downstream"?l.mrna_transcripts&&l.mrna_transcripts.length>0&&l.mrna_transcripts.forEach((d,p)=>{d.downstream_seq&&d.downstream_seq!=="N/A"&&(o+=`>${f} ${t} (转录本 ${p+1}: ${d.id}, ${this.selectedDownstreamLength}bp)
${d.downstream_seq.slice(0,this.selectedDownstreamLength)}

`)}):t==="cdna"?l.mrna_transcripts&&l.mrna_transcripts.length>0&&l.mrna_transcripts.forEach((d,p)=>{d.cdna_seq&&d.cdna_seq!=="N/A"&&d.cdna_seq!=="unavailable"&&(o+=`>${f} ${t} (转录本 ${p+1}: ${d.id})
${d.cdna_seq}

`)}):t==="cds"?l.mrna_transcripts&&l.mrna_transcripts.length>0&&l.mrna_transcripts.forEach((d,p)=>{d.cds_seq&&d.cds_seq!=="N/A"&&d.cds_seq!=="未找到CDS序列"&&(o+=`>${f} ${t} (转录本 ${p+1}: ${d.id})
${d.cds_seq}

`)}):t==="protein"&&l.mrna_transcripts&&l.mrna_transcripts.length>0&&l.mrna_transcripts.forEach((d,p)=>{d.protein_seq&&d.protein_seq!=="N/A"&&d.protein_seq!=="未找到蛋白序列"&&(o+=`>${f} ${t} (转录本 ${p+1}: ${d.id})
${d.protein_seq}

`)})});this.$emit("show-sequence",{type:t,title:e,content:o,id:this.results&&this.results.length>1?"multiple_genes":i}),console.log("事件已触发")}}},bp={class:"sequence-display-component"},yp={key:0,class:"d-flex flex-wrap gap-3 mb-4"},wp={class:"text-center flex-shrink-0"},kp={class:"text-center flex-shrink-0"},Ep={class:"text-center flex-shrink-0"},xp={class:"text-center flex-shrink-0"},Cp={class:"text-center flex-shrink-0"},Sp={class:"text-center flex-shrink-0"},Ap={class:"text-center flex-shrink-0"},Tp={key:1,class:"mb-4 d-flex justify-content-start"},qp={class:"d-flex gap-3 align-items-end w-25"},Rp={class:"flex-shrink-0 flex-grow-1"},Ip=["value"],Op={class:"flex-shrink-0 flex-grow-1"},Dp=["value"],$p={key:2},Pp={key:0,class:"mt-6"},Lp={class:"d-flex justify-content-between align-items-center mb-3"},Np=["onClick"],Mp=["onClick"],Fp={class:"bg-light p-4 rounded overflow-y-auto",style:{"max-height":"300px","white-space":"pre-wrap","font-family":"monospace","text-align":"left"}},jp={key:0};function Up(t,e,r,a,o,i){return _(),b("div",bp,[r.displayMode==="buttons"||r.displayMode==="full"?(_(),b("div",yp,[s("div",wp,[e[9]||(e[9]=s("h4",{class:"h6 mb-2"},"Genomic",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[0]||(e[0]=l=>i.handleButtonClick("genomic","Genomic Sequence",i.getSequence("genomic"),i.getGeneId()))},S(i.hasSequences("genomic")?"Show Sequence":"No Data"),1)]),s("div",kp,[e[10]||(e[10]=s("h4",{class:"h6 mb-2"},"mRNA",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[1]||(e[1]=l=>i.handleButtonClick("mrna","mRNA Sequence",i.getSequence("mrna"),i.getGeneId()))},S(i.hasSequences("mrna")?"Show Sequence":"No Data"),1)]),s("div",Ep,[e[11]||(e[11]=s("h4",{class:"h6 mb-2"},"Upstream",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[2]||(e[2]=l=>i.handleButtonClick("upstream","Upstream Sequence",i.getSequence("upstream"),i.getGeneId()))},S(i.hasSequences("upstream")?"Show Sequence":"No Data"),1)]),s("div",xp,[e[12]||(e[12]=s("h4",{class:"h6 mb-2"},"Downstream",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[3]||(e[3]=l=>i.handleButtonClick("downstream","Downstream Sequence",i.getSequence("downstream"),i.getGeneId()))},S(i.hasSequences("downstream")?"Show Sequence":"No Data"),1)]),s("div",Cp,[e[13]||(e[13]=s("h4",{class:"h6 mb-2"},"cDNA",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[4]||(e[4]=l=>i.handleButtonClick("cdna","cDNA Sequence",i.getSequence("cdna"),i.getGeneId()))},S(i.hasSequences("cdna")?"Show Sequence":"No Data"),1)]),s("div",Sp,[e[14]||(e[14]=s("h4",{class:"h6 mb-2"},"CDS",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[5]||(e[5]=l=>i.handleButtonClick("cds","CDS Sequence",i.getSequence("cds"),i.getGeneId()))},S(i.hasSequences("cds")?"Show Sequence":"No Data"),1)]),s("div",Ap,[e[15]||(e[15]=s("h4",{class:"h6 mb-2"},"Protein",-1)),s("button",{class:"btn btn-sm btn-info",onClick:e[6]||(e[6]=l=>i.handleButtonClick("protein","Protein Sequence",i.getSequence("protein"),i.getGeneId()))},S(i.hasSequences("protein")?"Show Sequence":"No Data"),1)])])):K("",!0),r.displayMode==="buttons"||r.displayMode==="full"?(_(),b("div",Tp,[s("div",qp,[s("div",Rp,[e[16]||(e[16]=s("label",{for:"upstreamLengthSelect",class:"form-label form-label-sm text-center"},"Upstream",-1)),we(s("select",{class:"form-select form-select-sm",id:"upstreamLengthSelect","onUpdate:modelValue":e[7]||(e[7]=l=>o.selectedUpstreamLength=l)},[(_(!0),b(X,null,be(o.lengthOptions,l=>(_(),b("option",{key:l,value:l},S(l),9,Ip))),128))],512),[[_t,o.selectedUpstreamLength,void 0,{number:!0}]])]),s("div",Op,[e[17]||(e[17]=s("label",{for:"downstreamLengthSelect",class:"form-label form-label-sm text-center"},"Downstream",-1)),we(s("select",{class:"form-select form-select-sm",id:"downstreamLengthSelect","onUpdate:modelValue":e[8]||(e[8]=l=>o.selectedDownstreamLength=l)},[(_(!0),b(X,null,be(o.lengthOptions,l=>(_(),b("option",{key:l,value:l},S(l),9,Dp))),128))],512),[[_t,o.selectedDownstreamLength,void 0,{number:!0}]])])])])):K("",!0),r.displayMode==="full"?(_(),b("div",$p,[o.showSequences?(_(),b("div",Pp,[(_(!0),b(X,null,be(o.sequenceTypes,(l,f)=>(_(),b("div",{key:f,class:"mb-6"},[s("div",Lp,[s("h4",null,S(l.title),1),s("div",null,[s("button",{class:"btn btn-sm btn-primary me-2",onClick:d=>t.emit("download-all",l.key)},"下载全部",8,Np),s("button",{class:"btn btn-sm btn-secondary",onClick:d=>t.emit("copy-all",l.key)},"复制全部",8,Mp)])]),s("div",Fp,[(_(!0),b(X,null,be(r.results,(d,p)=>(_(),b(X,{key:`${l.key}-${p}`},[l.key==="genomic"&&d.gene_seq&&d.gene_seq!=="N/A"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" genomic ",1),e[18]||(e[18]=s("br",null,null,-1)),ne(S(d.gene_seq)+" ",1),e[19]||(e[19]=s("br",null,null,-1)),e[20]||(e[20]=s("br",null,null,-1))],64)):K("",!0),l.key==="mrna"?(_(),b(X,{key:1},[d.mrna_transcripts&&d.mrna_transcripts.length>0?(_(!0),b(X,{key:0},be(d.mrna_transcripts,(m,v)=>(_(),b(X,{key:`${d.IDs}-${v}`},[m.mrna_seq&&m.mrna_seq!=="N/A"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" mrna (转录本 "+S(v+1)+": "+S(m.id)+") ",1),e[21]||(e[21]=s("br",null,null,-1)),ne(S(m.mrna_seq)+" ",1),e[22]||(e[22]=s("br",null,null,-1)),e[23]||(e[23]=s("br",null,null,-1))],64)):K("",!0)],64))),128)):K("",!0)],64)):l.key==="upstream"?(_(),b(X,{key:2},[d.mrna_transcripts&&d.mrna_transcripts.length>0?(_(!0),b(X,{key:0},be(d.mrna_transcripts,(m,v)=>(_(),b(X,{key:`${d.IDs}-${v}`},[m.upstream_seq&&m.upstream_seq!=="N/A"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" upstream (转录本 "+S(v+1)+": "+S(m.id)+", "+S(o.selectedUpstreamLength)+"bp) ",1),e[24]||(e[24]=s("br",null,null,-1)),ne(S(m.upstream_seq.slice(0,o.selectedUpstreamLength))+" ",1),e[25]||(e[25]=s("br",null,null,-1)),e[26]||(e[26]=s("br",null,null,-1))],64)):K("",!0)],64))),128)):K("",!0)],64)):l.key==="downstream"?(_(),b(X,{key:3},[d.mrna_transcripts&&d.mrna_transcripts.length>0?(_(!0),b(X,{key:0},be(d.mrna_transcripts,(m,v)=>(_(),b(X,{key:`${d.IDs}-${v}`},[m.downstream_seq&&m.downstream_seq!=="N/A"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" downstream (转录本 "+S(v+1)+": "+S(m.id)+", "+S(o.selectedDownstreamLength)+"bp) ",1),e[27]||(e[27]=s("br",null,null,-1)),ne(S(m.downstream_seq.slice(0,o.selectedDownstreamLength))+" ",1),e[28]||(e[28]=s("br",null,null,-1)),e[29]||(e[29]=s("br",null,null,-1))],64)):K("",!0)],64))),128)):K("",!0)],64)):l.key==="cdna"?(_(),b(X,{key:4},[d.mrna_transcripts&&d.mrna_transcripts.length>0?(_(!0),b(X,{key:0},be(d.mrna_transcripts,(m,v)=>(_(),b(X,{key:`${d.IDs}-${v}`},[m.cdna_seq&&m.cdna_seq!=="N/A"&&m.cdna_seq!=="unavailable"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" cdna (转录本 "+S(v+1)+": "+S(m.id)+") ",1),e[30]||(e[30]=s("br",null,null,-1)),ne(S(m.cdna_seq)+" ",1),e[31]||(e[31]=s("br",null,null,-1)),e[32]||(e[32]=s("br",null,null,-1))],64)):K("",!0)],64))),128)):K("",!0)],64)):l.key==="cds"?(_(),b(X,{key:5},[d.mrna_transcripts&&d.mrna_transcripts.length>0?(_(!0),b(X,{key:0},be(d.mrna_transcripts,(m,v)=>(_(),b(X,{key:`${d.IDs}-${v}`},[m.cds_seq&&m.cds_seq!=="N/A"&&m.cds_seq!=="未找到CDS序列"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" cds (转录本 "+S(v+1)+": "+S(m.id)+") ",1),e[33]||(e[33]=s("br",null,null,-1)),ne(S(m.cds_seq)+" ",1),e[34]||(e[34]=s("br",null,null,-1)),e[35]||(e[35]=s("br",null,null,-1))],64)):K("",!0)],64))),128)):K("",!0)],64)):l.key==="protein"?(_(),b(X,{key:6},[d.mrna_transcripts&&d.mrna_transcripts.length>0?(_(!0),b(X,{key:0},be(d.mrna_transcripts,(m,v)=>(_(),b(X,{key:`${d.IDs}-${v}`},[m.protein_seq&&m.protein_seq!=="N/A"&&m.protein_seq!=="未找到蛋白序列"?(_(),b(X,{key:0},[ne(" >"+S(d.IDs||`基因 ${p+1}`)+" protein (转录本 "+S(v+1)+": "+S(m.id)+") ",1),e[36]||(e[36]=s("br",null,null,-1)),ne(S(m.protein_seq)+" ",1),e[37]||(e[37]=s("br",null,null,-1)),e[38]||(e[38]=s("br",null,null,-1))],64)):K("",!0)],64))),128)):K("",!0)],64)):K("",!0)],64))),128)),i.hasSequences(l.key)?K("",!0):(_(),b("em",jp,"该类型没有可用序列"))])]))),128))])):K("",!0)])):K("",!0)])}const Ps=Pe(vp,[["render",Up],["__scopeId","data-v-d4fc5603"]]),Bp={name:"IdSearchResultsView",components:{SequenceDisplay:Ps},data(){return{result:null,annotations:{},jbrowse_url:"",isLoading:!1,errorMessage:"",has_sequences:!1,selectedTranscriptIndex:0,gffData:[],hasGffData:!1,currentPage:1,pageSize:10,showModal:!1,modalTitle:"",modalContent:"",currentSeqType:"",currentGeneId:"",svgWidth:800}},computed:{parsedGoAnnotations(){const t=this.annotations.GO_annotation||[],e=[];return t.forEach(r=>{r.replace(/;;+\s*$/,"").split(";; ").forEach(i=>{const l=i.match(/^(\w+\s+\w+):\s*([^\(]+)\s*\((GO:\d+)\)$/);l&&e.push({type:l[1],term:l[2].trim(),id:l[3]})})}),e},currentTranscript(){return!this.result||!this.result.mrna_transcripts||this.result.mrna_transcripts.length===0?null:this.result.mrna_transcripts[this.selectedTranscriptIndex]},hasMultipleTranscripts(){return this.result&&this.result.mrna_transcripts&&this.result.mrna_transcripts.length>1},currentPageGffData(){const t=(this.currentPage-1)*this.pageSize,e=t+this.pageSize;return this.gffData.slice(t,e)},currentTranscriptGffData(){if(!this.gffData||this.gffData.length===0)return[];const t=this.currentTranscript?this.currentTranscript.id:this.result.IDs;return t?this.gffData.filter(e=>e.attributes?e.attributes.includes(t):!1).sort((e,r)=>(e.start||0)-(r.start||0)):[]},geneStart(){return!this.currentTranscriptGffData||this.currentTranscriptGffData.length===0?0:Math.min(...this.currentTranscriptGffData.map(t=>t.start||0))},geneEnd(){return!this.currentTranscriptGffData||this.currentTranscriptGffData.length===0?0:Math.max(...this.currentTranscriptGffData.map(t=>t.end||0))},geneLength(){return this.geneEnd-this.geneStart+1},scale(){return(this.svgWidth-40)/Math.max(this.geneLength,1)}},mounted(){const t=this.$route.query.id;t?this.fetchGeneData(t):this.errorMessage="未提供基因ID"},watch:{"$route.query.id":function(t){t&&this.fetchGeneData(t)}},methods:{handlePageChange(){},handlePageSizeChange(){this.currentPage=1},async fetchGeneData(t){const e=setTimeout(()=>{this.isLoading=!0},300);this.errorMessage="",this.selectedTranscriptIndex=0;try{const r=await St.get("/tools/id-search/api/id-search/",{params:{id:t,action:"results"}});if(clearTimeout(e),r.status==="error"||r.status==="not_found")throw new Error(r.error||"基因信息不存在");this.result=r.result,this.annotations=r.annotations||{},this.jbrowse_url=r.jbrowse_url||"",console.log("后端返回的result数据:",this.result),console.log("result"),console.log("result中的gene_seq:",this.result.gene_seq),console.log("result中的基因组"),console.log("result中的mrna_seq:",this.result.mrna_seq),console.log("result中的mRNA"),console.log("result中的cds_seq:",this.result.cds_seq),console.log("result中的cds"),console.log("result中的protein_seq:",this.result.protein_seq),console.log("result中的蛋白序列"),this.has_sequences=!!(this.result.gene_seq||this.result.mrna_seq||this.result.upstream_seq||this.result.downstream_seq||this.result.cdna_seq||this.result.cds_seq&&this.result.cds_seq!=="未找到CDS序列"||this.result.protein_seq&&this.result.protein_seq!=="未找到蛋白序列"||this.result.mrna_transcripts&&this.result.mrna_transcripts.length>0),console.log("has_sequences:",this.has_sequences),this.gffData=r.gff_data||[],this.hasGffData=this.gffData.length>0,this.currentPage=1}catch(r){clearTimeout(e),this.errorMessage=r.message,console.error("获取基因数据错误:",r)}finally{this.isLoading=!1}},switchTranscript(t){this.selectedTranscriptIndex=t},downloadCurrentTranscriptSequences(){if(!this.result||!this.currentTranscript){alert("无法获取基因序列数据");return}let t="";const e=this.currentGeneId||this.result.IDs,r=this.currentTranscript.id;if(this.result.gene_seq&&this.result.gene_seq!=="N/A"&&(t+=`>${e} genomic
${this.result.gene_seq}

`),this.currentTranscript.mrna_seq&&this.currentTranscript.mrna_seq!=="N/A"&&(t+=`>${r} mRNA
${this.currentTranscript.mrna_seq}

`),this.currentTranscript.upstream_seq&&this.currentTranscript.upstream_seq!=="N/A"&&(t+=`>${r} upstream
${this.currentTranscript.upstream_seq}

`),this.currentTranscript.downstream_seq&&this.currentTranscript.downstream_seq!=="N/A"&&(t+=`>${r} downstream
${this.currentTranscript.downstream_seq}

`),this.currentTranscript.cdna_seq&&this.currentTranscript.cdna_seq!=="N/A"&&this.currentTranscript.cdna_seq!=="unavailable"&&(t+=`>${r} cDNA
${this.currentTranscript.cdna_seq}

`),[{key:"cds_seq",type:"cds",label:"CDS Sequence"},{key:"protein_seq",type:"protein",label:"Protein Sequence"}].forEach(f=>{const d=this.currentTranscript[f.key];d&&d!=="N/A"&&d!=="unavailable"&&d!=="未找到CDS序列"&&d!=="未找到蛋白序列"&&(t+=`>${r} ${f.type}
${d}

`)}),!t){alert("没有找到可用的序列数据");return}const o=new Blob([t],{type:"text/plain"}),i=URL.createObjectURL(o),l=document.createElement("a");l.href=i,l.download=`${r}_all_sequences.fasta`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(i),this.showTemporaryMessage("当前转录本的所有序列已下载")},showSequenceModal(t,e,r,a){this.modalTitle=t,this.modalContent=e,this.currentSeqType=r,this.currentGeneId=a,this.showModal=!0},handleShowSequence({type:t,title:e,content:r,id:a}){this.showSequenceModal(e,r,t,a)},closeModal(){this.showModal=!1},copySequence(t){const r=`${`>${this.currentGeneId} ${this.currentSeqType}`}
${t}`;navigator.clipboard.writeText(r).then(()=>{this.showTemporaryMessage("序列已复制到剪贴板")}).catch(a=>{console.error("复制失败:",a),this.showTemporaryMessage("复制失败，请手动复制")})},showTemporaryMessage(t){const e=document.createElement("div");e.textContent=t,e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.padding="10px 20px",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.borderRadius="4px",e.style.zIndex="9999",e.style.fontSize="16px",document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0",e.style.transition="opacity 2s ease-out",setTimeout(()=>{document.body.removeChild(e)},1500)},1500)},downloadFasta(){const e=`${`>${this.currentGeneId} ${this.currentSeqType}`}
${this.modalContent}`,r=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`${this.currentGeneId}_${this.currentSeqType}.fasta`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},downloadAllSequences(){if(!this.result){alert("无法获取基因序列数据");return}let t="";const e=this.currentGeneId||this.result.IDs;if(this.result.gene_seq&&this.result.gene_seq!=="N/A"&&(t+=`>${e} genomic
${this.result.gene_seq}

`),this.hasMultipleTranscripts)this.result.mrna_transcripts.forEach(i=>{const l=i.id;i.mrna_seq&&i.mrna_seq!=="N/A"&&(t+=`>${l} mRNA
${i.mrna_seq}

`),i.upstream_seq&&i.upstream_seq!=="N/A"&&(t+=`>${l} upstream
${i.upstream_seq}

`),i.downstream_seq&&i.downstream_seq!=="N/A"&&(t+=`>${l} downstream
${i.downstream_seq}

`),i.cdna_seq&&i.cdna_seq!=="N/A"&&i.cdna_seq!=="unavailable"&&(t+=`>${l} cDNA
${i.cdna_seq}

`),i.cds_seq&&i.cds_seq!=="N/A"&&i.cds_seq!=="unavailable"&&i.cds_seq!=="未找到CDS序列"&&(t+=`>${l} cds
${i.cds_seq}

`),i.protein_seq&&i.protein_seq!=="N/A"&&i.protein_seq!=="unavailable"&&i.protein_seq!=="未找到蛋白序列"&&(t+=`>${l} protein
${i.protein_seq}

`)});else{const i=this.result.mrna_transcripts[0]||this.currentTranscript,l=i?.id||e;i?.mrna_seq&&i.mrna_seq!=="N/A"&&(t+=`>${l} mRNA
${i.mrna_seq}

`),i?.upstream_seq&&i.upstream_seq!=="N/A"&&(t+=`>${l} upstream
${i.upstream_seq}

`),i?.downstream_seq&&i.downstream_seq!=="N/A"&&(t+=`>${l} downstream
${i.downstream_seq}

`),i?.cdna_seq&&i.cdna_seq!=="N/A"&&i.cdna_seq!=="unavailable"&&(t+=`>${l} cDNA
${i.cdna_seq}

`),i?.cds_seq&&i.cds_seq!=="N/A"&&i.cds_seq!=="unavailable"&&i.cds_seq!=="未找到CDS序列"&&(t+=`>${l} cds
${i.cds_seq}

`),i?.protein_seq&&i.protein_seq!=="N/A"&&i.protein_seq!=="unavailable"&&i.protein_seq!=="未找到蛋白序列"&&(t+=`>${l} protein
${i.protein_seq}

`),this.result.cdna_seq&&this.result.cdna_seq!=="N/A"&&this.result.cdna_seq!=="unavailable"&&(!i||i.cdna_seq!==this.result.cdna_seq)&&(t+=`>${e} cDNA
${this.result.cdna_seq}

`)}if(!t){alert("没有找到可用的序列数据");return}const r=new Blob([t],{type:"text/plain"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`${e}_all_sequences.fasta`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),this.showTemporaryMessage("All sequences have been downloaded"),setTimeout(()=>{this.closeModal()},500)},downloadGff(t){const e=this.currentGeneId||this.result.IDs;if(t==="txt"){let r="";this.gffData.forEach(l=>{const f=[l.seqid||"",l.source||"",l.type||"",l.start||"",l.end||"",l.score||"",l.strand||"",l.phase||"",l.attributes||""];r+=f.join("	")+`
`});const a=new Blob([r],{type:"text/plain"}),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=`${e}_gff.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),this.showTemporaryMessage("GFF数据已下载为TXT格式")}else if(t==="gff"){let r="";this.gffData.forEach(l=>{const f=[l.seqid||"",l.source||".",l.type||".",l.start||".",l.end||".",l.score||".",l.strand||".",l.phase||".",l.attributes||"."];r+=f.join("	")+`
`});const a=new Blob([r],{type:"text/plain"}),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=`${e}_gff.gff`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o),this.showTemporaryMessage("GFF数据已下载为GFF格式")}},escapeCsvField(t){return typeof t!="string"&&(t=String(t)),t.includes(",")||t.includes('"')||t.includes(`
`)||t.includes("\r")?(t=t.replace(/"/g,'""'),`"${t}"`):t}}},Gp={class:"container mt-4"},Vp={key:0,class:"text-center py-5"},Kp={key:1,class:"alert alert-danger mt-3"},zp={key:2,class:"mt-4"},Hp={class:"card mb-4"},Jp={class:"card-body"},Wp={class:"table table-bordered"},Qp={class:"mb-4"},Xp={key:0,class:"mt-2"},Yp=["src"],Zp={key:1},em={key:0,class:"card mb-4"},tm={class:"card-body"},nm={key:0,class:"mb-4"},sm=["value"],om={key:1,class:"mb-4"},rm={class:"gene-structure-container"},im=["width"],am={x:"20",y:"20","font-size":"12","font-weight":"bold",fill:"#333"},lm={key:0},cm=["x","width"],um=["x","width"],dm=["x","width"],hm=["x1","x2"],fm=["x","width"],pm={key:0},mm=["points"],gm=["x"],_m={x:"20",y:"110","font-size":"10",fill:"#666"},vm=["x"],bm={class:"mb-3"},ym={key:1,class:"card mb-4"},wm={class:"card-body"},km={key:0,class:"mb-3"},Em={class:"table table-bordered"},xm={key:1,class:"mb-3"},Cm={class:"list-group"},Sm={key:2,class:"mb-3"},Am={class:"list-group"},Tm={key:3,class:"mb-3"},qm={class:"list-group"},Rm={key:4,class:"mb-3"},Im={class:"list-group"},Om={key:5,class:"mb-3"},Dm={class:"list-group"},$m={key:2,class:"card mb-4"},Pm={class:"card-header d-flex justify-content-between align-items-center"},Lm={class:"card-body"},Nm={class:"d-flex justify-content-between align-items-center mb-3"},Mm={class:"table-pagination"},Fm={class:"d-flex justify-content-between align-items-center mt-3"},jm={class:"table-info"},Um={class:"mt-4"},Bm={class:"modal-dialog",style:{"max-width":"50vw","max-height":"50vh",margin:"0",width:"auto"}},Gm={class:"modal-content",style:{height:"100%",display:"flex","flex-direction":"column"}},Vm={class:"modal-header"},Km={class:"modal-title"},zm={class:"modal-body",style:{flex:"1","overflow-y":"auto"}},Hm={class:"bg-light p-3 rounded",style:{"max-height":"calc(40vh - 100px)","overflow-y":"auto","white-space":"pre-wrap","word-break":"break-all"}},Jm={class:"modal-footer"};function Wm(t,e,r,a,o,i){const l=gt("router-link"),f=Ps,d=ra,p=aa,m=la,v=ia;return _(),b("div",Gp,[e[38]||(e[38]=s("h1",null,"Search Results",-1)),o.isLoading?(_(),b("div",Vp,[...e[15]||(e[15]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"loading...")],-1),s("p",{class:"mt-3"},"loading results...",-1)])])):o.errorMessage?(_(),b("div",Kp,[ne(S(o.errorMessage)+" ",1),Q(l,{to:"/tools/id-search",class:"btn btn-primary btn-sm ml-2"},{default:_e(()=>[...e[16]||(e[16]=[ne("new search",-1)])]),_:1})])):o.result?(_(),b("div",zp,[s("div",Hp,[e[22]||(e[22]=s("div",{class:"card-header"},[s("h2",null,"Gene Basic Information")],-1)),s("div",Jp,[s("table",Wp,[s("tbody",null,[s("tr",null,[e[17]||(e[17]=s("td",null,[s("strong",null,"Gene ID:")],-1)),s("td",null,S(o.result.IDs),1)]),s("tr",null,[e[18]||(e[18]=s("td",null,[s("strong",null,"Chromosome:")],-1)),s("td",null,S(o.result.seqid),1)]),s("tr",null,[e[19]||(e[19]=s("td",null,[s("strong",null,"Start Position:")],-1)),s("td",null,S(o.result.start),1)]),s("tr",null,[e[20]||(e[20]=s("td",null,[s("strong",null,"End Position:")],-1)),s("td",null,S(o.result.end),1)]),s("tr",null,[e[21]||(e[21]=s("td",null,[s("strong",null,"Strand:")],-1)),s("td",null,S(o.result.strand),1)])])])])]),s("div",Qp,[e[23]||(e[23]=s("strong",null,"JBrowse View:",-1)),o.jbrowse_url?(_(),b("div",Xp,[s("iframe",{src:o.jbrowse_url,style:{width:"100%",height:"400px",border:"1px solid #ddd","border-radius":"4px"}},null,8,Yp)])):(_(),b("div",Zp," JBrowse URL not available "))]),o.has_sequences?(_(),b("div",em,[e[27]||(e[27]=s("div",{class:"card-header"},[s("h2",null,"Sequence")],-1)),s("div",tm,[i.hasMultipleTranscripts?(_(),b("div",nm,[e[24]||(e[24]=s("h4",{class:"h6 mb-2"},"Transcript Selector",-1)),we(s("select",{class:"form-select w-auto","onUpdate:modelValue":e[0]||(e[0]=g=>o.selectedTranscriptIndex=g),onChange:e[1]||(e[1]=g=>i.switchTranscript(o.selectedTranscriptIndex))},[(_(!0),b(X,null,be(o.result.mrna_transcripts,(g,k)=>(_(),b("option",{key:k,value:k},S(g.id)+" (Protein Length: "+S(g.protein_seq&&g.protein_seq!=="N/A"&&g.protein_seq!=="unavailable"&&g.protein_seq!=="未找到蛋白序列"?g.protein_seq.length:"N/A")+" aa) ",9,sm))),128))],544),[[_t,o.selectedTranscriptIndex]])])):K("",!0),o.gffData.length>0?(_(),b("div",om,[e[26]||(e[26]=s("h4",{class:"h6 mb-2"},"Transcript Structure",-1)),s("div",rm,[(_(),b("svg",{width:o.svgWidth,height:"150",class:"gene-structure-svg"},[s("text",am,S(i.currentTranscript?i.currentTranscript.id:o.result.IDs),1),i.currentTranscriptGffData.length>0?(_(),b("g",lm,[(_(!0),b(X,null,be(i.currentTranscriptGffData,(g,k)=>(_(),b("g",{key:"structure-"+k},[i.geneLength>0?(_(),b(X,{key:0},[g.type==="CDS"?(_(),b("rect",{key:0,x:20+(g.start-i.geneStart)*i.scale,y:"35",width:(g.end-g.start+1)*i.scale,height:"50",fill:"#34A853",stroke:"#227A3D","stroke-width":"1"},null,8,cm)):g.type==="five_prime_UTR"?(_(),b("rect",{key:1,x:20+(g.start-i.geneStart)*i.scale,y:"45",width:(g.end-g.start+1)*i.scale,height:"30",fill:"#FBBC05",stroke:"#F29900","stroke-width":"1"},null,8,um)):g.type==="three_prime_UTR"?(_(),b("rect",{key:2,x:20+(g.start-i.geneStart)*i.scale,y:"45",width:(g.end-g.start+1)*i.scale,height:"30",fill:"#EA4335",stroke:"#C5221F","stroke-width":"1"},null,8,dm)):K("",!0),k<i.currentTranscriptGffData.length-1?(_(),b("line",{key:3,x1:20+(g.end-i.geneStart)*i.scale,y1:"60",x2:20+(i.currentTranscriptGffData[k+1].start-i.geneStart)*i.scale,y2:"60",stroke:"#333","stroke-width":"2"},null,8,hm)):K("",!0),k<i.currentTranscriptGffData.length-1?(_(),b("rect",{key:4,x:20+(g.end-i.geneStart)*i.scale,y:"55",width:(i.currentTranscriptGffData[k+1].start-g.end-1)*i.scale,height:"10",fill:"#E0E0E0",stroke:"#BDBDBD","stroke-width":"1"},null,8,fm)):K("",!0)],64)):K("",!0)]))),128)),i.currentTranscriptGffData.length>0?(_(),b("g",pm,[i.geneLength>0?(_(),b(X,{key:0},[s("polygon",{points:[20+(i.currentTranscriptGffData[i.currentTranscriptGffData.length-1].end-i.geneStart)*i.scale+10,50,20+(i.currentTranscriptGffData[i.currentTranscriptGffData.length-1].end-i.geneStart)*i.scale+20,60,20+(i.currentTranscriptGffData[i.currentTranscriptGffData.length-1].end-i.geneStart)*i.scale+10,70].join(","),fill:"#333"},null,8,mm),s("text",{x:20+(i.currentTranscriptGffData[i.currentTranscriptGffData.length-1].end-i.geneStart)*i.scale+25,y:"65","font-size":"12",fill:"#333"}," Transcription Direction ",8,gm)],64)):K("",!0)])):K("",!0)])):K("",!0),s("text",_m,S(i.geneStart),1),s("text",{x:o.svgWidth-20,y:"110","font-size":"10",fill:"#666","text-anchor":"end"},S(i.geneEnd),9,vm),e[25]||(e[25]=As('<g transform="translate(20, 130)" data-v-5562246f><text font-size="11" font-weight="bold" fill="#333" data-v-5562246f>Legend:</text><g transform="translate(50, 0)" data-v-5562246f><rect x="0" y="-8" width="15" height="15" fill="#34A853" stroke="#227A3D" stroke-width="1" data-v-5562246f></rect><text x="20" y="5" font-size="10" fill="#333" data-v-5562246f>CDS</text></g><g transform="translate(120, 0)" data-v-5562246f><rect x="0" y="-8" width="15" height="15" fill="#FBBC05" stroke="#F29900" stroke-width="1" data-v-5562246f></rect><text x="20" y="5" font-size="10" fill="#333" data-v-5562246f>5&#39; UTR</text></g><g transform="translate(190, 0)" data-v-5562246f><rect x="0" y="-8" width="15" height="15" fill="#EA4335" stroke="#C5221F" stroke-width="1" data-v-5562246f></rect><text x="20" y="5" font-size="10" fill="#333" data-v-5562246f>3&#39; UTR</text></g><g transform="translate(260, 0)" data-v-5562246f><rect x="0" y="-3" width="30" height="5" fill="#E0E0E0" stroke="#BDBDBD" stroke-width="1" data-v-5562246f></rect><text x="35" y="5" font-size="10" fill="#333" data-v-5562246f>Intron</text></g></g>',1))],8,im))])])):K("",!0),Q(f,{"display-mode":"buttons",gene_seq:o.result.gene_seq,mrna_seq:o.result.mrna_seq,upstream_seq:o.result.upstream_seq,downstream_seq:o.result.downstream_seq,cdna_seq:o.result.cdna_seq,cds_seq:o.result.cds_seq,protein_seq:o.result.protein_seq,gene_id:o.result.IDs,"current-transcript":i.currentTranscript,loading:o.isLoading,onShowSequence:i.handleShowSequence},null,8,["gene_seq","mrna_seq","upstream_seq","downstream_seq","cdna_seq","cds_seq","protein_seq","gene_id","current-transcript","loading","onShowSequence"]),s("div",bm,[s("button",{class:"btn btn-success mr-2",onClick:e[2]||(e[2]=(...g)=>i.downloadAllSequences&&i.downloadAllSequences(...g))},"Download All Sequences"),i.hasMultipleTranscripts?(_(),b("button",{key:0,class:"btn btn-primary",onClick:e[3]||(e[3]=(...g)=>i.downloadCurrentTranscriptSequences&&i.downloadCurrentTranscriptSequences(...g))},"Download Current Transcript Sequences")):K("",!0)])])])):K("",!0),o.annotations&&Object.keys(o.annotations).length>0?(_(),b("div",ym,[e[35]||(e[35]=s("div",{class:"card-header"},[s("h2",null,"Annotations")],-1)),s("div",wm,[o.annotations.GO_annotation&&o.annotations.GO_annotation.length>0?(_(),b("div",km,[e[29]||(e[29]=s("h4",null,"GO Annotations",-1)),s("table",Em,[e[28]||(e[28]=s("thead",{class:"thead-light"},[s("tr",null,[s("th",null,"GO Type"),s("th",null,"Term"),s("th",null,"GO ID")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(i.parsedGoAnnotations,(g,k)=>(_(),b("tr",{key:k},[s("td",null,S(g.type),1),s("td",null,S(g.term),1),s("td",null,S(g.id),1)]))),128))])])])):K("",!0),o.annotations.KEGG_annotation&&o.annotations.KEGG_annotation.length>0?(_(),b("div",xm,[e[30]||(e[30]=s("h4",null,"KEGG Annotations",-1)),s("ul",Cm,[(_(!0),b(X,null,be(o.annotations.KEGG_annotation,(g,k)=>(_(),b("li",{key:k,class:"list-group-item"},S(g),1))),128))])])):K("",!0),o.annotations.Pfam_annotation&&o.annotations.Pfam_annotation.length>0?(_(),b("div",Sm,[e[31]||(e[31]=s("h4",null,"PFAM Annotations",-1)),s("ul",Am,[(_(!0),b(X,null,be(o.annotations.Pfam_annotation,(g,k)=>(_(),b("li",{key:k,class:"list-group-item"},S(g),1))),128))])])):K("",!0),o.annotations.TrEMBL_annotation&&o.annotations.TrEMBL_annotation.length>0?(_(),b("div",Tm,[e[32]||(e[32]=s("h4",null,"TrEMBL Annotations",-1)),s("ul",qm,[(_(!0),b(X,null,be(o.annotations.TrEMBL_annotation,(g,k)=>(_(),b("li",{key:k,class:"list-group-item"},S(g),1))),128))])])):K("",!0),o.annotations.nr_annotation&&o.annotations.nr_annotation.length>0?(_(),b("div",Rm,[e[33]||(e[33]=s("h4",null,"nr Annotations",-1)),s("ul",Im,[(_(!0),b(X,null,be(o.annotations.nr_annotation,(g,k)=>(_(),b("li",{key:k,class:"list-group-item"},S(g),1))),128))])])):K("",!0),o.annotations.Swissprot_annotation&&o.annotations.Swissprot_annotation.length>0?(_(),b("div",Om,[e[34]||(e[34]=s("h4",null,"Swissprot Annotations",-1)),s("ul",Dm,[(_(!0),b(X,null,be(o.annotations.Swissprot_annotation,(g,k)=>(_(),b("li",{key:k,class:"list-group-item"},S(g),1))),128))])])):K("",!0)])])):K("",!0),o.hasGffData?(_(),b("div",$m,[s("div",Pm,[e[36]||(e[36]=s("h2",null,"GFF Data",-1)),s("div",null,[s("button",{class:"btn btn-sm btn-success mr-2",onClick:e[4]||(e[4]=g=>i.downloadGff("txt"))},"Download as TXT"),s("button",{class:"btn btn-sm btn-success",onClick:e[5]||(e[5]=g=>i.downloadGff("gff"))},"Download as GFF")])]),s("div",Lm,[s("div",Nm,[s("div",Mm,[Q(d,{"current-page":o.currentPage,"onUpdate:currentPage":e[6]||(e[6]=g=>o.currentPage=g),"page-size":o.pageSize,"onUpdate:pageSize":[e[7]||(e[7]=g=>o.pageSize=g),i.handlePageSizeChange],"page-sizes":[10,20,50,100],layout:"sizes",total:o.gffData.length,onCurrentChange:i.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange","onUpdate:pageSize"])])]),o.isLoading?(_(),Cs(p,{key:0,rows:10,animated:""})):(_(),Cs(v,{key:1,data:i.currentPageGffData,style:{width:"100%"},stripe:"",border:""},{default:_e(()=>[Q(m,{prop:"seqid",label:"Seqid","min-width":"100"}),Q(m,{prop:"source",label:"Source","min-width":"100"}),Q(m,{prop:"type",label:"Type","min-width":"100"}),Q(m,{prop:"start",label:"Start","min-width":"100"}),Q(m,{prop:"end",label:"End","min-width":"100"}),Q(m,{prop:"score",label:"Score","min-width":"100"}),Q(m,{prop:"strand",label:"Strand","min-width":"100"}),Q(m,{prop:"phase",label:"Phase","min-width":"100"}),Q(m,{prop:"attributes",label:"Attributes","min-width":"200"})]),_:1},8,["data"])),s("div",Fm,[s("span",jm," Showing "+S((o.currentPage-1)*o.pageSize+1)+" to "+S(Math.min(o.currentPage*o.pageSize,o.gffData.length))+" of "+S(o.gffData.length)+" entries ",1),Q(d,{"current-page":o.currentPage,"onUpdate:currentPage":e[8]||(e[8]=g=>o.currentPage=g),"page-size":o.pageSize,"onUpdate:pageSize":[e[9]||(e[9]=g=>o.pageSize=g),i.handlePageSizeChange],"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:o.gffData.length,onCurrentChange:i.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange","onUpdate:pageSize"])])])])):K("",!0),s("div",Um,[Q(l,{to:"/id-search",class:"btn btn-primary"},{default:_e(()=>[...e[37]||(e[37]=[ne("Return to Search",-1)])]),_:1})])])):K("",!0),o.showModal?(_(),b("div",{key:3,class:"modal",style:{display:"flex","justify-content":"center","align-items":"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.5)","z-index":"1050"},onClick:e[14]||(e[14]=pe((...g)=>i.closeModal&&i.closeModal(...g),["self"]))},[s("div",Bm,[s("div",Gm,[s("div",Vm,[s("h5",Km,S(o.modalTitle),1),s("button",{type:"button",class:"close",onClick:e[10]||(e[10]=(...g)=>i.closeModal&&i.closeModal(...g)),style:{background:"none",border:"none","font-size":"1.5rem",cursor:"pointer"}},"×")]),s("div",zm,[s("div",Hm,S(o.modalContent),1)]),s("div",Jm,[s("button",{class:"btn btn-primary mr-2",onClick:e[11]||(e[11]=g=>i.copySequence(o.modalContent))},"Copy Sequence"),s("button",{class:"btn btn-secondary mr-2",onClick:e[12]||(e[12]=(...g)=>i.downloadFasta&&i.downloadFasta(...g))},"Download FASTA"),s("button",{class:"btn btn-secondary",onClick:e[13]||(e[13]=(...g)=>i.closeModal&&i.closeModal(...g))},"Close")])])])])):K("",!0)])}const Qm=Pe(Bp,[["render",Wm],["__scopeId","data-v-5562246f"]]),Xm={name:"IdSearchSummaryView",components:{SequenceDisplay:Ps},data(){return{results:[],has_sequences:!1,loading:!1,error:null,showModal:!1,modalTitle:"",modalContent:"",currentSeqType:"",currentGeneId:""}},mounted(){console.log("页面已挂载，开始获取数据..."),console.log("当前URL参数:",new URLSearchParams(window.location.search).toString()),this.fetchSearchResults()},methods:{async fetchSearchResults(){this.loading=!0,this.error=null;try{const t=new URLSearchParams(window.location.search);console.log("解析的URL参数:",Object.fromEntries(t));let e=t.get("id")||t.get("ids")||t.get("query_ids");if(e&&e.startsWith("[")&&e.endsWith("]"))try{const l=JSON.parse(e);console.log("解析后的query_ids:",l),Array.isArray(l)&&l.length>0&&(e=l[0])}catch(l){console.error("Error parsing query_ids:",l),this.error="解析查询参数失败",this.loading=!1;return}if(console.log("提取的geneIds:",e),!e){this.error="URL中未找到基因ID参数",this.loading=!1;return}const r=e.split(",").join(`
`),a={gene_ids:r,request_id:jo()};console.log("构建的表单数据:",a);const o=`gene_ids=${encodeURIComponent(r)}&request_id=${encodeURIComponent(a.request_id)}`,i=await St.post("/tools/id-search/api/id-search-form/",o,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});if(console.log("API返回数据:",i),i&&i.status==="success")if(i.query_ids&&Array.isArray(i.query_ids)){const l=i.query_ids;console.log("获取到的基因ID列表:",l),await this.fetchGeneDetails(l)}else i.results&&Array.isArray(i.results)&&(this.results=i.results,this.has_sequences=i.has_sequences||!1,this.loading=!1);else this.error=i.error||"请求处理失败",this.loading=!1;console.log("更新后results数组长度:",this.results.length),console.log("更新后has_sequences:",this.has_sequences)}catch(t){console.error("获取数据失败:",t),this.error="获取数据失败: "+(t.message||"未知错误"),this.loading=!1,alert("获取数据失败: "+(t.message||"未知错误"))}},async fetchGeneDetails(t){try{console.log("开始获取基因详细信息");const e=new URLSearchParams;e.append("id",t.join(",")),e.append("action","summary");const r=await St.get(`/tools/id-search/api/id-search/?${e.toString()}`);console.log("获取基因详情API返回:",r),r&&r.status==="success"?(this.results=r.results||[],this.has_sequences=r.has_sequences||!1,console.log("更新后的基因详情数据:",this.results)):(this.results=t.map(a=>({IDs:a,original_id:a,species:"未知",gene_seq:"N/A",mrna_seq:"N/A",cds_seq:"N/A",protein_seq:"N/A",description:"未知"})),this.has_sequences=!1)}catch(e){console.error("获取基因详情失败:",e),this.results=t.map(r=>({IDs:r,original_id:r,species:"未知",gene_seq:"N/A",mrna_seq:"N/A",cds_seq:"N/A",protein_seq:"N/A",description:"未知"})),this.has_sequences=!1}finally{this.loading=!1}},downloadAllFasta(t){let e="";if(this.results.forEach(r=>{let a="",o=`>${r.IDs} ${t}`;switch(t){case"genomic":a=r.gene_seq||"";break;case"mrna":a=r.mrna_seq||"";break;case"cds":a=r.cds_seq||"";break;case"protein":a=r.protein_seq||"";break}a&&a!=="N/A"&&a!=="未找到CDS序列"&&a!=="未找到蛋白序列"&&(e+=`${o}
${a}

`)}),e){const r=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`all_${t}_sequences.fasta`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}},copyAllFasta(t){let e="";this.results.forEach(r=>{let a="",o=`>${r.IDs} ${t}`;switch(t){case"genomic":a=r.gene_seq||"";break;case"mrna":a=r.mrna_seq||"";break;case"cds":a=r.cds_seq||"";break;case"protein":a=r.protein_seq||"";break}a&&a!=="N/A"&&a!=="未找到CDS序列"&&a!=="未找到蛋白序列"&&(e+=`${o}
${a}

`)}),e&&navigator.clipboard.writeText(e).then(()=>{alert("序列已复制到剪贴板")}).catch(r=>{console.error("复制失败:",r)})},handleShowSequence({type:t,title:e,content:r,id:a}){this.modalTitle=e,this.modalContent=r,this.currentSeqType=t,this.currentGeneId=a,this.showModal=!0},closeModal(){this.showModal=!1},downloadAllSequences(){let t="";if(this.results.forEach(e=>{const r=e.IDs;e.gene_seq&&e.gene_seq!=="N/A"&&e.gene_seq!==""&&(t+=`>${r} genomic
${e.gene_seq}

`),e.mrna_seq&&e.mrna_seq!=="N/A"&&e.mrna_seq!==""&&(t+=`>${r} mrna
${e.mrna_seq}

`),e.cds_seq&&e.cds_seq!=="N/A"&&e.cds_seq!=="未找到CDS序列"&&(t+=`>${r} cds
${e.cds_seq}

`),e.protein_seq&&e.protein_seq!=="N/A"&&e.protein_seq!=="未找到蛋白序列"&&(t+=`>${r} protein
${e.protein_seq}

`)}),t){const e=new Blob([t],{type:"text/plain"}),r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download="all_sequences.fasta",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)}else alert("没有找到可用的序列数据")},copySequence(t){const r=`${`>${this.currentGeneId} ${this.currentSeqType}`}
${t}`;navigator.clipboard.writeText(r).then(()=>{this.showTemporaryMessage("序列已复制到剪贴板")}).catch(a=>{console.error("复制失败:",a),this.showTemporaryMessage("复制失败，请手动复制")})},downloadFasta(){const e=`${`>${this.currentGeneId} ${this.currentSeqType}`}
${this.modalContent}`,r=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`${this.currentGeneId}_${this.currentSeqType}.fasta`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)},showTemporaryMessage(t){const e=document.createElement("div");e.textContent=t,e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.padding="10px 20px",e.style.backgroundColor="rgba(0, 0, 0, 0.8)",e.style.color="white",e.style.borderRadius="4px",e.style.zIndex="9999",e.style.fontSize="16px",document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0",e.style.transition="opacity 0.5s ease-out",setTimeout(()=>{document.body.removeChild(e)},500)},1500)}}},Ym={class:"container mt-4"},Zm={class:"status-info bg-light p-3 rounded mb-4"},eg={key:0,class:"text-success"},tg={key:1,class:"text-muted"},ng={key:0,class:"text-center py-5"},sg={key:1,class:"alert alert-danger mt-4"},og={class:"table-responsive"},rg={class:"table table-bordered"},ig={class:"text-center align-middle",style:{width:"10%"}},ag={class:"text-center align-middle",style:{width:"10%"}},lg={class:"text-center align-middle",style:{width:"10%"}},cg={key:0,class:"mt-6"},ug={class:"mt-4 d-flex gap-2"},dg={key:1,class:"text-muted"},hg={key:3,class:"text-center py-5"},fg={class:"modal-dialog",style:{"max-width":"50vw","max-height":"50vh",margin:"0",width:"auto"}},pg={class:"modal-content",style:{height:"100%",display:"flex","flex-direction":"column"}},mg={class:"modal-header"},gg={class:"modal-title"},_g={class:"modal-body",style:{flex:"1","overflow-y":"auto"}},vg={class:"bg-light p-3 rounded",style:{"max-height":"calc(40vh - 100px)","overflow-y":"auto","white-space":"pre-wrap","font-family":"monospace"}},bg={class:"modal-footer"};function yg(t,e,r,a,o,i){const l=gt("router-link"),f=Ps;return _(),b("div",Ym,[s("div",Zm,[o.results.length>0?(_(),b("p",eg,"找到 "+S(o.results.length)+" 个基因序列",1)):!o.loading&&!o.error?(_(),b("p",tg,"暂无数据，请检查输入的基因ID")):K("",!0)]),e[11]||(e[11]=s("h1",null,"ID搜索结果汇总",-1)),o.loading?(_(),b("div",ng,[...e[6]||(e[6]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"visually-hidden"},"loading...")],-1),s("p",{class:"mt-3"},"正在加载数据，请稍候...",-1)])])):o.error?(_(),b("div",sg,[s("p",null,"错误: "+S(o.error),1),e[7]||(e[7]=s("p",null,"请检查URL参数格式或稍后重试",-1))])):o.results?(_(),b(X,{key:2},[s("div",og,[s("table",rg,[e[8]||(e[8]=s("thead",null,[s("tr",{class:"text-center"},[s("th",{style:{width:"10%"}},"Input ID"),s("th",{style:{width:"10%"}},"Query ID"),s("th",{style:{width:"10%"}},"Species")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(o.results,(d,p)=>(_(),b("tr",{key:`result-${p}`},[s("td",ig,S(d.original_id||"-"),1),s("td",ag,[Q(l,{to:{path:"/tools/id-search/results/",query:{id:d.IDs}}},{default:_e(()=>[ne(S(d.IDs||"-"),1)]),_:2},1032,["to"])]),s("td",lg,S(d.species||"-"),1)]))),128))])])]),o.results.length>0?(_(),b("div",cg,[e[9]||(e[9]=s("h4",null,"Gene Sequences",-1)),Q(f,{"display-mode":"full",results:o.results,loading:!1,onShowSequence:i.handleShowSequence,onDownloadAll:i.downloadAllFasta,onCopyAll:i.copyAllFasta},null,8,["results","onShowSequence","onDownloadAll","onCopyAll"]),s("div",ug,[s("button",{class:"btn btn-primary",onClick:e[0]||(e[0]=(...d)=>i.downloadAllSequences&&i.downloadAllSequences(...d))},"Download All Sequences")])])):(_(),b("p",dg,"No gene sequences available."))],64)):(_(),b("div",hg,[...e[10]||(e[10]=[s("p",{class:"text-muted"},"准备加载数据...",-1)])])),o.showModal?(_(),b("div",{key:4,class:"modal",style:{display:"flex","justify-content":"center","align-items":"center",position:"fixed",top:"0",left:"0",right:"0",bottom:"0","background-color":"rgba(0, 0, 0, 0.5)","z-index":"1050"},onClick:e[5]||(e[5]=pe((...d)=>i.closeModal&&i.closeModal(...d),["self"]))},[s("div",fg,[s("div",pg,[s("div",mg,[s("h5",gg,S(o.modalTitle),1),s("button",{type:"button",class:"close",onClick:e[1]||(e[1]=(...d)=>i.closeModal&&i.closeModal(...d)),style:{background:"none",border:"none","font-size":"1.5rem",cursor:"pointer"}},"×")]),s("div",_g,[s("div",vg,S(o.modalContent),1)]),s("div",bg,[s("button",{class:"btn btn-primary mr-2",onClick:e[2]||(e[2]=d=>i.copySequence(o.modalContent))},"Copy Sequence"),s("button",{class:"btn btn-secondary mr-2",onClick:e[3]||(e[3]=(...d)=>i.downloadFasta&&i.downloadFasta(...d))},"Download FASTA"),s("button",{class:"btn btn-secondary",onClick:e[4]||(e[4]=(...d)=>i.closeModal&&i.closeModal(...d))},"Close")])])])])):K("",!0)])}const wg=Pe(Xm,[["render",yg],["__scopeId","data-v-cead71c6"]]),kg={name:"JbrowseView",data(){return{genomes:[{id:1,name:"陆地棉基因组 (Ghirsutum)",description:"陆地棉（Gossypium hirsutum）基因组序列，版本为HAU v1.0",assembly:"Ghirsutum_genome_HAU_v1.0",track:"TM-1.gff"}],currentIframeUrl:"/assets/jbrowse/index.html?assembly=Ghirsutum_genome_HAU_v1.0&tracks=TM-1.gff&loc=Ghir_A01:1-1000000",iframeKey:0}},mounted(){this.refreshIframe()},watch:{$route(){this.refreshIframe()}},methods:{openGenome(t){this.currentIframeUrl=`/assets/jbrowse/index.html?assembly=${t.assembly}&tracks=${t.track}&loc=Ghir_A01:1-1000000`,this.refreshIframe()},refreshIframe(){this.iframeKey++}}},Eg={class:"container mt-4"},xg={class:"card"},Cg={class:"card-body"},Sg={class:"table table-bordered table-hover"},Ag=["href"],Tg=["onClick"],qg={class:"embed-container"},Rg=["src"];function Ig(t,e,r,a,o,i){return _(),b("div",Eg,[e[3]||(e[3]=s("h1",null,"JBrowse 可视化",-1)),s("div",xg,[s("div",Cg,[e[1]||(e[1]=s("h2",{class:"card-title mb-4"},"选择基因组",-1)),s("table",Sg,[e[0]||(e[0]=s("thead",{class:"thead-light"},[s("tr",null,[s("th",null,"基因组名称"),s("th",null,"描述"),s("th",null,"操作")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(o.genomes,l=>(_(),b("tr",{key:l.id},[s("td",null,S(l.name),1),s("td",null,S(l.description),1),s("td",null,[s("a",{href:`/assets/jbrowse/index.html?config=config.json&assembly=${l.assembly}&tracks=${l.track}&loc=Ghir_A01:1-1000000`,target:"_blank",class:"btn btn-primary mr-2"}," 新窗口打开 ",8,Ag),s("button",{onClick:f=>i.openGenome(l),class:"btn btn-secondary"}," 嵌入查看 ",8,Tg)])]))),128))])]),e[2]||(e[2]=s("h2",{class:"card-title mt-5 mb-4"},"JBrowse 可视化",-1)),s("div",qg,[(_(),b("iframe",{key:o.iframeKey,src:o.currentIframeUrl,width:"100%",height:"600px",frameborder:"0"},null,8,Rg))])])])])}const Og=Pe(kg,[["render",Ig],["__scopeId","data-v-91513485"]]),Dg={name:"DownloadView"},$g={class:"container mt-4"};function Pg(t,e,r,a,o,i){return _(),b("div",$g,[...e[0]||(e[0]=[s("h1",null,"下载数据",-1),s("p",null,"此页面正在开发中...",-1)])])}const Lg=Pe(Dg,[["render",Pg]]),Ng={name:"Contact_usView"},Mg={class:"container mt-4"};function Fg(t,e,r,a,o,i){return _(),b("div",Mg,[...e[0]||(e[0]=[s("h1",null,"联系我们",-1),s("p",null,"此页面正在开发中...",-1)])])}const jg=Pe(Ng,[["render",Fg]]),Ug={name:"AboutView"},Bg={class:"container mt-4"};function Gg(t,e,r,a,o,i){return _(),b("div",Bg,[...e[0]||(e[0]=[s("h1",null,"关于我们",-1),s("p",null,"这是关于我们的页面。",-1)])])}const Vg=Pe(Ug,[["render",Gg]]),Kg={class:"container mt-4"},zg={key:0,class:"alert alert-danger"},Hg={class:"card"},Jg={class:"card-body"},Wg={class:"form-group mb-3"},Qg={class:"row mb-3"},Xg={class:"col-md-6"},Yg={class:"form-group"},Zg={class:"col-md-6"},e_={class:"form-group"},t_="MGEAIKKQEGVSTVKEDNKLIDSKKKKANNSNLAKKTSWRRIDLMATKNQRNDDSSTRKRKSSEGEFDMCGIEVAYEDELKRLKQEGKEDRDECKVKNPDKSLISAYIHDIQQLLVKYRKCRFEYIPPMENNLAHILATETLKNKKEFYLVGSVPKSAEKKEERDRVREPD",n_=vt({__name:"BlastpView",setup(t){const e=Gt("showLoading"),r=Gt("hideLoading"),a=$n(),o=F(""),i=F(.01),l=F(30),f=F(""),d=()=>{o.value=t_},p=async()=>{if(!o.value.trim()){f.value="Please enter a protein sequence";return}f.value="",e();try{console.log("Submitting BLASTP search:",{sequence:o.value,evalue:i.value,maxTargetSeqs:l.value});const v=new FormData;v.append("sequence",o.value),v.append("evalue",i.value.toString()),v.append("max_target_seqs",l.value.toString());const g="/tools/blastp/api/blastp/";console.log("API URL:",g),console.log("FormData entries:");for(const[T,A]of v.entries())console.log(`${T}: ${A}`);const k=await fetch(g,{method:"POST",body:v,headers:{Accept:"application/json"}});if(console.log("Response status:",k.status),console.log("Response statusText:",k.statusText),console.log("Response headers:",Object.fromEntries(k.headers.entries())),!k.ok){const T=await k.text();throw console.error("Response error text:",T),new Error(`HTTP error! status: ${k.status}, text: ${T}`)}const E=await k.json();a.push({name:"blastpResults",query:{results:encodeURIComponent(JSON.stringify(E))}})}catch(v){f.value="BLASTP search failed. Please try again. "+v.message,console.error("BLASTP error:",v),console.error("Error details:",JSON.stringify(v,Object.getOwnPropertyNames(v)))}finally{r()}},m=()=>{o.value="",i.value=.01,l.value=30,f.value=""};return(v,g)=>(_(),b("div",Kg,[g[8]||(g[8]=s("h2",{class:"mb-4"},"BLASTP",-1)),f.value?(_(),b("div",zg,S(f.value),1)):K("",!0),s("div",Hg,[s("div",Jg,[s("form",{onSubmit:pe(p,["prevent"])},[s("div",Wg,[g[3]||(g[3]=s("label",{for:"sequence",class:"form-label"},"Protein Sequence:",-1)),we(s("textarea",{class:"form-control",id:"sequence","onUpdate:modelValue":g[0]||(g[0]=k=>o.value=k),rows:"10",required:""},null,512),[[Ye,o.value]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",onClick:d}," Load Example ")]),s("div",Qg,[s("div",Xg,[s("div",Yg,[g[4]||(g[4]=s("label",{for:"evalue",class:"form-label"},"E-value threshold:",-1)),we(s("input",{type:"number",class:"form-control",id:"evalue","onUpdate:modelValue":g[1]||(g[1]=k=>i.value=k),step:"0.01",min:"0"},null,512),[[Ye,i.value,void 0,{number:!0}]])])]),s("div",Zg,[s("div",e_,[g[5]||(g[5]=s("label",{for:"max_target_seqs",class:"form-label"},"Maximum target sequences:",-1)),we(s("input",{type:"number",class:"form-control",id:"max_target_seqs","onUpdate:modelValue":g[2]||(g[2]=k=>l.value=k),min:"1",max:"50"},null,512),[[Ye,l.value,void 0,{number:!0}]])])])]),g[7]||(g[7]=s("button",{type:"submit",class:"btn btn-primary me-2"},[s("i",{class:"fas fa-search"}),ne(" Search ")],-1)),s("button",{type:"button",class:"btn btn-outline-secondary",onClick:m},[...g[6]||(g[6]=[s("i",{class:"fas fa-undo"},null,-1),ne(" Reset ",-1)])])],32)])])]))}}),s_=Pe(n_,[["__scopeId","data-v-ca4d24cb"]]),o_={class:"container mt-4"},r_={class:"d-flex justify-content-between align-items-center mb-4"},i_={key:0,class:"badge bg-info"},a_={class:"card mb-4"},l_={class:"card-body"},c_={class:"sequence-box"},u_={class:"mb-0"},d_={key:0,class:"text-muted"},h_={class:"card mb-4"},f_={class:"card-body"},p_={key:0,id:"chord-chart"},m_={key:1,class:"text-center py-4"},g_={class:"row g-2 align-items-center"},__={class:"col-auto"},v_={key:0,class:"text-center py-4"},b_={key:1},y_={class:"card mb-4"},w_={class:"card-header d-flex justify-content-between align-items-center"},k_={class:"mb-0"},E_={class:"badge bg-primary"},x_={class:"card-body p-0"},C_={class:"table-responsive"},S_={class:"table table-hover mb-0"},A_={class:"text-right"},T_={class:"text-right"},q_={class:"text-right"},R_={key:0,class:"card mb-4"},I_={class:"card-body p-0"},O_={class:"table-responsive"},D_={class:"table table-hover mb-0"},$_={key:1,"aria-label":"Page navigation"},P_={class:"pagination justify-content-center"},L_=["aria-disabled"],N_=["aria-disabled"],M_={class:"page-item active"},F_={class:"page-link"},j_=["aria-disabled"],U_=["aria-disabled"],B_={key:2,class:"alert alert-info"},G_={class:"mt-3"},V_=vt({__name:"BlastpResultView",setup(t){const e=Pn(),r=F(10),a=F("");F("");const o=F(.01),i=F([]),l=F([]),f=F([]),d=F(!1),p=F(1),m=F(0),v=F(0),g=F(null),k=F([]),E=Ne(()=>Math.ceil(m.value/r.value)),T=C=>C<.001?C.toExponential(2):C.toFixed(4),A=(C,D)=>C?typeof C!="string"?String(C):C.length>D?C.substring(0,D)+"...":C:"",q=(C,D)=>C?typeof C!="string"?String(C):C.length>D?C.substring(0,D)+"...":C:"",P=()=>{p.value=1,U()},j=C=>{p.value=C,U()},U=()=>{const C=(p.value-1)*r.value,D=C+r.value;i.value=l.value.slice(C,D)},Y=async()=>{d.value=!0;try{if(e.query.results){const C=JSON.parse(decodeURIComponent(e.query.results));if(console.log("Received BLASTP results:",C),C.hits){const D=C.hits.map((N,ee)=>({query:"Query_Protein",subject:N.protein_id,identity:N.identity,alignment_length:N.length,mismatches:0,gaps:0,query_start:N.qStart,query_end:N.qEnd,subject_start:0,subject_end:N.length,evalue:N.evalue,bit_score:N.score})),I=[...new Map(D.map(N=>[N.subject,N])).values()];I.sort((N,ee)=>ee.bit_score-N.bit_score),l.value=I,m.value=I.length,a.value=C.query_sequence||"",v.value=C.execution_time||0,o.value=C.evalue||.01,f.value=C.local_matches||[],k.value=I.map(N=>({identity:N.identity,evalue:N.evalue,bitScore:N.bit_score,subject:N.subject})),U(),se(C)}}else console.error("No results found in route query"),i.value=[],m.value=0}catch(C){console.error("加载结果失败:",C),i.value=[],m.value=0}finally{d.value=!1}},se=C=>{if(!C.hits||C.hits.length===0){g.value=null;return}const D={query:"Query_Protein",queryLength:C.query_length||0,proteins:[{id:"Query_Protein",length:C.query_length||0},...C.hits.map(I=>({id:I.protein_id,length:I.length}))],hits:C.hits.map(I=>({query:I.protein_id,target:"Query_Protein",score:I.score,evalue:I.evalue,identity:I.identity,qStart:I.qStart,qEnd:I.qEnd}))};g.value=D},Z=()=>{if(!g.value)return;const C=g.value;function D(M){const $e=[M.query,...M.proteins.map(tt=>tt.id)],st=[M.queryLength,...M.proteins.map(tt=>tt.length)],It=st.reduce((tt,Qe)=>tt+Qe,0),yt=Array($e.length).fill(0).map(()=>Array($e.length).fill(0));return M.hits.forEach(tt=>{const Qe=$e.indexOf(tt.query),ze=$e.indexOf(tt.target);Qe!==-1&&ze!==-1&&Qe<yt.length&&ze<yt.length&&yt[Qe]&&yt[ze]&&(yt[Qe][ze]=tt.score,yt[ze][Qe]=tt.score)}),{matrix:yt,proteins:$e,lengths:st,totalLength:It,hits:M.hits}}const I=D(C),N={};I.proteins.forEach(M=>{N[M]=0}),I.hits.forEach(M=>{M.query!==C.query&&(N[M.query]+=M.identity),M.target!==C.query&&(N[M.target]+=M.identity)});const ee={};I.hits.forEach(M=>{M.query!==C.query&&(ee[M.query]=(ee[M.query]||0)+1),M.target!==C.query&&(ee[M.target]=(ee[M.target]||0)+1)}),Object.keys(N).forEach(M=>{if(M!==C.query){const $e=ee[M]||1;N[M]!==void 0&&(N[M]=N[M]/$e)}});const ke=C.query,ge=[...I.proteins.filter(M=>M!==ke)].sort((M,$e)=>{const st=N[M]||0;return(N[$e]||0)-st}),Re=[ke,...ge].map(M=>I.proteins.indexOf(M)),$=Re.map(M=>Re.map($e=>I.matrix&&M>=0&&M<I.matrix.length&&I.matrix[M]&&$e>=0&&$e<I.matrix[M].length?I.matrix[M][$e]:0)),Je=Re.map(M=>I.lengths[M]),Ve=Re.map(M=>I.proteins[M]);I.matrix=$,I.lengths=Je,I.proteins=Ve;const We=document.getElementById("chord-chart");if(!We)return;We.innerHTML="";const Be=We.clientWidth,Ke=800,Le=Math.min(Be,Ke)*.5-40,ct=Le-30,x=Lt("#chord-chart").append("svg").attr("width",Be).attr("height",Ke).append("g").attr("transform",`translate(${Be/2},${Ke/2})`),G=xu().padAngle(.1).sortSubgroups(Cu)(I.matrix),te=[0];let he=0;he+=I.lengths[0],te.push(he/I.totalLength*2*Math.PI);for(let M=1;M<I.lengths.length;M++)he+=I.lengths[M],te.push(he/I.totalLength*2*Math.PI);const Se=Su().innerRadius(ct).outerRadius(Le).startAngle(M=>(te[M.index]||0)+.02).endAngle(M=>(te[M.index+1]||0)-.02),ue=Au().domain(I.proteins).range(Tu.concat(qu)),re=x.append("g").selectAll("g").data(G.groups).enter().append("g");re.append("path").attr("class","chord-group").style("fill",M=>ue(I.proteins[M.index])).style("stroke","#000").style("stroke-width","0.5px").attr("d",M=>Se(M)).append("title").text(M=>{const $e=I.proteins[M.index],st=I.lengths[M.index],It=N[$e]||0;return`${$e} (Length: ${st}, Avg Identity: ${It.toFixed(2)}%)`}),re.append("text").each(M=>{const $e=te[M.index]||0,st=te[M.index+1]||0;M.angle=($e+st)/2}).attr("class","protein-label").attr("dy",".35em").attr("transform",M=>`
            rotate(${M.angle*180/Math.PI-90})
            translate(${ct-5})
            ${M.angle>Math.PI?"rotate(180)":""}
          `).style("text-anchor",M=>M.angle>Math.PI?"end":null).text(M=>{const st=I.proteins[M.index];return st.length>4?st.substring(0,4)+"...":st});const Ae=Ru().radius(ct),bt=Lt("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none");x.append("g").selectAll("path").data(G).enter().append("path").attr("class","chord-ribbon").style("fill",M=>ue(I.proteins[M.source.index])).style("stroke",M=>ue(I.proteins[M.source.index])).attr("d",Ae).style("opacity",.8).on("mouseover",M=>{bi(".chord-ribbon").style("opacity",.1);const $e=M.currentTarget;$e&&Lt($e).style("opacity",1).style("stroke","#000").style("stroke-width","1px");const It=M.currentTarget?.__data__;if(It){const yt=I.proteins[It.source.index],tt=I.proteins[It.target.index],Qe=I.hits.find(ze=>ze.query===yt&&ze.target===tt||ze.query===tt&&ze.target===yt);bt.transition().duration(200).style("opacity",.9),bt.html(`
          <strong>Query Protein → ${tt}</strong><br>
          ${Qe?`E-value: ${Qe.evalue}<br>Identity: ${Qe.identity}%<br>Alignment region: ${Qe.qStart}-${Qe.qEnd}`:""}
        `).style("left",M.pageX+15+"px").style("top",M.pageY-28+"px")}}).on("mouseout",()=>{bi(".chord-ribbon").style("opacity",.8).style("stroke","none"),bt.style("opacity",0)}).on("mousemove",M=>{bt.style("left",M.pageX+15+"px").style("top",M.pageY-28+"px")})},W=()=>{if(k.value.length===0)return;const C=document.getElementById("line-chart");if(!C)return;const D=C.clientWidth,I=400,N={top:20,right:30,bottom:40,left:60};C.innerHTML="";const ee=Lt("#line-chart").append("svg").attr("width",D).attr("height",I).append("g").attr("transform",`translate(${N.left},${N.top})`),ke=D-N.left-N.right,Me=I-N.top-N.bottom,ge=k.value.map($=>({...$,logEvalue:-Math.log10($.evalue+1e-100)})),et=yi().domain([0,100]).range([0,ke]),Re=yi().domain([0,Iu(ge,$=>$.logEvalue)||0]).range([Me,0]);ee.append("g").attr("transform",`translate(0,${Me})`).call(wi(et)).append("text").attr("x",ke/2).attr("y",30).style("text-anchor","middle").style("font-size","12px").text("Identity (%)"),ee.append("g").call(ki(Re)).append("text").attr("transform","rotate(-90)").attr("x",-Me/2).attr("y",-40).style("text-anchor","middle").style("font-size","12px").text("-log10(E-value)"),ee.selectAll(".dot").data(ge).enter().append("circle").attr("class","dot").attr("cx",$=>et($.identity)).attr("cy",$=>Re($.logEvalue)).attr("r",4).style("fill","#49B7CF").style("opacity",.7).style("stroke","#000").style("stroke-width","1px").on("mouseover",function($,Je){Lt(this).style("opacity",1).style("stroke","#000").style("stroke-width","2px");const Ve=Lt("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none").style("z-index","1000");Ve.transition().duration(200).style("opacity",.9),Ve.html(`
        <strong>${Je.subject}</strong><br>
        Identity: ${Je.identity.toFixed(2)}%<br>
        E-value: ${Je.evalue<.001?Je.evalue.toExponential(2):Je.evalue.toFixed(4)}<br>
        Bit Score: ${Je.bitScore.toFixed(0)}
      `).style("left",$.pageX+15+"px").style("top",$.pageY-28+"px"),Lt(this).datum({tooltip:Ve})}).on("mouseout",function(){Lt(this).style("opacity",.7).style("stroke","#000").style("stroke-width","1px");const $=Lt(this).datum();$.tooltip&&typeof $.tooltip.remove=="function"&&$.tooltip.remove(),Lt(this).datum(null)}),ee.append("g").attr("class","grid").attr("transform",`translate(0,${Me})`).call(wi(et).ticks(10).tickSize(-Me).tickFormat(()=>"")),ee.append("g").attr("class","grid").call(ki(Re).ticks(10).tickSize(-ke).tickFormat(()=>""))};return Wt(()=>{Y()}),Rn(g,C=>{C&&setTimeout(()=>{Z()},100)}),Rn(k,()=>{W()},{deep:!0}),(C,D)=>{const I=gt("router-link");return _(),b("div",o_,[s("div",r_,[D[5]||(D[5]=s("h2",null,"BLASTP Results",-1)),v.value?(_(),b("span",i_,"Executed in "+S(v.value)+" seconds",1)):K("",!0)]),s("div",a_,[D[6]||(D[6]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"Query Sequence")],-1)),s("div",l_,[s("div",c_,[s("pre",u_,S(q(a.value,200)),1),a.value.length>200?(_(),b("small",d_,"(truncated - full sequence used for search)")):K("",!0)])])]),s("div",h_,[D[8]||(D[8]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"Chord Diagram")],-1)),s("div",f_,[g.value?(_(),b("div",p_)):(_(),b("div",m_,[...D[7]||(D[7]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])]))])]),s("form",{onSubmit:pe(P,["prevent"]),class:"mb-3"},[s("div",g_,[D[10]||(D[10]=s("div",{class:"col-auto"},[s("label",{for:"per_page",class:"col-form-label"},"每页显示:")],-1)),s("div",__,[we(s("select",{name:"per_page",id:"per_page",class:"form-select","onUpdate:modelValue":D[0]||(D[0]=N=>r.value=N)},[...D[9]||(D[9]=[s("option",{value:"5"},"5",-1),s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,r.value,void 0,{number:!0}]])]),D[11]||(D[11]=s("div",{class:"col-auto"},[s("span",{class:"form-text"},"条记录")],-1))])],32),d.value?(_(),b("div",v_,[...D[12]||(D[12]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])])):i.value.length>0?(_(),b("div",b_,[s("div",y_,[s("div",w_,[s("h5",k_,"BLASTP Hits (E-value ≤ "+S(o.value)+")",1),s("span",E_,S(m.value)+" results",1)]),s("div",x_,[s("div",C_,[s("table",S_,[D[13]||(D[13]=s("thead",{class:"thead-light"},[s("tr",null,[s("th",null,"Protein ID"),s("th",{class:"text-right"},"E-value"),s("th",{class:"text-right"},"Bit Score"),s("th",{class:"text-right"},"Identity (%)")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(i.value,(N,ee)=>(_(),b("tr",{key:N.subject,class:"protein-row"},[s("td",null,[s("code",null,S(A(N.subject,15)),1)]),s("td",A_,S(T(N.evalue)),1),s("td",T_,S(N.bit_score.toFixed(0)),1),s("td",q_,S(N.identity.toFixed(2))+"%",1)]))),128))])])])])]),f.value.length>0?(_(),b("div",R_,[D[16]||(D[16]=s("div",{class:"card-header"},[s("h5",{class:"mb-0"},"Local Database Matches")],-1)),s("div",I_,[s("div",O_,[s("table",D_,[D[15]||(D[15]=s("thead",{class:"thead-light"},[s("tr",null,[s("th",null,"Protein ID"),s("th",null,"Gene ID"),s("th",null,"Description"),s("th",null,"Source"),s("th",null,"Actions")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(f.value,(N,ee)=>(_(),b("tr",{key:N.protein_id},[s("td",null,[s("code",null,S(N.protein_id),1)]),s("td",null,S(N.gene_id),1),s("td",null,S(A(N.description,50)),1),s("td",null,S(A(N.file_source,20)),1),D[14]||(D[14]=s("td",null,[s("div",{class:"btn-group btn-group-sm"},[s("a",{href:"#",class:"btn btn-outline-info",title:"View details"},[s("i",{class:"fas fa-eye"})]),s("a",{href:"#",class:"btn btn-outline-secondary",title:"Download sequence"},[s("i",{class:"fas fa-download"})])])],-1))]))),128))])])])])])):K("",!0),m.value>r.value?(_(),b("nav",$_,[s("ul",P_,[s("li",{class:De(["page-item",{disabled:p.value===1}])},[s("a",{class:"page-link",href:"#",onClick:D[1]||(D[1]=pe(N=>j(1),["prevent"])),"aria-disabled":p.value===1}," 首页 ",8,L_)],2),s("li",{class:De(["page-item",{disabled:p.value===1}])},[s("a",{class:"page-link",href:"#",onClick:D[2]||(D[2]=pe(N=>j(p.value-1),["prevent"])),"aria-disabled":p.value===1}," 上一页 ",8,N_)],2),s("li",M_,[s("span",F_," 第 "+S(p.value)+" 页 / 共 "+S(E.value)+" 页 ",1)]),s("li",{class:De(["page-item",{disabled:p.value===E.value}])},[s("a",{class:"page-link",href:"#",onClick:D[3]||(D[3]=pe(N=>j(p.value+1),["prevent"])),"aria-disabled":p.value===E.value}," 下一页 ",8,j_)],2),s("li",{class:De(["page-item",{disabled:p.value===E.value}])},[s("a",{class:"page-link",href:"#",onClick:D[4]||(D[4]=pe(N=>j(E.value),["prevent"])),"aria-disabled":p.value===E.value}," 末页 ",8,U_)],2)])])):K("",!0)])):(_(),b("div",B_,"未找到匹配结果")),s("div",G_,[Q(I,{to:"/tools/blastp",class:"btn btn-secondary"},{default:_e(()=>[...D[17]||(D[17]=[ne("返回搜索",-1)])]),_:1})])])}}}),K_=Pe(V_,[["__scopeId","data-v-a4bf9ad8"]]),z_={class:"container mt-4"},H_={class:"form-group"},J_={class:"row mt-3"},W_={class:"col-md-6"},Q_={class:"form-group"},X_={class:"col-md-6"},Y_={class:"form-group"},Z_={class:"form-group mt-3"},ev={key:0,class:"alert alert-danger mt-3"},tv=vt({__name:"GoEnrichmentView",setup(t){const e=$n(),a=fu()?.appContext.config.globalProperties.$http,o=F(""),i=F(.05),l=F(.05),f=F(10),d=F(""),p=()=>{const v=`Kirkii_Juiced.00g000010
Kirkii_Juiced.00g000020
Kirkii_Juiced.00g000030
Kirkii_Juiced.00g000040
Kirkii_Juiced.00g000050
Kirkii_Juiced.00g000060
Kirkii_Juiced.00g000070
Kirkii_Juiced.00g000080
Kirkii_Juiced.00g000090
Kirkii_Juiced.00g000100
Kirkii_Juiced.00g000110
Kirkii_Juiced.00g000120
Kirkii_Juiced.00g000130
Kirkii_Juiced.00g000140
Kirkii_Juiced.00g000150
Kirkii_Juiced.00g000160
Kirkii_Juiced.00g000170
Kirkii_Juiced.00g000180
Kirkii_Juiced.00g000190
Kirkii_Juiced.00g000200
Kirkii_Juiced.00g000210
Kirkii_Juiced.00g000220
Kirkii_Juiced.00g000230`;o.value=v},m=async()=>{if(d.value="",!o.value.trim()){d.value="请输入基因列表";return}try{if(!a)throw new Error("未找到全局axios实例");const g=(await a.post("/tools/go_enrichment/api/start/",{gene_list:o.value,p_value:i.value,q_value:l.value,per_page:f.value})).data;g.status==="success"?e.push({path:"/tools/go-enrichment/results",query:{task_id:g.task_id}}):d.value=g.error||"提交失败"}catch(v){d.value="提交失败，请重试",console.error("提交失败:",v)}};return(v,g)=>(_(),b("div",z_,[g[10]||(g[10]=s("h2",{class:"mb-4"},"GO富集分析",-1)),s("form",{onSubmit:pe(m,["prevent"])},[s("div",H_,[g[4]||(g[4]=s("label",{for:"gene_list"},"输入基因列表 (每行一个基因或空格分隔):",-1)),we(s("textarea",{class:"form-control",id:"gene_list","onUpdate:modelValue":g[0]||(g[0]=k=>o.value=k),rows:"10"},null,512),[[Ye,o.value]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",onClick:p}," load example ")]),s("div",J_,[s("div",W_,[s("div",Q_,[g[5]||(g[5]=s("label",{for:"p_value"},"P值阈值:",-1)),we(s("input",{type:"number",class:"form-control",id:"p_value","onUpdate:modelValue":g[1]||(g[1]=k=>i.value=k),min:"0.0001",max:"1",step:"0.0001",required:""},null,512),[[Ye,i.value,void 0,{number:!0}]])])]),s("div",X_,[s("div",Y_,[g[6]||(g[6]=s("label",{for:"q_value"},"Q值阈值:",-1)),we(s("input",{type:"number",class:"form-control",id:"q_value","onUpdate:modelValue":g[2]||(g[2]=k=>l.value=k),min:"0.0001",max:"1",step:"0.0001",required:""},null,512),[[Ye,l.value,void 0,{number:!0}]])])])]),s("div",Z_,[g[8]||(g[8]=s("label",{for:"per_page"},"每页显示结果数:",-1)),we(s("select",{class:"form-control",id:"per_page","onUpdate:modelValue":g[3]||(g[3]=k=>f.value=k)},[...g[7]||(g[7]=[s("option",{value:"5"},"5",-1),s("option",{value:"10",selected:""},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,f.value,void 0,{number:!0}]])]),g[9]||(g[9]=s("button",{type:"submit",class:"btn btn-primary mt-4"},"提交分析",-1)),d.value?(_(),b("div",ev,S(d.value),1)):K("",!0)],32)]))}}),nv=Pe(tv,[["__scopeId","data-v-ba0b4675"]]),sv={class:"container mt-4"},ov={key:0,class:"text-center py-4"},rv={key:1,class:"alert alert-danger",role:"alert"},iv={key:2,class:"alert alert-warning",role:"alert"},av={key:3},lv={class:"row g-2 align-items-center"},cv={class:"col-auto"},uv=["id"],dv={class:"text-danger"},hv={key:0},fv={key:1},pv={key:2},mv={class:"text-muted"},gv={class:"table-responsive"},_v={class:"table table-bordered table-hover"},vv=["id"],bv=["title"],yv={key:0,class:"mt-4"},wv=["src","alt"],kv={"aria-label":"Page navigation"},Ev=["id"],xv=["onClick","data-category"],Cv={key:1,class:"page-link"},Sv=["onClick","data-category"],Av={key:1,class:"page-link"},Tv={class:"page-item active"},qv=["id"],Rv=["onClick","data-category"],Iv={key:1,class:"page-link"},Ov=["onClick","data-category"],Dv={key:1,class:"page-link"},$v=vt({__name:"GoEnrichmentResultView",setup(t){const e=Pn(),r=F(10),a=F({BP:1,MF:1,CC:1}),o=F({BP:{results:[],total:0,num_pages:1,current_page:1,has_next:!1,has_previous:!1},MF:{results:[],total:0,num_pages:1,current_page:1,has_next:!1,has_previous:!1},CC:{results:[],total:0,num_pages:1,current_page:1,has_next:!1,has_previous:!1}}),i=F({}),l=F(!0),f=F(!1),d=F(""),p=F(0),m=A=>typeof A=="object"&&A!==null&&"name"in A?A.name:typeof A=="string"?A:"",v=A=>typeof A=="object"&&A!==null&&"definition"in A?A.definition:"",g=A=>{const q=A.target;q&&(q.style.display="none")},k=async()=>{a.value={BP:1,MF:1,CC:1},await T()},E=async(A,q)=>{a.value[A]=q,await T()},T=async()=>{f.value=!0;try{const A=e.query.task_id;if(!A){d.value="缺少任务ID",l.value=!1;return}const q={task_id:A,per_page:r.value};for(const j in a.value)q[`${j}_page`]=a.value[j];console.log("请求参数:",q);const P=await St.get("/tools/go_enrichment/api/results/",{params:q});if(console.log("完整的后端返回数据:",JSON.stringify(P,null,2)),P.status==="success"||P.code===200||!P.error){let U=(P.results||P.data||{}).results||{},Y=P.plot_images||P.images||P.charts||{};console.log("处理后的结果对象:",U),console.log("处理后的图像对象:",Y),o.value={BP:{results:[],total:0,num_pages:1,current_page:1,has_next:!1,has_previous:!1},MF:{results:[],total:0,num_pages:1,current_page:1,has_next:!1,has_previous:!1},CC:{results:[],total:0,num_pages:1,current_page:1,has_next:!1,has_previous:!1}};for(const Z in U){const W=U[Z];console.log(`处理类别 ${Z} 的数据:`,W),W&&typeof W=="object"&&(Array.isArray(W.results)?o.value[Z]={results:W.results,total:W.total||W.results.length,num_pages:W.num_pages||1,current_page:W.current_page||a.value[Z]||1,has_next:W.has_next||!1,has_previous:W.has_previous||!1}:Array.isArray(W)&&(o.value[Z]={results:W,total:W.length,num_pages:1,current_page:a.value[Z]||1,has_next:!1,has_previous:!1}))}i.value=Y,console.log("可视化图像数据:",Y);let se=!1;for(const Z in o.value)if(o.value[Z].results.length>0){se=!0;break}l.value=se,console.log("最终结果数据:",o.value),p.value=P.execution_time||P.elapsed_time||P.time||0}else P.status==="processing"?setTimeout(()=>T(),1e3):(d.value=P.error||"获取结果失败",l.value=!1)}catch(A){d.value="获取结果失败: "+(A.message||A),console.error("Error fetching results:",A),l.value=!1}finally{f.value=!1}};return Wt(async()=>{await T()}),Wt(()=>{}),(A,q)=>{const P=gt("router-link");return _(),b("div",sv,[q[9]||(q[9]=s("h2",{class:"mb-4"},"GO富集分析结果",-1)),Q(P,{to:"/tools/go-enrichment",class:"btn btn-secondary mb-4"},{default:_e(()=>[...q[2]||(q[2]=[ne("返回",-1)])]),_:1}),f.value?(_(),b("div",ov,[...q[3]||(q[3]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])])):d.value?(_(),b("div",rv,S(d.value),1)):l.value?(_(),b("div",av,[s("form",{onSubmit:pe(k,["prevent"]),class:"mb-3",id:"per-page-form"},[s("div",lv,[q[5]||(q[5]=s("div",{class:"col-auto"},[s("label",{for:"per_page",class:"col-form-label"},"每页显示:")],-1)),s("div",cv,[we(s("select",{name:"per_page",id:"per_page",class:"form-select","onUpdate:modelValue":q[0]||(q[0]=j=>r.value=j)},[...q[4]||(q[4]=[s("option",{value:"5"},"5",-1),s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,r.value,void 0,{number:!0}]])]),q[6]||(q[6]=s("div",{class:"col-auto"},[s("span",{class:"form-text"},"条记录")],-1))])],32),(_(!0),b(X,null,be(o.value,(j,U)=>(_(),b("div",{key:U,class:"mb-5",id:`category-${U}`},[s("h4",dv,[U==="MF"?(_(),b("span",hv,"Molecular Function")):U==="BP"?(_(),b("span",fv,"Biological Process")):U==="CC"?(_(),b("span",pv,"Cellular Component")):K("",!0),s("small",mv," (共 "+S(j.total)+" 条) ",1)]),s("div",gv,[s("table",_v,[q[7]||(q[7]=s("thead",{class:"bg-light"},[s("tr",null,[s("th",null,"GO ID"),s("th",null,"Description"),s("th",null,"GeneRatio"),s("th",null,"BgRatio"),s("th",null,"RichFactor"),s("th",null,"FoldEnrichment"),s("th",null,"zScore"),s("th",null,"pvalue"),s("th",null,"Genes")])],-1)),s("tbody",{id:`tbody-${U}`},[(_(!0),b(X,null,be(j.results,Y=>(_(),b("tr",{key:Y.go_id},[s("td",null,S(Y.go_id),1),s("td",null,[ne(S(m(Y.description))+" ",1),v(Y.description)?(_(),b("i",{key:0,class:"fas fa-info-circle text-muted",title:v(Y.description),"data-bs-toggle":"tooltip"},null,8,bv)):K("",!0)]),s("td",null,S(Y.gene_ratio),1),s("td",null,S(Y.bg_ratio),1),s("td",null,S(parseFloat(Y.rich_factor).toFixed(4)),1),s("td",null,S(parseFloat(Y.fold_enrichment).toFixed(4)),1),s("td",null,S(parseFloat(Y.z_score).toFixed(4)),1),s("td",null,S(parseFloat(Y.p_value).toFixed(6)),1),s("td",null,S(Y.genes),1)]))),128))],8,vv)])]),i.value&&(i.value[U]||i.value[U.toLowerCase()]||i.value[U.toUpperCase()])?(_(),b("div",yv,[q[8]||(q[8]=s("h5",null,"可视化结果",-1)),s("img",{src:`data:image/png;base64,${i.value[U]||i.value[U.toLowerCase()]||i.value[U.toUpperCase()]}`,class:"img-fluid",alt:`${U} Plot`,onError:q[1]||(q[1]=Y=>g(Y))},null,40,wv)])):K("",!0),s("nav",kv,[s("ul",{id:`pagination-${U}`,class:"pagination justify-content-center"},[s("li",{class:De(["page-item",{disabled:!j.has_previous}])},[j.has_previous?(_(),b("a",{key:0,class:"page-link pagination-link",href:"#",onClick:pe(Y=>E(U,1),["prevent"]),"data-category":U}," 首页 ",8,xv)):(_(),b("span",Cv,"首页"))],2),s("li",{class:De(["page-item",{disabled:!j.has_previous}])},[j.has_previous?(_(),b("a",{key:0,class:"page-link pagination-link",href:"#",onClick:pe(Y=>E(U,j.previous_page_number),["prevent"]),"data-category":U}," 上一页 ",8,Sv)):(_(),b("span",Av,"上一页"))],2),s("li",Tv,[s("span",{id:`current-page-${U}`,class:"page-link"}," 第 "+S(j.current_page)+" 页 / 共 "+S(j.num_pages)+" 页 ",9,qv)]),s("li",{class:De(["page-item",{disabled:!j.has_next}])},[j.has_next?(_(),b("a",{key:0,class:"page-link pagination-link",href:"#",onClick:pe(Y=>E(U,j.next_page_number),["prevent"]),"data-category":U}," 下一页 ",8,Rv)):(_(),b("span",Iv,"下一页"))],2),s("li",{class:De(["page-item",{disabled:!j.has_next}])},[j.has_next?(_(),b("a",{key:0,class:"page-link pagination-link",href:"#",onClick:pe(Y=>E(U,j.num_pages),["prevent"]),"data-category":U}," 末页 ",8,Ov)):(_(),b("span",Dv,"末页"))],2)],8,Ev)])],8,uv))),128))])):(_(),b("div",iv," 暂无富集结果 "))])}}}),Pv=Pe($v,[["__scopeId","data-v-2f118e97"]]),Lv={class:"container mt-4"},Nv={class:"form-group"},Mv={class:"form-group mt-3"},Fv={key:0,class:"alert alert-danger mt-3"},jv=vt({__name:"GoAnnotationView",setup(t){const e=$n(),r=F(""),a=F(10),o=F(""),i=()=>{const f=`Kirkii_Juiced.00g000010
Kirkii_Juiced.00g000020
Kirkii_Juiced.00g000030
Kirkii_Juiced.00g000040
Kirkii_Juiced.00g000050
Kirkii_Juiced.00g000060
Kirkii_Juiced.00g000070
Kirkii_Juiced.00g000080
Kirkii_Juiced.00g000090
Kirkii_Juiced.00g000100`;r.value=f},l=async()=>{if(o.value="",!r.value.trim()){o.value="请输入基因列表";return}const f={gene_list:r.value,per_page:a.value};try{e.push({path:"/tools/go-annotation/results",query:f})}catch(d){o.value="提交失败，请重试",console.error("提交失败:",d)}};return(f,d)=>(_(),b("div",Lv,[d[6]||(d[6]=s("h2",{class:"mb-4"},"GO注释",-1)),s("form",{onSubmit:pe(l,["prevent"])},[s("div",Nv,[d[2]||(d[2]=s("label",{for:"gene_list"},"输入基因列表 (每行一个基因或空格分隔):",-1)),we(s("textarea",{class:"form-control",id:"gene_list","onUpdate:modelValue":d[0]||(d[0]=p=>r.value=p),rows:"10"},null,512),[[Ye,r.value]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",onClick:i}," load example ")]),s("div",Mv,[d[4]||(d[4]=s("label",{for:"per_page"},"每页显示结果数:",-1)),we(s("select",{class:"form-control",id:"per_page","onUpdate:modelValue":d[1]||(d[1]=p=>a.value=p)},[...d[3]||(d[3]=[s("option",{value:"5"},"5",-1),s("option",{value:"10",selected:""},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,a.value,void 0,{number:!0}]])]),d[5]||(d[5]=s("button",{type:"submit",class:"btn btn-primary mt-4"},"提交分析",-1)),o.value?(_(),b("div",Fv,S(o.value),1)):K("",!0)],32)]))}}),Uv=Pe(jv,[["__scopeId","data-v-846c266a"]]),Bv={class:"container mt-4"},Gv={key:0,class:"card mb-4"},Vv={class:"card-body"},Kv=["src"],zv={class:"row g-2 align-items-center"},Hv={class:"col-auto"},Jv={key:1,class:"text-center py-4"},Wv={key:2},Qv={class:"table-responsive"},Xv={class:"table table-bordered table-hover"},Yv={key:0,"aria-label":"Page navigation"},Zv={class:"pagination justify-content-center"},e0=["aria-disabled"],t0=["aria-disabled"],n0={class:"page-item active"},s0={class:"page-link"},o0=["aria-disabled"],r0=["aria-disabled"],i0={key:3,class:"alert alert-info"},a0={class:"mt-3"},l0=vt({__name:"GoAnnotationResultView",setup(t){const e=Pn(),r=F(10),a=F(""),o=F([]),i=F(!1),l=F(1),f=F(0),d=F(""),p=F(!0),m=Ne(()=>Math.ceil(f.value/r.value)),v=()=>{l.value=1,k()},g=E=>{l.value=E,k()},k=async()=>{i.value=!0;const E=e.query.gene_list||"";a.value=E,console.log("=== GO注释结果页面调试信息 ==="),console.log("路由参数:",e.query),console.log("获取的gene_list参数:",E),console.log("gene_list参数长度:",E.length),console.log("当前页码:",l.value),console.log("每页显示条数:",r.value);try{if(!E){console.log("没有获取到gene_list参数"),o.value=[],f.value=0,d.value="",p.value=!1;return}console.log("准备调用API");const T=await St.get("/tools/go_annotation/",{params:{gene_id:E,per_page:r.value,page:l.value,api:"true"}});if(console.log("API调用成功"),console.log("API响应数据:",T),T&&T.success){console.log("API响应成功");const A=T.data;console.log("数据对象:",A),console.log("结果数组:",A.results),console.log("结果数量:",A.results?A.results.length:0),console.log("是否有图表:",A.chart?"是":"否"),o.value=A.results||[],f.value=A.results.length||0,d.value=A.chart||"",p.value=o.value.length>0,console.log("是否有结果:",p.value)}else console.log("API响应失败或success为false"),console.log("响应数据:",T),o.value=[],f.value=0,d.value="",p.value=!1}catch(T){console.error("加载结果失败:",T),o.value=[],f.value=0,d.value="",p.value=!1}finally{i.value=!1}};return Wt(()=>{k()}),(E,T)=>{const A=gt("router-link");return _(),b("div",Bv,[T[12]||(T[12]=s("h2",{class:"mb-4"},"GO注释结果",-1)),d.value?(_(),b("div",Gv,[s("div",Vv,[T[5]||(T[5]=s("h5",{class:"card-title"},"GO注释分布",-1)),s("img",{src:`data:image/png;base64,${d.value}`,alt:"GO Annotation Chart",class:"img-fluid"},null,8,Kv)])])):K("",!0),s("form",{onSubmit:pe(v,["prevent"]),class:"mb-3"},[s("div",zv,[T[7]||(T[7]=s("div",{class:"col-auto"},[s("label",{for:"per_page",class:"col-form-label"},"每页显示:")],-1)),s("div",Hv,[we(s("select",{name:"per_page",id:"per_page",class:"form-select","onUpdate:modelValue":T[0]||(T[0]=q=>r.value=q)},[...T[6]||(T[6]=[s("option",{value:"5"},"5",-1),s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,r.value,void 0,{number:!0}]])]),T[8]||(T[8]=s("div",{class:"col-auto"},[s("span",{class:"form-text"},"条记录")],-1))])],32),i.value?(_(),b("div",Jv,[...T[9]||(T[9]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])])):o.value.length>0?(_(),b("div",Wv,[s("div",Qv,[s("table",Xv,[T[10]||(T[10]=s("thead",{class:"bg-light"},[s("tr",null,[s("th",null,"Chr"),s("th",null,"Start"),s("th",null,"End"),s("th",null,"ID"),s("th",null,"GO ID"),s("th",null,"Description"),s("th",null,"Gene Ontology")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(o.value,q=>(_(),b("tr",{key:`${q.ID}-${q.GO_ID}`},[s("td",null,S(q.Chr),1),s("td",null,S(q.Start),1),s("td",null,S(q.End),1),s("td",null,S(q.ID),1),s("td",null,S(q.GO_ID),1),s("td",null,S(q.Description),1),s("td",null,S(q.Gene_Ontology),1)]))),128))])])]),f.value>r.value?(_(),b("nav",Yv,[s("ul",Zv,[s("li",{class:De(["page-item",{disabled:l.value===1}])},[s("a",{class:"page-link",href:"#",onClick:T[1]||(T[1]=pe(q=>g(1),["prevent"])),"aria-disabled":l.value===1}," 首页 ",8,e0)],2),s("li",{class:De(["page-item",{disabled:l.value===1}])},[s("a",{class:"page-link",href:"#",onClick:T[2]||(T[2]=pe(q=>g(l.value-1),["prevent"])),"aria-disabled":l.value===1}," 上一页 ",8,t0)],2),s("li",n0,[s("span",s0," 第 "+S(l.value)+" 页 / 共 "+S(m.value)+" 页 ",1)]),s("li",{class:De(["page-item",{disabled:l.value===m.value}])},[s("a",{class:"page-link",href:"#",onClick:T[3]||(T[3]=pe(q=>g(l.value+1),["prevent"])),"aria-disabled":l.value===m.value}," 下一页 ",8,o0)],2),s("li",{class:De(["page-item",{disabled:l.value===m.value}])},[s("a",{class:"page-link",href:"#",onClick:T[4]||(T[4]=pe(q=>g(m.value),["prevent"])),"aria-disabled":l.value===m.value}," 末页 ",8,r0)],2)])])):K("",!0)])):(_(),b("div",i0,"暂无注释结果")),s("div",a0,[Q(A,{to:"/tools/go-annotation",class:"btn btn-secondary"},{default:_e(()=>[...T[11]||(T[11]=[ne("返回",-1)])]),_:1})])])}}}),c0=Pe(l0,[["__scopeId","data-v-03b3b785"]]),u0={class:"container mt-4"},d0={class:"form-group"},h0={class:"form-group mt-3"},f0={class:"form-group mt-3"},p0={key:0,class:"alert alert-danger mt-3"},m0=vt({__name:"GeneExpressionView",setup(t){const e=$n(),r=F(""),a=F(""),o=F(10),i=F(""),l=()=>{const d=`Kirkii_Juiced.00g000010
Kirkii_Juiced.00g000020
Kirkii_Juiced.00g000030
Kirkii_Juiced.00g000040
Kirkii_Juiced.00g000050
Kirkii_Juiced.00g000060
Kirkii_Juiced.00g000070
Kirkii_Juiced.00g000080
Kirkii_Juiced.00g000090
Kirkii_Juiced.00g000100`;r.value=d},f=async()=>{if(i.value="",!r.value.trim()){i.value="请输入基因列表";return}const d={gene_list:r.value,tissue:a.value,per_page:o.value};try{e.push({path:"/tools/gene-expression/results",query:d})}catch(p){i.value="提交失败，请重试",console.error("提交失败:",p)}};return(d,p)=>(_(),b("div",u0,[p[9]||(p[9]=s("h2",{class:"mb-4"},"基因表达分析",-1)),s("form",{onSubmit:pe(f,["prevent"])},[s("div",d0,[p[3]||(p[3]=s("label",{for:"gene_list"},"输入基因列表 (每行一个基因或空格分隔):",-1)),we(s("textarea",{class:"form-control",id:"gene_list","onUpdate:modelValue":p[0]||(p[0]=m=>r.value=m),rows:"10"},null,512),[[Ye,r.value]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",onClick:l}," load example ")]),s("div",h0,[p[5]||(p[5]=s("label",{for:"tissue"},"选择组织:",-1)),we(s("select",{class:"form-control",id:"tissue","onUpdate:modelValue":p[1]||(p[1]=m=>a.value=m)},[...p[4]||(p[4]=[As('<option value="" data-v-2e37b489>-- 全部组织 --</option><option value="leaf" data-v-2e37b489>叶</option><option value="root" data-v-2e37b489>根</option><option value="flower" data-v-2e37b489>花</option><option value="stem" data-v-2e37b489>茎</option><option value="seed" data-v-2e37b489>种子</option><option value="fiber" data-v-2e37b489>纤维</option>',7)])],512),[[_t,a.value]])]),s("div",f0,[p[7]||(p[7]=s("label",{for:"per_page"},"每页显示结果数:",-1)),we(s("select",{class:"form-control",id:"per_page","onUpdate:modelValue":p[2]||(p[2]=m=>o.value=m)},[...p[6]||(p[6]=[s("option",{value:"5"},"5",-1),s("option",{value:"10",selected:""},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,o.value,void 0,{number:!0}]])]),p[8]||(p[8]=s("button",{type:"submit",class:"btn btn-primary mt-4"},"提交分析",-1)),i.value?(_(),b("div",p0,S(i.value),1)):K("",!0)],32)]))}}),g0=Pe(m0,[["__scopeId","data-v-2e37b489"]]);Ou();const _0={class:"container mt-4"},v0={class:"row g-2 align-items-center"},b0={class:"col-auto"},y0={key:0,class:"text-center py-4"},w0={key:1},k0={class:"table-responsive"},E0={class:"table table-bordered table-hover"},x0={class:"bg-light"},C0={key:0},S0={key:1},A0={class:"mt-4"},T0={key:0,class:"heatmap-container mt-3"},q0={class:"heatmap-wrapper"},R0={class:"gene-labels"},I0={class:"heatmap-content"},O0={class:"tissue-labels"},D0={key:1,class:"alert alert-info"},$0={key:0,"aria-label":"Page navigation"},P0={class:"pagination justify-content-center"},L0=["aria-disabled"],N0=["aria-disabled"],M0={class:"page-item active"},F0={class:"page-link"},j0=["aria-disabled"],U0=["aria-disabled"],B0={key:2,class:"alert alert-info"},G0={class:"mt-3"},V0=vt({__name:"GeneExpressionResultView",setup(t){const e=Pn(),r=F(10),a=F(""),o=F(""),i=F([]),l=F(!1),f=F(1),d=F(0),p=F(null);F(null);const m=F(null),v=[{value:"leaf",label:"叶"},{value:"root",label:"根"},{value:"flower",label:"花"},{value:"stem",label:"茎"},{value:"seed",label:"种子"},{value:"fiber",label:"纤维"}],g=Ne(()=>Math.ceil(d.value/r.value)),k=Ne(()=>i.value.map(C=>({gene_id:C.gene_id,expression:C.expression}))),E=Ne(()=>o.value?v.filter(C=>C.value===o.value):v),T=()=>{f.value=1,W()},A=C=>{f.value=C,W()},q=C=>{const D=Math.min(C/10,1);if(D<.2){const I=D/.2,N=Math.floor(0),ee=Math.floor(255*I),ke=Math.floor(255-255*I);return`rgb(${N}, ${ee}, ${ke})`}else if(D<.4){const I=Math.floor(0),N=Math.floor(255),ee=Math.floor(0);return`rgb(${I}, ${N}, ${ee})`}else if(D<.6){const I=(D-.4)/.2,N=Math.floor(255*I),ee=Math.floor(255),ke=Math.floor(0);return`rgb(${N}, ${ee}, ${ke})`}else if(D<.8){const I=(D-.6)/.2,N=Math.floor(255),ee=Math.floor(255-102*I),ke=Math.floor(0);return`rgb(${N}, ${ee}, ${ke})`}else{const I=(D-.8)/.2,N=Math.floor(255),ee=Math.floor(153-153*I),ke=Math.floor(0);return`rgb(${N}, ${ee}, ${ke})`}},P=async()=>{if(await Jn(),console.log("开始绘制热图"),console.log("热图容器:",p.value),console.log("结果数据:",i.value),console.log("显示的组织:",E.value),!p.value){console.error("热图容器不存在");return}if(i.value.length===0){console.error("结果数据为空");return}if(E.value.length===0){console.error("显示的组织为空");return}p.value.innerHTML="",console.log("容器已清空");const C=document.createElement("div");C.style.width=`${E.value.length*45}px`,C.style.height=`${i.value.length*30}px`,C.style.position="relative",C.style.backgroundColor="#f0f0f0",C.style.border="1px solid #dee2e6",p.value.appendChild(C),console.log("创建热图元素，尺寸:",C.style.width,C.style.height);const D=Math.max(...i.value.flatMap(I=>E.value.map(N=>N.value&&I.expression[N.value]||0)));console.log("最大表达值:",D),i.value.forEach((I,N)=>{E.value.forEach((ee,ke)=>{if(!ee||!ee.value||!ee.label)return;const Me=I.expression[ee.value]||0,ge=document.createElement("div");ge.style.position="absolute",ge.style.left=`${ke*45}px`,ge.style.top=`${N*30}px`,ge.style.width="45px",ge.style.height="30px",ge.style.border="1px solid #eee",ge.style.boxSizing="border-box",ge.style.cursor="pointer";const et=q(Me);ge.style.backgroundColor=et,ge.addEventListener("mouseenter",Re=>{m.value={gene:I.gene_id,tissue:ee.label,value:Me},U(Re.clientX,Re.clientY)}),ge.addEventListener("mouseleave",()=>{j()}),C.appendChild(ge)})}),p.value.style.overflow="auto",p.value.style.border="1px solid #dee2e6",p.value.style.height="auto",p.value.style.minHeight="200px",p.value.style.padding="0",p.value.style.margin="0",console.log("热图绘制完成")},j=()=>{m.value=null,Y()},U=(C,D)=>{let I=document.getElementById("heatmap-hover-info");I||(I=document.createElement("div"),I.id="heatmap-hover-info",I.style.position="absolute",I.style.backgroundColor="rgba(0, 0, 0, 0.8)",I.style.color="white",I.style.padding="8px",I.style.borderRadius="4px",I.style.zIndex="1000",I.style.fontSize="12px",document.body.appendChild(I)),m.value&&(I.innerHTML=`
      <div>基因: ${m.value.gene}</div>
      <div>组织: ${m.value.tissue}</div>
      <div>表达值: ${m.value.value.toFixed(4)}</div>
    `,I.style.left=`${C+window.scrollX+10}px`,I.style.top=`${D+window.scrollY+10}px`,I.style.display="block")},Y=()=>{const C=document.getElementById("heatmap-hover-info");C&&(C.style.display="none")},se=()=>{p.value&&alert("热图下载功能需要html2canvas库，请先安装：npm install html2canvas")},Z=async()=>{console.log("开始测试热图绘制");const C=[{gene_id:"Test_Gene_1",gene_name:"测试基因1",expression:{leaf:2.5,root:3.8,flower:1.2,stem:4.5,seed:.8,fiber:5.2}},{gene_id:"Test_Gene_2",gene_name:"测试基因2",expression:{leaf:1.8,root:2.2,flower:3.5,stem:2.8,seed:4.2,fiber:1.5}},{gene_id:"Test_Gene_3",gene_name:"测试基因3",expression:{leaf:5,root:4.8,flower:3.2,stem:2.1,seed:.5,fiber:6}}];[...i.value];try{i.value=C,d.value=C.length,await Jn(),console.log("测试数据已设置，开始绘制热图"),await P(),console.log("热图绘制完成"),alert("热图测试完成，请查看控制台日志")}catch(D){console.error("热图测试失败:",D),alert("热图测试失败，请查看控制台日志")}};Rn([i,E],()=>{P()},{deep:!0});const W=async()=>{l.value=!0;try{const C=e.query.gene_list||"",D=e.query.tissue||"";a.value=C,o.value=D;const I=C.trim().split(/[,\s]+/).filter(ee=>ee.trim());if(I.length===0){i.value=[],d.value=0,l.value=!1;return}console.log("用户输入的基因ID:",I);const N=I.map((ee,ke)=>{const Me={};return v.forEach(ge=>{Me[ge.value]=Math.random()*10}),{gene_id:ee,gene_name:ee,expression:Me}});i.value=N,d.value=I.length,console.log("生成的结果数据:",i.value),await Jn(),console.log("DOM更新完成，绘制热图"),P()}catch(C){console.error("加载结果失败:",C)}finally{l.value=!1}};return Wt(()=>{W()}),(C,D)=>{const I=gt("router-link");return _(),b("div",_0,[D[15]||(D[15]=s("h2",{class:"mb-4"},"基因表达分析结果",-1)),s("form",{onSubmit:pe(T,["prevent"]),class:"mb-3"},[s("div",v0,[D[6]||(D[6]=s("div",{class:"col-auto"},[s("label",{for:"per_page",class:"col-form-label"},"每页显示:")],-1)),s("div",b0,[we(s("select",{name:"per_page",id:"per_page",class:"form-select","onUpdate:modelValue":D[0]||(D[0]=N=>r.value=N)},[...D[5]||(D[5]=[s("option",{value:"5"},"5",-1),s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],512),[[_t,r.value,void 0,{number:!0}]])]),D[7]||(D[7]=s("div",{class:"col-auto"},[s("span",{class:"form-text"},"条记录")],-1))])],32),l.value?(_(),b("div",y0,[...D[8]||(D[8]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])])):i.value.length>0?(_(),b("div",w0,[s("div",k0,[s("table",E0,[s("thead",x0,[s("tr",null,[D[9]||(D[9]=s("th",null,"Gene ID",-1)),D[10]||(D[10]=s("th",null,"基因名称",-1)),(_(),b(X,null,be(v,N=>s("th",{key:N.value},S(N.label),1)),64))])]),s("tbody",null,[(_(!0),b(X,null,be(i.value,N=>(_(),b("tr",{key:N.gene_id},[s("td",null,S(N.gene_id),1),s("td",null,S(N.gene_name||"-"),1),(_(),b(X,null,be(v,ee=>s("td",{key:ee.value},[N.expression[ee.value]!==void 0?(_(),b("div",C0,S(N.expression[ee.value].toFixed(4)),1)):(_(),b("div",S0,"-"))])),64))]))),128))])])]),s("div",A0,[D[13]||(D[13]=s("h4",null,"表达水平可视化",-1)),k.value.length>0?(_(),b("div",T0,[s("div",{class:"d-flex justify-content-between align-items-center mb-2"},[D[11]||(D[11]=s("h5",{class:"mb-0"},"Gene Expression Heatmap",-1)),s("div",null,[s("button",{class:"btn btn-sm btn-primary me-2",onClick:se},"下载图片"),s("button",{class:"btn btn-sm btn-warning",onClick:Z},"测试热图")])]),s("div",q0,[s("div",R0,[(_(!0),b(X,null,be(i.value,N=>(_(),b("div",{key:N.gene_id,class:"gene-label"},S(N.gene_id),1))),128))]),s("div",I0,[s("div",O0,[(_(!0),b(X,null,be(E.value,N=>(_(),b("div",{key:N.value,class:"tissue-label"},S(N.label),1))),128))]),s("div",{class:"heatmap",ref_key:"heatmapContainer",ref:p},null,512)])]),D[12]||(D[12]=s("div",{class:"color-scale mt-2"},[s("div",{class:"color-scale-label"},"Expression Level"),s("div",{class:"color-scale-gradient"}),s("div",{class:"color-scale-values"},[s("span",null,"0.0"),s("span",null,"2.0"),s("span",null,"4.0"),s("span",null,"6.0")])],-1))])):(_(),b("div",D0,"暂无可视化数据"))]),d.value>r.value?(_(),b("nav",$0,[s("ul",P0,[s("li",{class:De(["page-item",{disabled:f.value===1}])},[s("a",{class:"page-link",href:"#",onClick:D[1]||(D[1]=pe(N=>A(1),["prevent"])),"aria-disabled":f.value===1}," 首页 ",8,L0)],2),s("li",{class:De(["page-item",{disabled:f.value===1}])},[s("a",{class:"page-link",href:"#",onClick:D[2]||(D[2]=pe(N=>A(f.value-1),["prevent"])),"aria-disabled":f.value===1}," 上一页 ",8,N0)],2),s("li",M0,[s("span",F0," 第 "+S(f.value)+" 页 / 共 "+S(g.value)+" 页 ",1)]),s("li",{class:De(["page-item",{disabled:f.value===g.value}])},[s("a",{class:"page-link",href:"#",onClick:D[3]||(D[3]=pe(N=>A(f.value+1),["prevent"])),"aria-disabled":f.value===g.value}," 下一页 ",8,j0)],2),s("li",{class:De(["page-item",{disabled:f.value===g.value}])},[s("a",{class:"page-link",href:"#",onClick:D[4]||(D[4]=pe(N=>A(g.value),["prevent"])),"aria-disabled":f.value===g.value}," 末页 ",8,U0)],2)])])):K("",!0)])):(_(),b("div",B0,"暂无表达数据")),s("div",G0,[Q(I,{to:"/tools/gene-expression",class:"btn btn-secondary"},{default:_e(()=>[...D[14]||(D[14]=[ne("返回",-1)])]),_:1})])])}}}),K0=Pe(V0,[["__scopeId","data-v-3b552fa3"]]),z0={name:"GeneExpressionEfpView",data(){return{geneId:"",lowColor:"#0000FF",midColor:"#00FF00",highColor:"#FF0000",isLoading:!1,resultImage:"",showResultImage:!1,message:"",messageType:"",currentRegionsInfo:[],currentImageSize:{width:0,height:0},mappedRegions:[],tooltipVisible:!1,tooltipContent:{name:"",value:""},tooltipStyle:{left:"0px",top:"0px"}}},mounted(){document.getElementById("gene_id").addEventListener("keypress",t=>{t.key==="Enter"&&this.generateImage()}),window.addEventListener("resize",this.handleResize)},beforeUnmount(){window.removeEventListener("resize",this.handleResize)},methods:{fillExample(){const t="Ghjin_A01g000040";this.geneId=t},generateImage(){if(!this.geneId.trim()){this.showMessage("请输入基因ID","error");return}this.isLoading=!0,this.showResultImage=!1,this.hideMessage();const t={gene_id:this.geneId.trim(),low_color:this.lowColor,mid_color:this.midColor,high_color:this.highColor};fetch("/tools/gene_expression_in_eFP/generate-thermal-image/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":this.getCookie("csrftoken")},body:JSON.stringify(t)}).then(e=>e.ok?e.json():e.text().then(r=>{throw new Error(`HTTP错误 ${e.status}`)})).then(e=>{e.success?(this.currentRegionsInfo=e.regions_info||[],this.currentImageSize={width:e.image_width||0,height:e.image_height||0},this.resultImage=e.image,this.showResultImage=!0):this.showMessage("错误: "+e.error,"error")}).catch(e=>{this.showMessage("请求失败: "+e.message,"error")}).finally(()=>{this.isLoading=!1})},onImageLoad(){this.currentRegionsInfo.length>0&&this.currentImageSize.width>0&&this.createImageMap()},createImageMap(){const t=document.getElementById("result-image");if(!t||!t.complete||t.naturalWidth===0)return;const e=t.offsetWidth,r=t.offsetHeight,a=this.currentImageSize.width>0?e/this.currentImageSize.width:1,o=this.currentImageSize.height>0?r/this.currentImageSize.height:1;this.mappedRegions=this.currentRegionsInfo.filter(i=>i.polygon&&i.polygon.length>=3).map(i=>({coords:i.polygon.map(d=>[Math.round(d[0]*a),Math.round(d[1]*o)]).map(d=>`${d[0]},${d[1]}`).join(","),name:i.name,title:`${i.name}: ${typeof i.value=="number"?i.value.toFixed(4):i.value}`,value:i.value}))},showTooltip(t,e){let r;typeof e.value=="number"?r=e.value.toFixed(4):r=e.value,this.tooltipContent={name:e.name,value:r},this.tooltipVisible=!0,this.moveTooltip(t)},moveTooltip(t){const e=document.getElementById("result-image");if(!e||!e.complete||e.naturalWidth===0)return;e.getBoundingClientRect();const r=e.parentElement.getBoundingClientRect(),a=t.clientX-r.left+15,o=t.clientY-r.top+15;this.tooltipStyle={left:`${a}px`,top:`${o}px`}},hideTooltip(){this.tooltipVisible=!1},showMessage(t,e){this.message=t,this.messageType=e},hideMessage(){this.message=""},hideInitialImage(){},getCookie(t){let e=null;if(document.cookie&&document.cookie!==""){const r=document.cookie.split(";");for(let a=0;a<r.length;a++){const o=r[a].trim();if(o.substring(0,t.length+1)===t+"="){e=decodeURIComponent(o.substring(t.length+1));break}}}return e},updateColorBox(t,e){e==="low"?this.lowColor=t.target.value:e==="mid"?this.midColor=t.target.value:e==="high"&&(this.highColor=t.target.value),console.log(`Color updated: ${e} = ${t.target.value}`)},triggerColorInput(t){document.getElementById(`${t}-color`).click()},handleResize(){this.showResultImage&&this.currentRegionsInfo.length>0&&this.createImageMap()}}},H0={class:"container"},J0={class:"input-group"},W0=["disabled"],Q0={key:0,class:"loading",id:"loading"},X0={class:"color-picker-group"},Y0={class:"color-picker"},Z0={class:"color-picker"},eb={class:"color-picker"},tb={id:"result"},nb={class:"image-container"},sb=["src"],ob={name:"regionMap",id:"regionMap"},rb=["coords","alt","title","onMouseenter"];function ib(t,e,r,a,o,i){return _(),b("div",H0,[e[20]||(e[20]=s("h1",null,"gene_expression_in_eFP",-1)),s("div",J0,[we(s("input",{type:"text",id:"gene_id","onUpdate:modelValue":e[0]||(e[0]=l=>o.geneId=l),placeholder:"请输入基因ID，例如: Gh_A01G0001",autocomplete:"off"},null,512),[[Ye,o.geneId]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",id:"fillExample",onClick:e[1]||(e[1]=(...l)=>i.fillExample&&i.fillExample(...l))}," load example "),s("button",{onClick:e[2]||(e[2]=(...l)=>i.generateImage&&i.generateImage(...l)),id:"generate-btn",disabled:o.isLoading}," 生成热图 ",8,W0),o.isLoading?(_(),b("span",Q0,"正在生成热图...")):K("",!0)]),s("div",X0,[s("div",Y0,[e[16]||(e[16]=s("label",{for:"low-color"},"低值:",-1)),we(s("input",{type:"color",id:"low-color","onUpdate:modelValue":e[3]||(e[3]=l=>o.lowColor=l),class:"color-input",onChange:e[4]||(e[4]=l=>i.updateColorBox(l,"low"))},null,544),[[Ye,o.lowColor]]),s("div",{class:"color-box",style:ys({backgroundColor:o.lowColor}),onClick:e[5]||(e[5]=l=>i.triggerColorInput("low"))},null,4)]),s("div",Z0,[e[17]||(e[17]=s("label",{for:"mid-color"},"中值:",-1)),we(s("input",{type:"color",id:"mid-color","onUpdate:modelValue":e[6]||(e[6]=l=>o.midColor=l),class:"color-input",onChange:e[7]||(e[7]=l=>i.updateColorBox(l,"mid"))},null,544),[[Ye,o.midColor]]),s("div",{class:"color-box",style:ys({backgroundColor:o.midColor}),onClick:e[8]||(e[8]=l=>i.triggerColorInput("mid"))},null,4)]),s("div",eb,[e[18]||(e[18]=s("label",{for:"high-color"},"高值:",-1)),we(s("input",{type:"color",id:"high-color","onUpdate:modelValue":e[9]||(e[9]=l=>o.highColor=l),class:"color-input",onChange:e[10]||(e[10]=l=>i.updateColorBox(l,"high"))},null,544),[[Ye,o.highColor]]),s("div",{class:"color-box",style:ys({backgroundColor:o.highColor}),onClick:e[11]||(e[11]=l=>i.triggerColorInput("high"))},null,4)])]),o.showResultImage?K("",!0):(_(),b("img",{key:0,id:"initial-image",src:ua,alt:"初始热图模板",onError:e[12]||(e[12]=(...l)=>i.hideInitialImage&&i.hideInitialImage(...l))},null,32)),o.message?(_(),b("div",{key:1,id:"message",class:De(o.messageType)},S(o.message),3)):K("",!0),s("div",tb,[s("div",nb,[o.showResultImage?(_(),b("img",{key:0,id:"result-image",src:o.resultImage,alt:"热图结果",usemap:"#regionMap",onLoad:e[13]||(e[13]=(...l)=>i.onImageLoad&&i.onImageLoad(...l))},null,40,sb)):K("",!0),s("map",ob,[(_(!0),b(X,null,be(o.mappedRegions,(l,f)=>(_(),b("area",{key:f,shape:"poly",coords:l.coords,alt:l.name,title:l.title,onMouseenter:d=>i.showTooltip(d,l),onMousemove:e[14]||(e[14]=d=>i.moveTooltip(d)),onMouseleave:e[15]||(e[15]=(...d)=>i.hideTooltip&&i.hideTooltip(...d))},null,40,rb))),128))]),o.tooltipVisible?(_(),b("div",{key:1,id:"tooltip",class:"tooltip",style:ys(o.tooltipStyle)},[s("strong",null,S(o.tooltipContent.name),1),e[19]||(e[19]=s("br",null,null,-1)),ne(" 表达值: "+S(o.tooltipContent.value),1)],4)):K("",!0)])])])}const ab=Pe(z0,[["render",ib],["__scopeId","data-v-ee61d65d"]]),lb={class:"container mt-4"},cb={class:"form-group"},ub=["disabled"],db=["disabled"],hb={class:"d-flex justify-content-end mt-3"},fb=["disabled"],pb={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},mb={key:1},gb={__name:"KeggAnnotationView",setup(t){const e=F(""),r=F(!1),a=$n(),o=()=>{const l=`Kirkii_Juiced.00g000010
Kirkii_Juiced.00g000020
Kirkii_Juiced.00g000030
Kirkii_Juiced.00g000040
Kirkii_Juiced.00g000050
Kirkii_Juiced.00g000060
Kirkii_Juiced.00g000070
Kirkii_Juiced.00g000080
Kirkii_Juiced.00g000090
Kirkii_Juiced.00g000100
Kirkii_Juiced.00g000110
Kirkii_Juiced.00g000120
Kirkii_Juiced.00g000130
Kirkii_Juiced.00g000140
Kirkii_Juiced.00g000150
Kirkii_Juiced.00g000160
Kirkii_Juiced.00g000170
Kirkii_Juiced.00g000180
Kirkii_Juiced.00g000190
Kirkii_Juiced.00g000200
Kirkii_Juiced.00g000210
Kirkii_Juiced.00g000220
Kirkii_Juiced.00g000230`;e.value=l},i=async()=>{if(!e.value.trim()){alert("Please enter gene IDs");return}r.value=!0;try{const l=await St.post("/tools/kegg_annotation/api/start/",{gene_id:e.value});l.status==="success"&&l.task_id?a.push({path:"/tools/kegg-annotation/results",query:{task_id:l.task_id}}):alert("Error: "+(l.error||"Failed to get task ID"))}catch(l){console.error("Error submitting form:",l),alert("Error submitting form: "+(l.message||"Unknown error"))}finally{r.value=!1}};return(l,f)=>(_(),b("div",lb,[f[2]||(f[2]=s("h2",null,"KEGG Annotation Search",-1)),s("form",{onSubmit:pe(i,["prevent"])},[s("div",cb,[f[1]||(f[1]=s("label",{for:"gene_id"},"Enter Gene IDs (one per line or space/comma separated):",-1)),we(s("textarea",{id:"gene_id","onUpdate:modelValue":f[0]||(f[0]=d=>e.value=d),class:"form-control",rows:"5",disabled:r.value},null,8,ub),[[Ye,e.value]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",id:"fillExample",onClick:o,disabled:r.value}," load example ",8,db)]),s("div",hb,[s("button",{type:"submit",class:"btn btn-primary",disabled:r.value},[r.value?(_(),b("span",pb)):(_(),b("span",mb,"Search"))],8,fb)])],32)]))}},_b=Pe(gb,[["__scopeId","data-v-6f69a42c"]]);ca.register(...Du);const vb={class:"container mt-4"},bb={class:"d-flex justify-content-between align-items-center mb-4"},yb={key:0,class:"badge bg-info"},wb={key:0,class:"text-center py-4"},kb={key:1,class:"alert alert-danger",role:"alert"},Eb={key:2,class:"alert alert-warning",role:"alert"},xb={key:3},Cb={key:0,class:"mt-5"},Sb={class:"row g-2 align-items-center"},Ab={class:"col-auto"},Tb={class:"card"},qb={class:"card-header d-flex justify-content-between align-items-center"},Rb={class:"badge bg-primary"},Ib={class:"card-body p-0"},Ob={class:"table-responsive"},Db={class:"table table-striped table-bordered mb-0"},$b={key:0,"aria-label":"Page navigation"},Pb={class:"pagination justify-content-center mt-3 mb-0"},Lb=["onClick"],Nb={key:1,class:"text-center mt-2 mb-3"},Mb={class:"text-muted mb-0"},Fb=vt({__name:"KeggAnnotationResultView",setup(t){const e=Pn(),r=F([]),a=F(10),o=F(1),i=F(!0),l=F(null),f=F(!1),d=F(""),p=F(0),m=F(0),v=F(0),g=F(0),k=F({labels:[],data:[]}),E=Ne(()=>Math.ceil(m.value/a.value)),T=Ne(()=>(o.value-1)*a.value+1),A=Ne(()=>Math.min(o.value*a.value,m.value)),q=Ne(()=>{const W=(o.value-1)*a.value,C=W+a.value;return r.value.slice(W,C)}),P=Ne(()=>{const W=E.value,C=o.value,D=[];if(W<=5)for(let I=1;I<=W;I++)D.push(I);else if(C<=3)for(let I=1;I<=5;I++)D.push(I);else if(C>=W-2)for(let I=W-4;I<=W;I++)D.push(I);else for(let I=C-2;I<=C+2;I++)D.push(I);return D}),j=()=>{o.value=1,se()},U=()=>{o.value=1,se()},Y=W=>{W<1||W>E.value||(o.value=W,se())},se=async()=>{f.value=!0;try{const W=e.query.task_id;if(!W){d.value="缺少任务ID",i.value=!1;return}const C=await St.get("/tools/kegg_annotation/api/results/",{params:{task_id:W,page_size:a.value,page:o.value}});console.log("KEGG注释API响应:",C),C&&C.status==="success"?(r.value=C.results||[],m.value=C.total||0,v.value=C.total_genes||0,g.value=C.annotated_genes||0,C.chart_data?k.value={labels:C.chart_data.labels||[],data:C.chart_data.data||[]}:k.value={labels:[],data:[]},i.value=r.value.length>0,console.log("KEGG注释结果:",r.value),console.log("图表数据:",k.value),console.log("图表标签数量:",k.value.labels.length),console.log("图表数据数量:",k.value.data.length),Z()):C&&C.status==="processing"?setTimeout(()=>se(),1e3):(d.value=C.error||"获取结果失败",i.value=!1)}catch(W){d.value="获取结果失败: "+(W.message||W),console.error("Error fetching results:",W),i.value=!1}finally{f.value=!1}},Z=()=>{console.log("渲染KEGG通路分布图表..."),console.log("图表数据:",k.value);const W=document.getElementById("keggChart");if(!W){console.error("没有找到keggChart元素");return}if(l.value&&(l.value.destroy(),l.value=null),!k.value.labels||k.value.labels.length===0){console.log("没有图表数据，不渲染图表");return}l.value=new ca(W,{type:"bar",data:{labels:k.value.labels,datasets:[{label:"",data:k.value.data,backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,title:{display:!0,text:"Count"}},x:{title:{display:!0,text:""}}}}})};return Rn(()=>k.value,async W=>{W&&W.labels&&W.labels.length>0&&(await Jn(),Z())},{deep:!0}),Wt(async()=>{await se()}),(W,C)=>{const D=gt("router-link");return _(),b("div",vb,[s("div",bb,[C[5]||(C[5]=s("h2",null,"KEGG Annotation Results",-1)),p.value?(_(),b("span",yb,"Executed in "+S(p.value)+" seconds",1)):K("",!0)]),Q(D,{to:"/tools/kegg-annotation",class:"btn btn-secondary mb-4"},{default:_e(()=>[...C[6]||(C[6]=[ne("返回搜索",-1)])]),_:1}),f.value?(_(),b("div",wb,[...C[7]||(C[7]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])])):d.value?(_(),b("div",kb,S(d.value),1)):i.value?(_(),b("div",xb,[k.value.labels&&k.value.labels.length>0?(_(),b("div",Cb,[...C[8]||(C[8]=[s("h3",null,"KEGG Pathway",-1),s("div",{class:"chart-container",style:{height:"400px"}},[s("canvas",{id:"keggChart"})],-1)])])):K("",!0),s("form",{onSubmit:pe(j,["prevent"]),class:"mb-3"},[s("div",Sb,[C[10]||(C[10]=s("div",{class:"col-auto"},[s("label",{for:"pageSize",class:"col-form-label"},"每页显示:")],-1)),s("div",Ab,[we(s("select",{id:"pageSize","onUpdate:modelValue":C[0]||(C[0]=I=>a.value=I),class:"form-select",onChange:U},[...C[9]||(C[9]=[s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1),s("option",{value:"100"},"100",-1)])],544),[[_t,a.value,void 0,{number:!0}]])]),C[11]||(C[11]=s("div",{class:"col-auto"},[s("span",{class:"form-text"},"条记录")],-1))])],32),s("div",Tb,[s("div",qb,[C[12]||(C[12]=s("span",null,"Annotation Results",-1)),s("span",Rb,S(m.value)+" results",1)]),s("div",Ib,[s("div",Ob,[s("table",Db,[C[13]||(C[13]=s("thead",null,[s("tr",null,[s("th",null,"Chr"),s("th",null,"Start"),s("th",null,"End"),s("th",null,"ID"),s("th",null,"KO"),s("th",null,"Pathway Name")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(q.value,I=>(_(),b("tr",{key:I.ID},[s("td",null,S(I.Chr),1),s("td",null,S(I.Start),1),s("td",null,S(I.End),1),s("td",null,S(I.ID),1),s("td",null,S(I.match),1),s("td",null,S(I.Description),1)]))),128))])])]),E.value>1?(_(),b("nav",$b,[s("ul",Pb,[s("li",{class:De(["page-item",{disabled:o.value===1}])},[s("a",{class:"page-link",href:"#",onClick:C[1]||(C[1]=pe(I=>Y(1),["prevent"]))}," 首页 ")],2),s("li",{class:De(["page-item",{disabled:o.value===1}])},[s("a",{class:"page-link",href:"#",onClick:C[2]||(C[2]=pe(I=>Y(o.value-1),["prevent"]))}," 上一页 ")],2),(_(!0),b(X,null,be(P.value,I=>(_(),b("li",{key:I,class:De(["page-item",{active:I===o.value}])},[s("a",{class:"page-link",href:"#",onClick:pe(N=>Y(I),["prevent"])},S(I),9,Lb)],2))),128)),s("li",{class:De(["page-item",{disabled:o.value===E.value}])},[s("a",{class:"page-link",href:"#",onClick:C[3]||(C[3]=pe(I=>Y(o.value+1),["prevent"]))}," 下一页 ")],2),s("li",{class:De(["page-item",{disabled:o.value===E.value}])},[s("a",{class:"page-link",href:"#",onClick:C[4]||(C[4]=pe(I=>Y(E.value),["prevent"]))}," 末页 ")],2)])])):K("",!0),E.value>1?(_(),b("div",Nb,[s("p",Mb," Showing "+S(T.value)+" to "+S(A.value)+" of "+S(m.value)+" entries ",1)])):K("",!0)])])])):(_(),b("div",Eb," No results found. Please try with different gene IDs. "))])}}}),jb=Pe(Fb,[["__scopeId","data-v-7cf733fe"]]),Ub={class:"container mt-4"},Bb={class:"form-group"},Gb=["disabled"],Vb=["disabled"],Kb={class:"row g-3 mt-3"},zb={class:"col-md-6"},Hb=["disabled"],Jb={class:"col-md-6"},Wb=["disabled"],Qb={class:"d-flex justify-content-end mt-3"},Xb=["disabled"],Yb={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Zb={key:1},ey=vt({__name:"KeggEnrichmentView",setup(t){const e=F(""),r=F(.05),a=F(.05),o=F(!1),i=$n(),l=()=>{const d=`Kirkii_Juiced.00g000010
Kirkii_Juiced.00g000020
Kirkii_Juiced.00g000030
Kirkii_Juiced.00g000040
Kirkii_Juiced.00g000050
Kirkii_Juiced.00g000060
Kirkii_Juiced.00g000070
Kirkii_Juiced.00g000080
Kirkii_Juiced.00g000090
Kirkii_Juiced.00g000100
Kirkii_Juiced.00g000110
Kirkii_Juiced.00g000120
Kirkii_Juiced.00g000130
Kirkii_Juiced.00g000140
Kirkii_Juiced.00g000150
Kirkii_Juiced.00g000160
Kirkii_Juiced.00g000170
Kirkii_Juiced.00g000180
Kirkii_Juiced.00g000190
Kirkii_Juiced.00g000200
Kirkii_Juiced.00g000210
Kirkii_Juiced.00g000220
Kirkii_Juiced.00g000230
Kirkii_Juiced.00g000240
Kirkii_Juiced.00g000250
Kirkii_Juiced.00g000260
Kirkii_Juiced.00g000270
Kirkii_Juiced.00g000280
Kirkii_Juiced.00g000290
Kirkii_Juiced.00g000300`;e.value=d},f=async()=>{if(!e.value.trim()){alert("请输入基因ID");return}if(r.value<0||r.value>1){alert("P值阈值必须在0到1之间");return}if(a.value<0||a.value>1){alert("Q值阈值必须在0到1之间");return}o.value=!0;try{const d=await St.post("/tools/kegg_enrichment/api/start/",{gene_list:e.value,p_value_threshold:r.value});d&&d.status==="success"&&d.task_id&&i.push({path:"/tools/kegg-enrichment/results",query:{task_id:d.task_id}})}catch(d){console.error("提交表单时出错:",d),alert("提交表单时出错: "+(d.message||"未知错误"))}finally{o.value=!1}};return(d,p)=>(_(),b("div",Ub,[p[6]||(p[6]=s("h2",null,"KEGG通路富集分析",-1)),s("form",{onSubmit:pe(f,["prevent"])},[s("div",Bb,[p[3]||(p[3]=s("label",{for:"gene_list"},"输入基因ID（每行一个或空格/逗号分隔）:",-1)),we(s("textarea",{id:"gene_list","onUpdate:modelValue":p[0]||(p[0]=m=>e.value=m),class:"form-control",rows:"10",placeholder:"请在此输入基因ID...",disabled:o.value},null,8,Gb),[[Ye,e.value]]),s("button",{type:"button",class:"btn btn-sm btn-outline-secondary mt-2",onClick:l,disabled:o.value}," 加载示例 ",8,Vb)]),s("div",Kb,[s("div",zb,[p[4]||(p[4]=s("label",{for:"p_value_threshold",class:"form-label"},"P值阈值:",-1)),we(s("input",{type:"number",id:"p_value_threshold","onUpdate:modelValue":p[1]||(p[1]=m=>r.value=m),class:"form-control",min:"0",max:"1",step:"0.001",disabled:o.value},null,8,Hb),[[Ye,r.value,void 0,{number:!0}]])]),s("div",Jb,[p[5]||(p[5]=s("label",{for:"q_value_threshold",class:"form-label"},"Q值阈值:",-1)),we(s("input",{type:"number",id:"q_value_threshold","onUpdate:modelValue":p[2]||(p[2]=m=>a.value=m),class:"form-control",min:"0",max:"1",step:"0.001",disabled:o.value},null,8,Wb),[[Ye,a.value,void 0,{number:!0}]])])]),s("div",Qb,[s("button",{type:"submit",class:"btn btn-primary",disabled:o.value},[o.value?(_(),b("span",Yb)):(_(),b("span",Zb,"提交"))],8,Xb)])],32)]))}}),ty=Pe(ey,[["__scopeId","data-v-2da975a3"]]),ny={class:"container mt-4"},sy={key:0,class:"text-center py-4"},oy={key:1,class:"alert alert-danger",role:"alert"},ry={key:2},iy={key:0,class:"alert alert-warning mb-4",role:"alert"},ay={key:1,class:"mb-4"},ly={class:"text-center"},cy=["src"],uy={key:2},dy={class:"row g-2 align-items-center"},hy={class:"col-auto"},fy={class:"mb-5"},py={class:"text-danger"},my={class:"text-muted"},gy={class:"table-responsive"},_y={class:"table table-bordered table-hover"},vy=["title"],by={key:0,"aria-label":"Page navigation"},yy={class:"pagination justify-content-center",id:"pagination-results"},wy={class:"page-item active"},ky={class:"page-link"},Ey=vt({__name:"KeggEnrichmentResultView",setup(t){const e=Pn(),r=F([]),a=F(10),o=F(1),i=F(!0),l=F(!1),f=F(""),d=F(0),p=F(null),m=F(0),v=Ne(()=>Math.ceil(m.value/a.value)),g=Ne(()=>{const q=(o.value-1)*a.value,P=q+a.value;return r.value.slice(q,P)}),k=()=>{o.value=1,A()},E=()=>{o.value=1,A()},T=q=>{q<1||q>v.value||(o.value=q,A())},A=async()=>{l.value=!0;try{const q=e.query.task_id;if(!q){f.value="缺少任务ID",i.value=!1;return}const P=await St.get("/tools/kegg_enrichment/api/results/",{params:{task_id:q,page_size:a.value,page:o.value}});console.log("KEGG富集API响应:",P),typeof P=="object"&&P!==null?P.status==="success"?(r.value=P.results||[],m.value=P.total||r.value.length,i.value=r.value.length>0,d.value=P.execution_time||0,p.value=P.plot_image||null):P.status==="processing"?setTimeout(()=>A(),1e3):(f.value=P.error||"获取结果失败",i.value=!1):(f.value="无效的API响应",i.value=!1)}catch(q){f.value="获取结果失败: "+(q.message||q),console.error("Error fetching results:",q),i.value=!1}finally{l.value=!1}};return Wt(async()=>{await A()}),(q,P)=>{const j=gt("router-link");return _(),b("div",ny,[P[13]||(P[13]=s("h2",{class:"mb-4"},"KEGG通路富集分析结果",-1)),Q(j,{to:"/tools/kegg-enrichment",class:"btn btn-secondary mb-3"},{default:_e(()=>[...P[5]||(P[5]=[ne("返回",-1)])]),_:1}),l.value?(_(),b("div",sy,[...P[6]||(P[6]=[s("div",{class:"spinner-border",role:"status"},[s("span",{class:"sr-only"},"加载中...")],-1)])])):f.value?(_(),b("div",oy,S(f.value),1)):(_(),b("div",ry,[i.value?K("",!0):(_(),b("div",iy," 未找到显著的KEGG通路富集结果 ")),p.value?(_(),b("div",ay,[P[7]||(P[7]=s("h4",{class:"mb-3"},"KEGG Enrichment Plot",-1)),s("div",ly,[s("img",{src:"data:image/png;base64,"+p.value,alt:"KEGG Enrichment Plot",class:"img-fluid"},null,8,cy)])])):K("",!0),i.value?(_(),b("div",uy,[s("form",{onSubmit:pe(k,["prevent"]),class:"mb-3",id:"per-page-form"},[s("div",dy,[P[9]||(P[9]=s("div",{class:"col-auto"},[s("label",{for:"pageSize",class:"col-form-label"},"每页显示:")],-1)),s("div",hy,[we(s("select",{id:"pageSize","onUpdate:modelValue":P[0]||(P[0]=U=>a.value=U),class:"form-select",onChange:E},[...P[8]||(P[8]=[s("option",{value:"5"},"5",-1),s("option",{value:"10"},"10",-1),s("option",{value:"25"},"25",-1),s("option",{value:"50"},"50",-1)])],544),[[_t,a.value,void 0,{number:!0}]])]),P[10]||(P[10]=s("div",{class:"col-auto"},[s("span",{class:"form-text"},"条记录")],-1))])],32),s("div",fy,[s("h4",py,[P[11]||(P[11]=ne(" KEGG通路 ",-1)),s("small",my,"(共 "+S(m.value)+" 条)",1)]),s("div",gy,[s("table",_y,[P[12]||(P[12]=s("thead",{class:"bg-light"},[s("tr",null,[s("th",null,"通路ID"),s("th",null,"描述"),s("th",null,"GeneRatio"),s("th",null,"BgRatio"),s("th",null,"RichFactor"),s("th",null,"FoldEnrichment"),s("th",null,"zScore"),s("th",null,"pvalue")])],-1)),s("tbody",null,[(_(!0),b(X,null,be(g.value,U=>(_(),b("tr",{key:U.pathway_id},[s("td",null,S(U.pathway_id),1),s("td",null,[ne(S(U.description.name||"")+" ",1),U.description.definition?(_(),b("i",{key:0,class:"fas fa-info-circle text-muted","data-bs-toggle":"tooltip",title:U.description.definition},null,8,vy)):K("",!0)]),s("td",null,S(U.gene_ratio),1),s("td",null,S(U.bg_ratio),1),s("td",null,S(U.rich_factor.toFixed(4)),1),s("td",null,S(U.fold_enrichment.toFixed(4)),1),s("td",null,S(U.z_score.toFixed(4)),1),s("td",null,S(U.p_value.toFixed(6)),1)]))),128))])])]),v.value>1?(_(),b("nav",by,[s("ul",yy,[s("li",{class:De(["page-item",{disabled:o.value===1}])},[s("a",{class:"page-link",href:"#",onClick:P[1]||(P[1]=pe(U=>T(1),["prevent"]))}," 首页 ")],2),s("li",{class:De(["page-item",{disabled:o.value===1}])},[s("a",{class:"page-link",href:"#",onClick:P[2]||(P[2]=pe(U=>T(o.value-1),["prevent"]))}," 上一页 ")],2),s("li",wy,[s("span",ky," 第 "+S(o.value)+" 页 / 共 "+S(v.value)+" 页 ",1)]),s("li",{class:De(["page-item",{disabled:o.value===v.value}])},[s("a",{class:"page-link",href:"#",onClick:P[3]||(P[3]=pe(U=>T(o.value+1),["prevent"]))}," 下一页 ")],2),s("li",{class:De(["page-item",{disabled:o.value===v.value}])},[s("a",{class:"page-link",href:"#",onClick:P[4]||(P[4]=pe(U=>T(v.value),["prevent"]))}," 末页 ")],2)])])):K("",!0)])])):K("",!0)]))])}}}),xy=Pe(Ey,[["__scopeId","data-v-67ac7871"]]),Cy={name:"TFView",components:{QuestionFilled:gu,VideoPlay:mu,Search:pu},setup(){const t=F([]),e=F({multiple:!1,checkStrictly:!1,expandTrigger:"click",showAllLevels:!1}),r=F([]),a=F(!1),o=async()=>{a.value=!0;try{const Z=await(await fetch("/Browse/api/species/")).json();if(Z.status==="success"){const W=Z.data;console.log("speciesData:",W);const C={};W.forEach(D=>{const I=D.Genome_type||"undefined";C[I]||(C[I]=[]),C[I].push({value:D.name||D.Cotton_Species,label:D.name||D.Cotton_Species})}),console.log("genomes:",C),r.value=Object.entries(C).map(([D,I])=>({value:D,label:D,children:I}))}}catch(se){console.error("Error fetching genomes:",se)}finally{a.value=!1}},i=F([]),l=F([]),f=F(""),d=F(1),p=F(10),m=F(0),v=F(!1),g=Ne(()=>{const se=(d.value-1)*p.value,Z=se+p.value;return l.value.slice(se,Z)}),k=async()=>{try{const Z=await(await fetch("/Browse/api/tf/families/")).json();Z.status==="success"&&(i.value=Z.data.map((W,C)=>({name:W.name,count:W.count,checked:C===0})),E())}catch(se){console.error("Error fetching TF families:",se)}},E=async()=>{v.value=!0;try{const se=new URLSearchParams;t.value.length>0&&se.append("genome",t.value[t.value.length-1]);const Z=i.value.filter(D=>D.checked).map(D=>D.name);Z.length>0&&se.append("family",Z.join(",")),f.value&&se.append("search",f.value);const C=await(await fetch(`/Browse/api/tf/?${se}`)).json();C.status==="success"&&(l.value=C.data,m.value=C.total||0)}catch(se){console.error("Error fetching TF data:",se)}finally{v.value=!1}},T=()=>{d.value=1,E()},A=()=>{d.value=1,E()},q=()=>{d.value=1,E()},P=()=>{},j=()=>{d.value=1},U=se=>{console.log("Selected row:",se)},Y=se=>{console.log("Gene link clicked:",se),Ha.push({name:"idSearchResults",query:{id:se}})};return Rn(p,()=>{d.value=1}),Wt(()=>{o(),k()}),{selectedGenome:t,genomeOptions:r,genomeLoading:a,cascaderProps:e,tfFamilies:i,searchQuery:f,currentPage:d,pageSize:p,totalCount:m,tfData:l,paginatedTFData:g,loading:v,handleGenomeChange:T,handleFamilyChange:A,handleSearch:q,handlePageChange:P,handlePageSizeChange:j,handleRowClick:U,handleGeneClick:Y}}},Sy={class:"container-fluid"},Ay={class:"row"},Ty={class:"col-md-3"},qy={class:"sidebar"},Ry={class:"mt-4"},Iy={class:"sidebar-title"},Oy={class:"col-md-9"},Dy={class:"main-content"},$y={class:"tf-families mt-4"},Py={class:"row"},Ly={class:"tf-table mt-4"},Ny={class:"d-flex justify-content-between align-items-center mb-3"},My={class:"table-pagination"},Fy={class:"table-search"},jy={class:"d-flex justify-content-between align-items-center mt-3"},Uy={class:"table-info"};function By(t,e,r,a,o,i){const l=gt("QuestionFilled"),f=sa,d=gt("VideoPlay"),p=_u,m=bu,v=ra,g=vu,k=aa,E=la,T=yu,A=ia;return _(),b("div",Sy,[s("div",Ay,[s("div",Ty,[s("div",qy,[s("h3",null,[e[6]||(e[6]=ne("Transcription factors ",-1)),Q(f,{class:"info-icon"},{default:_e(()=>[Q(l)]),_:1})]),s("div",Ry,[s("h4",Iy,[Q(f,{class:"play-icon"},{default:_e(()=>[Q(d)]),_:1}),e[7]||(e[7]=ne(" Select a genome",-1))]),Q(p,{modelValue:a.selectedGenome,"onUpdate:modelValue":e[0]||(e[0]=q=>a.selectedGenome=q),options:a.genomeOptions,props:a.cascaderProps,placeholder:"Select genome",class:"w-100 mt-2",onChange:a.handleGenomeChange,loading:a.genomeLoading},null,8,["modelValue","options","props","onChange","loading"])])])]),s("div",Oy,[s("div",Dy,[e[9]||(e[9]=s("h2",null,"Annotated transcription factors",-1)),s("div",$y,[s("div",Py,[(_(!0),b(X,null,be(a.tfFamilies,q=>(_(),b("div",{class:"col-md-3",key:q.name},[Q(m,{modelValue:q.checked,"onUpdate:modelValue":P=>q.checked=P,class:"tf-checkbox",onChange:a.handleFamilyChange},{default:_e(()=>[ne(S(q.name)+"("+S(q.count)+") ",1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]))),128))])]),s("div",Ly,[e[8]||(e[8]=s("h4",{class:"table-title"},"Click on a row to check the details of the selected gene",-1)),s("div",Ny,[s("div",My,[Q(v,{"current-page":a.currentPage,"onUpdate:currentPage":e[1]||(e[1]=q=>a.currentPage=q),"page-size":a.pageSize,"onUpdate:pageSize":[e[2]||(e[2]=q=>a.pageSize=q),a.handlePageSizeChange],"page-sizes":[10,20,50,100],layout:"sizes",total:a.totalCount,onCurrentChange:a.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange","onUpdate:pageSize"])]),s("div",Fy,[Q(g,{modelValue:a.searchQuery,"onUpdate:modelValue":e[3]||(e[3]=q=>a.searchQuery=q),placeholder:"Search","prefix-icon":"Search",size:"small",class:"w-100",onInput:a.handleSearch,clearable:""},null,8,["modelValue","onInput"])])]),a.loading?(_(),Cs(k,{key:0,rows:10,animated:""})):(_(),Cs(A,{key:1,data:a.paginatedTFData,style:{width:"100%"},onRowClick:a.handleRowClick,stripe:"",border:""},{default:_e(()=>[Q(E,{prop:"TF_name",label:"TF Name","min-width":"50"}),Q(E,{prop:"TF_class",label:"TF Class","min-width":"50"}),Q(E,{prop:"TF_gene",label:"Gene","min-width":"120"},{default:_e(q=>[Q(T,{type:"primary",underline:!1,onClick:P=>a.handleGeneClick(q.row.TF_gene),class:"gene-link"},{default:_e(()=>[ne(S(q.row.TF_gene),1)]),_:2},1032,["onClick"])]),_:1}),Q(E,{prop:"TF_genome",label:"Genome","min-width":"120"})]),_:1},8,["data","onRowClick"])),s("div",jy,[s("span",Uy," Showing "+S((a.currentPage-1)*a.pageSize+1)+" to "+S(Math.min(a.currentPage*a.pageSize,a.totalCount))+" of "+S(a.totalCount)+" entries ",1),Q(v,{"current-page":a.currentPage,"onUpdate:currentPage":e[4]||(e[4]=q=>a.currentPage=q),"page-size":a.pageSize,"onUpdate:pageSize":[e[5]||(e[5]=q=>a.pageSize=q),a.handlePageSizeChange],"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:a.totalCount,onCurrentChange:a.handlePageChange},null,8,["current-page","page-size","total","onCurrentChange","onUpdate:pageSize"])])])])])])])}const Gy=Pe(Cy,[["render",By],["__scopeId","data-v-70e3e752"]]),Mt={props:["title"],template:`<div class="container mt-4">
    <h1>{{ title }}</h1>
    <p>此页面正在开发中...</p>
  </div>`},Vy=[{path:"/",name:"home",component:yh},{path:"/browse/genome",name:"BrowseGenome",component:xh},{path:"/browse/species",name:"BrowseSpecies",component:()=>({...Mt,propsData:{title:"浏览物种"}})},{path:"/browse/tf",name:"BrowseTF",component:Gy},{path:"/jbrowse",name:"jbrowse",component:Og},{path:"/tools/id-search",name:"idSearch",component:_p},{path:"/tools/id-search/results",name:"idSearchResults",component:Qm},{path:"/tools/id-search/id-search-summary/",name:"idSearchSummary",component:wg},{path:"/tools/blastp",name:"Blastp",component:s_},{path:"/tools/blastp/results",name:"blastpResults",component:K_},{path:"/tools/go-enrichment",name:"GoEnrichment",component:nv},{path:"/tools/go-enrichment/results",name:"goEnrichmentResults",component:Pv},{path:"/tools/go-annotation",name:"GoAnnotation",component:Uv},{path:"/tools/go-annotation/results",name:"goAnnotationResults",component:c0},{path:"/tools/kegg-annotation",name:"KeggAnnotation",component:_b},{path:"/tools/kegg-annotation/results",name:"KeggAnnotationResults",component:jb},{path:"/tools/kegg-enrichment",name:"KeggEnrichment",component:ty},{path:"/tools/kegg-enrichment/results",name:"KeggEnrichmentResults",component:xy},{path:"/tools/heatmap",name:"Heatmap",component:()=>({...Mt,propsData:{title:"热图分析"}})},{path:"/tools/gene-expression",name:"GeneExpression",component:g0},{path:"/tools/gene-expression/results",name:"geneExpressionResults",component:K0},{path:"/tools/gene-expression-efp",name:"GeneExpressionEfp",component:ab},{path:"/tools/ks-calculator",name:"KsCalculator",component:()=>({...Mt,propsData:{title:"KS计算器"}})},{path:"/tools/ks-calculator/results",name:"KsCalculatorResults",component:()=>({...Mt,propsData:{title:"KS计算器结果"}})},{path:"/tools/orthogroup",name:"Orthogroup",component:()=>({...Mt,propsData:{title:"Orthogroup分析"}})},{path:"/tools/orthogroup/results",name:"OrthogroupResults",component:()=>({...Mt,propsData:{title:"Orthogroup分析结果"}})},{path:"/tools/msa",name:"Msa",component:()=>({...Mt,propsData:{title:"多序列比对"}})},{path:"/tools/msa/results",name:"MsaResults",component:()=>({...Mt,propsData:{title:"多序列比对结果"}})},{path:"/tools/circos",name:"Circos",component:()=>({...Mt,propsData:{title:"Circos可视化"}})},{path:"/tools/circos/results",name:"CircosResults",component:()=>({...Mt,propsData:{title:"Circos可视化结果"}})},{path:"/download",name:"Download",component:Lg},{path:"/contact-us",name:"Contact_us",component:jg},{path:"/about-us",name:"About_us",component:Vg}],Ha=sh({history:Pd("/"),routes:Vy});const Ky=Symbol();var na;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(na||(na={}));function zy(){const t=wu(!0),e=t.run(()=>F({}));let r=[],a=[];const o=ku({install(i){o._a=i,i.provide(Ky,o),i.config.globalProperties.$pinia=o,a.forEach(l=>r.push(l)),a=[]},use(i){return this._a?r.push(i):a.push(i),this},_p:r,_a:null,_e:t,_s:new Map,state:e});return o}const Hy=zy(),Uo=Eu(Xu),Bo=Ue.create({baseURL:"http://localhost:8000",timeout:1e4,withCredentials:!0});Bo.interceptors.request.use(t=>{const e=document.cookie.match(/csrftoken=([^;]+)/)?.[1];return e&&(t.headers["X-CSRFToken"]=e),t},t=>Promise.reject(t));Bo.interceptors.response.use(t=>t,t=>Promise.reject(t));Uo.config.globalProperties.$uuid={v4:jo};Uo.config.globalProperties.$http=Bo;Uo.use(Hy).use(Ha).mount("#app");(function(t,e){typeof Ja=="object"&&typeof Do<"u"?Do.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).bootstrap=e()})(void 0,function(){const t=new Map,e={set(u,n,c){t.has(u)||t.set(u,new Map);const h=t.get(u);h.has(n)||h.size===0?h.set(n,c):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(h.keys())[0]}.`)},get:(u,n)=>t.has(u)&&t.get(u).get(n)||null,remove(u,n){if(!t.has(u))return;const c=t.get(u);c.delete(n),c.size===0&&t.delete(u)}},r="transitionend",a=u=>(u&&window.CSS&&window.CSS.escape&&(u=u.replace(/#([^\s"#']+)/g,(n,c)=>`#${CSS.escape(c)}`)),u),o=u=>u==null?`${u}`:Object.prototype.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase(),i=u=>{u.dispatchEvent(new Event(r))},l=u=>!(!u||typeof u!="object")&&(u.jquery!==void 0&&(u=u[0]),u.nodeType!==void 0),f=u=>l(u)?u.jquery?u[0]:u:typeof u=="string"&&u.length>0?document.querySelector(a(u)):null,d=u=>{if(!l(u)||u.getClientRects().length===0)return!1;const n=getComputedStyle(u).getPropertyValue("visibility")==="visible",c=u.closest("details:not([open])");if(!c)return n;if(c!==u){const h=u.closest("summary");if(h&&h.parentNode!==c||h===null)return!1}return n},p=u=>!u||u.nodeType!==Node.ELEMENT_NODE||!!u.classList.contains("disabled")||(u.disabled!==void 0?u.disabled:u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false"),m=u=>{if(!document.documentElement.attachShadow)return null;if(typeof u.getRootNode=="function"){const n=u.getRootNode();return n instanceof ShadowRoot?n:null}return u instanceof ShadowRoot?u:u.parentNode?m(u.parentNode):null},v=()=>{},g=u=>{u.offsetHeight},k=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],T=()=>document.documentElement.dir==="rtl",A=u=>{var n;n=()=>{const c=k();if(c){const h=u.NAME,y=c.fn[h];c.fn[h]=u.jQueryInterface,c.fn[h].Constructor=u,c.fn[h].noConflict=()=>(c.fn[h]=y,u.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const c of E)c()}),E.push(n)):n()},q=(u,n=[],c=u)=>typeof u=="function"?u.call(...n):c,P=(u,n,c=!0)=>{if(!c)return void q(u);const h=(O=>{if(!O)return 0;let{transitionDuration:L,transitionDelay:B}=window.getComputedStyle(O);const H=Number.parseFloat(L),J=Number.parseFloat(B);return H||J?(L=L.split(",")[0],B=B.split(",")[0],1e3*(Number.parseFloat(L)+Number.parseFloat(B))):0})(n)+5;let y=!1;const w=({target:O})=>{O===n&&(y=!0,n.removeEventListener(r,w),q(u))};n.addEventListener(r,w),setTimeout(()=>{y||i(n)},h)},j=(u,n,c,h)=>{const y=u.length;let w=u.indexOf(n);return w===-1?!c&&h?u[y-1]:u[0]:(w+=c?1:-1,h&&(w=(w+y)%y),u[Math.max(0,Math.min(w,y-1))])},U=/[^.]*(?=\..*)\.|.*/,Y=/\..*/,se=/::\d+$/,Z={};let W=1;const C={mouseenter:"mouseover",mouseleave:"mouseout"},D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function I(u,n){return n&&`${n}::${W++}`||u.uidEvent||W++}function N(u){const n=I(u);return u.uidEvent=n,Z[n]=Z[n]||{},Z[n]}function ee(u,n,c=null){return Object.values(u).find(h=>h.callable===n&&h.delegationSelector===c)}function ke(u,n,c){const h=typeof n=="string",y=h?c:n||c;let w=Re(u);return D.has(w)||(w=u),[h,y,w]}function Me(u,n,c,h,y){if(typeof n!="string"||!u)return;let[w,O,L]=ke(n,c,h);n in C&&(O=(ae=>function(ie){if(!ie.relatedTarget||ie.relatedTarget!==ie.delegateTarget&&!ie.delegateTarget.contains(ie.relatedTarget))return ae.call(this,ie)})(O));const B=N(u),H=B[L]||(B[L]={}),J=ee(H,O,w?c:null);if(J)return void(J.oneOff=J.oneOff&&y);const V=I(O,n.replace(U,"")),de=w?(function(oe,ae,ie){return function le(Te){const Oe=oe.querySelectorAll(ae);for(let{target:me}=Te;me&&me!==this;me=me.parentNode)for(const ye of Oe)if(ye===me)return Je(Te,{delegateTarget:me}),le.oneOff&&$.off(oe,Te.type,ae,ie),ie.apply(me,[Te])}})(u,c,O):(function(oe,ae){return function ie(le){return Je(le,{delegateTarget:oe}),ie.oneOff&&$.off(oe,le.type,ae),ae.apply(oe,[le])}})(u,O);de.delegationSelector=w?c:null,de.callable=O,de.oneOff=y,de.uidEvent=V,H[V]=de,u.addEventListener(L,de,w)}function ge(u,n,c,h,y){const w=ee(n[c],h,y);w&&(u.removeEventListener(c,w,!!y),delete n[c][w.uidEvent])}function et(u,n,c,h){const y=n[c]||{};for(const[w,O]of Object.entries(y))w.includes(h)&&ge(u,n,c,O.callable,O.delegationSelector)}function Re(u){return u=u.replace(Y,""),C[u]||u}const $={on(u,n,c,h){Me(u,n,c,h,!1)},one(u,n,c,h){Me(u,n,c,h,!0)},off(u,n,c,h){if(typeof n!="string"||!u)return;const[y,w,O]=ke(n,c,h),L=O!==n,B=N(u),H=B[O]||{},J=n.startsWith(".");if(w===void 0){if(J)for(const V of Object.keys(B))et(u,B,V,n.slice(1));for(const[V,de]of Object.entries(H)){const oe=V.replace(se,"");L&&!n.includes(oe)||ge(u,B,O,de.callable,de.delegationSelector)}}else{if(!Object.keys(H).length)return;ge(u,B,O,w,y?c:null)}},trigger(u,n,c){if(typeof n!="string"||!u)return null;const h=k();let y=null,w=!0,O=!0,L=!1;n!==Re(n)&&h&&(y=h.Event(n,c),h(u).trigger(y),w=!y.isPropagationStopped(),O=!y.isImmediatePropagationStopped(),L=y.isDefaultPrevented());const B=Je(new Event(n,{bubbles:w,cancelable:!0}),c);return L&&B.preventDefault(),O&&u.dispatchEvent(B),B.defaultPrevented&&y&&y.preventDefault(),B}};function Je(u,n={}){for(const[c,h]of Object.entries(n))try{u[c]=h}catch{Object.defineProperty(u,c,{configurable:!0,get:()=>h})}return u}function Ve(u){if(u==="true")return!0;if(u==="false")return!1;if(u===Number(u).toString())return Number(u);if(u===""||u==="null")return null;if(typeof u!="string")return u;try{return JSON.parse(decodeURIComponent(u))}catch{return u}}function We(u){return u.replace(/[A-Z]/g,n=>`-${n.toLowerCase()}`)}const Be={setDataAttribute(u,n,c){u.setAttribute(`data-bs-${We(n)}`,c)},removeDataAttribute(u,n){u.removeAttribute(`data-bs-${We(n)}`)},getDataAttributes(u){if(!u)return{};const n={},c=Object.keys(u.dataset).filter(h=>h.startsWith("bs")&&!h.startsWith("bsConfig"));for(const h of c){let y=h.replace(/^bs/,"");y=y.charAt(0).toLowerCase()+y.slice(1),n[y]=Ve(u.dataset[h])}return n},getDataAttribute:(u,n)=>Ve(u.getAttribute(`data-bs-${We(n)}`))};class Ke{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(n){return n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n}_mergeConfigObj(n,c){const h=l(c)?Be.getDataAttribute(c,"config"):{};return{...this.constructor.Default,...typeof h=="object"?h:{},...l(c)?Be.getDataAttributes(c):{},...typeof n=="object"?n:{}}}_typeCheckConfig(n,c=this.constructor.DefaultType){for(const[h,y]of Object.entries(c)){const w=n[h],O=l(w)?"element":o(w);if(!new RegExp(y).test(O))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${h}" provided type "${O}" but expected type "${y}".`)}}}class Le extends Ke{constructor(n,c){super(),(n=f(n))&&(this._element=n,this._config=this._getConfig(c),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY);for(const n of Object.getOwnPropertyNames(this))this[n]=null}_queueCallback(n,c,h=!0){P(n,c,h)}_getConfig(n){return n=this._mergeConfigObj(n,this._element),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}static getInstance(n){return e.get(f(n),this.DATA_KEY)}static getOrCreateInstance(n,c={}){return this.getInstance(n)||new this(n,typeof c=="object"?c:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(n){return`${n}${this.EVENT_KEY}`}}const ct=u=>{let n=u.getAttribute("data-bs-target");if(!n||n==="#"){let c=u.getAttribute("href");if(!c||!c.includes("#")&&!c.startsWith("."))return null;c.includes("#")&&!c.startsWith("#")&&(c=`#${c.split("#")[1]}`),n=c&&c!=="#"?c.trim():null}return n?n.split(",").map(c=>a(c)).join(","):null},x={find:(u,n=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(n,u)),findOne:(u,n=document.documentElement)=>Element.prototype.querySelector.call(n,u),children:(u,n)=>[].concat(...u.children).filter(c=>c.matches(n)),parents(u,n){const c=[];let h=u.parentNode.closest(n);for(;h;)c.push(h),h=h.parentNode.closest(n);return c},prev(u,n){let c=u.previousElementSibling;for(;c;){if(c.matches(n))return[c];c=c.previousElementSibling}return[]},next(u,n){let c=u.nextElementSibling;for(;c;){if(c.matches(n))return[c];c=c.nextElementSibling}return[]},focusableChildren(u){const n=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(c=>`${c}:not([tabindex^="-"])`).join(",");return this.find(n,u).filter(c=>!p(c)&&d(c))},getSelectorFromElement(u){const n=ct(u);return n&&x.findOne(n)?n:null},getElementFromSelector(u){const n=ct(u);return n?x.findOne(n):null},getMultipleElementsFromSelector(u){const n=ct(u);return n?x.find(n):[]}},z=(u,n="hide")=>{const c=`click.dismiss${u.EVENT_KEY}`,h=u.NAME;$.on(document,c,`[data-bs-dismiss="${h}"]`,function(y){if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),p(this))return;const w=x.getElementFromSelector(this)||this.closest(`.${h}`);u.getOrCreateInstance(w)[n]()})},G=".bs.alert",te=`close${G}`,he=`closed${G}`;class Se extends Le{static get NAME(){return"alert"}close(){if($.trigger(this._element,te).defaultPrevented)return;this._element.classList.remove("show");const n=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,n)}_destroyElement(){this._element.remove(),$.trigger(this._element,he),this.dispose()}static jQueryInterface(n){return this.each(function(){const c=Se.getOrCreateInstance(this);if(typeof n=="string"){if(c[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);c[n](this)}})}}z(Se,"close"),A(Se);const ue='[data-bs-toggle="button"]';class re extends Le{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(n){return this.each(function(){const c=re.getOrCreateInstance(this);n==="toggle"&&c[n]()})}}$.on(document,"click.bs.button.data-api",ue,u=>{u.preventDefault();const n=u.target.closest(ue);re.getOrCreateInstance(n).toggle()}),A(re);const Ae=".bs.swipe",bt=`touchstart${Ae}`,M=`touchmove${Ae}`,$e=`touchend${Ae}`,st=`pointerdown${Ae}`,It=`pointerup${Ae}`,yt={endCallback:null,leftCallback:null,rightCallback:null},tt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Qe extends Ke{constructor(n,c){super(),this._element=n,n&&Qe.isSupported()&&(this._config=this._getConfig(c),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return yt}static get DefaultType(){return tt}static get NAME(){return"swipe"}dispose(){$.off(this._element,Ae)}_start(n){this._supportPointerEvents?this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX):this._deltaX=n.touches[0].clientX}_end(n){this._eventIsPointerPenTouch(n)&&(this._deltaX=n.clientX-this._deltaX),this._handleSwipe(),q(this._config.endCallback)}_move(n){this._deltaX=n.touches&&n.touches.length>1?0:n.touches[0].clientX-this._deltaX}_handleSwipe(){const n=Math.abs(this._deltaX);if(n<=40)return;const c=n/this._deltaX;this._deltaX=0,c&&q(c>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?($.on(this._element,st,n=>this._start(n)),$.on(this._element,It,n=>this._end(n)),this._element.classList.add("pointer-event")):($.on(this._element,bt,n=>this._start(n)),$.on(this._element,M,n=>this._move(n)),$.on(this._element,$e,n=>this._end(n)))}_eventIsPointerPenTouch(n){return this._supportPointerEvents&&(n.pointerType==="pen"||n.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ze=".bs.carousel",Go=".data-api",Wa="ArrowLeft",Qa="ArrowRight",Mn="next",hn="prev",fn="left",ts="right",Xa=`slide${ze}`,Ls=`slid${ze}`,Ya=`keydown${ze}`,Za=`mouseenter${ze}`,el=`mouseleave${ze}`,tl=`dragstart${ze}`,nl=`load${ze}${Go}`,sl=`click${ze}${Go}`,Vo="carousel",ns="active",Ko=".active",zo=".carousel-item",ol=Ko+zo,rl={[Wa]:ts,[Qa]:fn},il={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},al={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class pn extends Le{constructor(n,c){super(n,c),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=x.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Vo&&this.cycle()}static get Default(){return il}static get DefaultType(){return al}static get NAME(){return"carousel"}next(){this._slide(Mn)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(hn)}pause(){this._isSliding&&i(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?$.one(this._element,Ls,()=>this.cycle()):this.cycle())}to(n){const c=this._getItems();if(n>c.length-1||n<0)return;if(this._isSliding)return void $.one(this._element,Ls,()=>this.to(n));const h=this._getItemIndex(this._getActive());if(h===n)return;const y=n>h?Mn:hn;this._slide(y,c[n])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(n){return n.defaultInterval=n.interval,n}_addEventListeners(){this._config.keyboard&&$.on(this._element,Ya,n=>this._keydown(n)),this._config.pause==="hover"&&($.on(this._element,Za,()=>this.pause()),$.on(this._element,el,()=>this._maybeEnableCycle())),this._config.touch&&Qe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const c of x.find(".carousel-item img",this._element))$.on(c,tl,h=>h.preventDefault());const n={leftCallback:()=>this._slide(this._directionToOrder(fn)),rightCallback:()=>this._slide(this._directionToOrder(ts)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Qe(this._element,n)}_keydown(n){if(/input|textarea/i.test(n.target.tagName))return;const c=rl[n.key];c&&(n.preventDefault(),this._slide(this._directionToOrder(c)))}_getItemIndex(n){return this._getItems().indexOf(n)}_setActiveIndicatorElement(n){if(!this._indicatorsElement)return;const c=x.findOne(Ko,this._indicatorsElement);c.classList.remove(ns),c.removeAttribute("aria-current");const h=x.findOne(`[data-bs-slide-to="${n}"]`,this._indicatorsElement);h&&(h.classList.add(ns),h.setAttribute("aria-current","true"))}_updateInterval(){const n=this._activeElement||this._getActive();if(!n)return;const c=Number.parseInt(n.getAttribute("data-bs-interval"),10);this._config.interval=c||this._config.defaultInterval}_slide(n,c=null){if(this._isSliding)return;const h=this._getActive(),y=n===Mn,w=c||j(this._getItems(),h,y,this._config.wrap);if(w===h)return;const O=this._getItemIndex(w),L=V=>$.trigger(this._element,V,{relatedTarget:w,direction:this._orderToDirection(n),from:this._getItemIndex(h),to:O});if(L(Xa).defaultPrevented||!h||!w)return;const B=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(O),this._activeElement=w;const H=y?"carousel-item-start":"carousel-item-end",J=y?"carousel-item-next":"carousel-item-prev";w.classList.add(J),g(w),h.classList.add(H),w.classList.add(H),this._queueCallback(()=>{w.classList.remove(H,J),w.classList.add(ns),h.classList.remove(ns,J,H),this._isSliding=!1,L(Ls)},h,this._isAnimated()),B&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return x.findOne(ol,this._element)}_getItems(){return x.find(zo,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(n){return T()?n===fn?hn:Mn:n===fn?Mn:hn}_orderToDirection(n){return T()?n===hn?fn:ts:n===hn?ts:fn}static jQueryInterface(n){return this.each(function(){const c=pn.getOrCreateInstance(this,n);if(typeof n!="number"){if(typeof n=="string"){if(c[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);c[n]()}}else c.to(n)})}}$.on(document,sl,"[data-bs-slide], [data-bs-slide-to]",function(u){const n=x.getElementFromSelector(this);if(!n||!n.classList.contains(Vo))return;u.preventDefault();const c=pn.getOrCreateInstance(n),h=this.getAttribute("data-bs-slide-to");return h?(c.to(h),void c._maybeEnableCycle()):Be.getDataAttribute(this,"slide")==="next"?(c.next(),void c._maybeEnableCycle()):(c.prev(),void c._maybeEnableCycle())}),$.on(window,nl,()=>{const u=x.find('[data-bs-ride="carousel"]');for(const n of u)pn.getOrCreateInstance(n)}),A(pn);const Fn=".bs.collapse",ll=`show${Fn}`,cl=`shown${Fn}`,ul=`hide${Fn}`,dl=`hidden${Fn}`,hl=`click${Fn}.data-api`,Ns="show",mn="collapse",ss="collapsing",fl=`:scope .${mn} .${mn}`,Ms='[data-bs-toggle="collapse"]',pl={parent:null,toggle:!0},ml={parent:"(null|element)",toggle:"boolean"};class gn extends Le{constructor(n,c){super(n,c),this._isTransitioning=!1,this._triggerArray=[];const h=x.find(Ms);for(const y of h){const w=x.getSelectorFromElement(y),O=x.find(w).filter(L=>L===this._element);w!==null&&O.length&&this._triggerArray.push(y)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return pl}static get DefaultType(){return ml}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let n=[];if(this._config.parent&&(n=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(y=>y!==this._element).map(y=>gn.getOrCreateInstance(y,{toggle:!1}))),n.length&&n[0]._isTransitioning||$.trigger(this._element,ll).defaultPrevented)return;for(const y of n)y.hide();const c=this._getDimension();this._element.classList.remove(mn),this._element.classList.add(ss),this._element.style[c]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const h=`scroll${c[0].toUpperCase()+c.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ss),this._element.classList.add(mn,Ns),this._element.style[c]="",$.trigger(this._element,cl)},this._element,!0),this._element.style[c]=`${this._element[h]}px`}hide(){if(this._isTransitioning||!this._isShown()||$.trigger(this._element,ul).defaultPrevented)return;const n=this._getDimension();this._element.style[n]=`${this._element.getBoundingClientRect()[n]}px`,g(this._element),this._element.classList.add(ss),this._element.classList.remove(mn,Ns);for(const c of this._triggerArray){const h=x.getElementFromSelector(c);h&&!this._isShown(h)&&this._addAriaAndCollapsedClass([c],!1)}this._isTransitioning=!0,this._element.style[n]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ss),this._element.classList.add(mn),$.trigger(this._element,dl)},this._element,!0)}_isShown(n=this._element){return n.classList.contains(Ns)}_configAfterMerge(n){return n.toggle=!!n.toggle,n.parent=f(n.parent),n}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const n=this._getFirstLevelChildren(Ms);for(const c of n){const h=x.getElementFromSelector(c);h&&this._addAriaAndCollapsedClass([c],this._isShown(h))}}_getFirstLevelChildren(n){const c=x.find(fl,this._config.parent);return x.find(n,this._config.parent).filter(h=>!c.includes(h))}_addAriaAndCollapsedClass(n,c){if(n.length)for(const h of n)h.classList.toggle("collapsed",!c),h.setAttribute("aria-expanded",c)}static jQueryInterface(n){const c={};return typeof n=="string"&&/show|hide/.test(n)&&(c.toggle=!1),this.each(function(){const h=gn.getOrCreateInstance(this,c);if(typeof n=="string"){if(h[n]===void 0)throw new TypeError(`No method named "${n}"`);h[n]()}})}}$.on(document,hl,Ms,function(u){(u.target.tagName==="A"||u.delegateTarget&&u.delegateTarget.tagName==="A")&&u.preventDefault();for(const n of x.getMultipleElementsFromSelector(this))gn.getOrCreateInstance(n,{toggle:!1}).toggle()}),A(gn);var ot="top",ht="bottom",ft="right",rt="left",os="auto",_n=[ot,ht,ft,rt],Qt="start",vn="end",Ho="clippingParents",Fs="viewport",bn="popper",Jo="reference",js=_n.reduce(function(u,n){return u.concat([n+"-"+Qt,n+"-"+vn])},[]),Us=[].concat(_n,[os]).reduce(function(u,n){return u.concat([n,n+"-"+Qt,n+"-"+vn])},[]),Wo="beforeRead",Qo="read",Xo="afterRead",Yo="beforeMain",Zo="main",er="afterMain",tr="beforeWrite",nr="write",sr="afterWrite",or=[Wo,Qo,Xo,Yo,Zo,er,tr,nr,sr];function Ot(u){return u?(u.nodeName||"").toLowerCase():null}function pt(u){if(u==null)return window;if(u.toString()!=="[object Window]"){var n=u.ownerDocument;return n&&n.defaultView||window}return u}function Xt(u){return u instanceof pt(u).Element||u instanceof Element}function wt(u){return u instanceof pt(u).HTMLElement||u instanceof HTMLElement}function Bs(u){return typeof ShadowRoot<"u"&&(u instanceof pt(u).ShadowRoot||u instanceof ShadowRoot)}const Gs={name:"applyStyles",enabled:!0,phase:"write",fn:function(u){var n=u.state;Object.keys(n.elements).forEach(function(c){var h=n.styles[c]||{},y=n.attributes[c]||{},w=n.elements[c];wt(w)&&Ot(w)&&(Object.assign(w.style,h),Object.keys(y).forEach(function(O){var L=y[O];L===!1?w.removeAttribute(O):w.setAttribute(O,L===!0?"":L)}))})},effect:function(u){var n=u.state,c={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,c.popper),n.styles=c,n.elements.arrow&&Object.assign(n.elements.arrow.style,c.arrow),function(){Object.keys(n.elements).forEach(function(h){var y=n.elements[h],w=n.attributes[h]||{},O=Object.keys(n.styles.hasOwnProperty(h)?n.styles[h]:c[h]).reduce(function(L,B){return L[B]="",L},{});wt(y)&&Ot(y)&&(Object.assign(y.style,O),Object.keys(w).forEach(function(L){y.removeAttribute(L)}))})}},requires:["computeStyles"]};function Dt(u){return u.split("-")[0]}var Yt=Math.max,rs=Math.min,yn=Math.round;function Vs(){var u=navigator.userAgentData;return u!=null&&u.brands&&Array.isArray(u.brands)?u.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function rr(){return!/^((?!chrome|android).)*safari/i.test(Vs())}function wn(u,n,c){n===void 0&&(n=!1),c===void 0&&(c=!1);var h=u.getBoundingClientRect(),y=1,w=1;n&&wt(u)&&(y=u.offsetWidth>0&&yn(h.width)/u.offsetWidth||1,w=u.offsetHeight>0&&yn(h.height)/u.offsetHeight||1);var O=(Xt(u)?pt(u):window).visualViewport,L=!rr()&&c,B=(h.left+(L&&O?O.offsetLeft:0))/y,H=(h.top+(L&&O?O.offsetTop:0))/w,J=h.width/y,V=h.height/w;return{width:J,height:V,top:H,right:B+J,bottom:H+V,left:B,x:B,y:H}}function Ks(u){var n=wn(u),c=u.offsetWidth,h=u.offsetHeight;return Math.abs(n.width-c)<=1&&(c=n.width),Math.abs(n.height-h)<=1&&(h=n.height),{x:u.offsetLeft,y:u.offsetTop,width:c,height:h}}function ir(u,n){var c=n.getRootNode&&n.getRootNode();if(u.contains(n))return!0;if(c&&Bs(c)){var h=n;do{if(h&&u.isSameNode(h))return!0;h=h.parentNode||h.host}while(h)}return!1}function Ft(u){return pt(u).getComputedStyle(u)}function gl(u){return["table","td","th"].indexOf(Ot(u))>=0}function Vt(u){return((Xt(u)?u.ownerDocument:u.document)||window.document).documentElement}function is(u){return Ot(u)==="html"?u:u.assignedSlot||u.parentNode||(Bs(u)?u.host:null)||Vt(u)}function ar(u){return wt(u)&&Ft(u).position!=="fixed"?u.offsetParent:null}function jn(u){for(var n=pt(u),c=ar(u);c&&gl(c)&&Ft(c).position==="static";)c=ar(c);return c&&(Ot(c)==="html"||Ot(c)==="body"&&Ft(c).position==="static")?n:c||(function(h){var y=/firefox/i.test(Vs());if(/Trident/i.test(Vs())&&wt(h)&&Ft(h).position==="fixed")return null;var w=is(h);for(Bs(w)&&(w=w.host);wt(w)&&["html","body"].indexOf(Ot(w))<0;){var O=Ft(w);if(O.transform!=="none"||O.perspective!=="none"||O.contain==="paint"||["transform","perspective"].indexOf(O.willChange)!==-1||y&&O.willChange==="filter"||y&&O.filter&&O.filter!=="none")return w;w=w.parentNode}return null})(u)||n}function zs(u){return["top","bottom"].indexOf(u)>=0?"x":"y"}function Un(u,n,c){return Yt(u,rs(n,c))}function lr(u){return Object.assign({},{top:0,right:0,bottom:0,left:0},u)}function cr(u,n){return n.reduce(function(c,h){return c[h]=u,c},{})}const ur={name:"arrow",enabled:!0,phase:"main",fn:function(u){var n,c=u.state,h=u.name,y=u.options,w=c.elements.arrow,O=c.modifiersData.popperOffsets,L=Dt(c.placement),B=zs(L),H=[rt,ft].indexOf(L)>=0?"height":"width";if(w&&O){var J=(function(qe,Ce){return lr(typeof(qe=typeof qe=="function"?qe(Object.assign({},Ce.rects,{placement:Ce.placement})):qe)!="number"?qe:cr(qe,_n))})(y.padding,c),V=Ks(w),de=B==="y"?ot:rt,oe=B==="y"?ht:ft,ae=c.rects.reference[H]+c.rects.reference[B]-O[B]-c.rects.popper[H],ie=O[B]-c.rects.reference[B],le=jn(w),Te=le?B==="y"?le.clientHeight||0:le.clientWidth||0:0,Oe=ae/2-ie/2,me=J[de],ye=Te-V[H]-J[oe],fe=Te/2-V[H]/2+Oe,ve=Un(me,fe,ye),xe=B;c.modifiersData[h]=((n={})[xe]=ve,n.centerOffset=ve-fe,n)}},effect:function(u){var n=u.state,c=u.options.element,h=c===void 0?"[data-popper-arrow]":c;h!=null&&(typeof h!="string"||(h=n.elements.popper.querySelector(h)))&&ir(n.elements.popper,h)&&(n.elements.arrow=h)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function kn(u){return u.split("-")[1]}var _l={top:"auto",right:"auto",bottom:"auto",left:"auto"};function dr(u){var n,c=u.popper,h=u.popperRect,y=u.placement,w=u.variation,O=u.offsets,L=u.position,B=u.gpuAcceleration,H=u.adaptive,J=u.roundOffsets,V=u.isFixed,de=O.x,oe=de===void 0?0:de,ae=O.y,ie=ae===void 0?0:ae,le=typeof J=="function"?J({x:oe,y:ie}):{x:oe,y:ie};oe=le.x,ie=le.y;var Te=O.hasOwnProperty("x"),Oe=O.hasOwnProperty("y"),me=rt,ye=ot,fe=window;if(H){var ve=jn(c),xe="clientHeight",qe="clientWidth";ve===pt(c)&&Ft(ve=Vt(c)).position!=="static"&&L==="absolute"&&(xe="scrollHeight",qe="scrollWidth"),(y===ot||(y===rt||y===ft)&&w===vn)&&(ye=ht,ie-=(V&&ve===fe&&fe.visualViewport?fe.visualViewport.height:ve[xe])-h.height,ie*=B?1:-1),y!==rt&&(y!==ot&&y!==ht||w!==vn)||(me=ft,oe-=(V&&ve===fe&&fe.visualViewport?fe.visualViewport.width:ve[qe])-h.width,oe*=B?1:-1)}var Ce,Ge=Object.assign({position:L},H&&_l),mt=J===!0?(function(Tt,it){var Et=Tt.x,xt=Tt.y,Fe=it.devicePixelRatio||1;return{x:yn(Et*Fe)/Fe||0,y:yn(xt*Fe)/Fe||0}})({x:oe,y:ie},pt(c)):{x:oe,y:ie};return oe=mt.x,ie=mt.y,B?Object.assign({},Ge,((Ce={})[ye]=Oe?"0":"",Ce[me]=Te?"0":"",Ce.transform=(fe.devicePixelRatio||1)<=1?"translate("+oe+"px, "+ie+"px)":"translate3d("+oe+"px, "+ie+"px, 0)",Ce)):Object.assign({},Ge,((n={})[ye]=Oe?ie+"px":"",n[me]=Te?oe+"px":"",n.transform="",n))}const Hs={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(u){var n=u.state,c=u.options,h=c.gpuAcceleration,y=h===void 0||h,w=c.adaptive,O=w===void 0||w,L=c.roundOffsets,B=L===void 0||L,H={placement:Dt(n.placement),variation:kn(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:y,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,dr(Object.assign({},H,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:O,roundOffsets:B})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,dr(Object.assign({},H,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:B})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})},data:{}};var as={passive:!0};const Js={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(u){var n=u.state,c=u.instance,h=u.options,y=h.scroll,w=y===void 0||y,O=h.resize,L=O===void 0||O,B=pt(n.elements.popper),H=[].concat(n.scrollParents.reference,n.scrollParents.popper);return w&&H.forEach(function(J){J.addEventListener("scroll",c.update,as)}),L&&B.addEventListener("resize",c.update,as),function(){w&&H.forEach(function(J){J.removeEventListener("scroll",c.update,as)}),L&&B.removeEventListener("resize",c.update,as)}},data:{}};var vl={left:"right",right:"left",bottom:"top",top:"bottom"};function ls(u){return u.replace(/left|right|bottom|top/g,function(n){return vl[n]})}var bl={start:"end",end:"start"};function hr(u){return u.replace(/start|end/g,function(n){return bl[n]})}function Ws(u){var n=pt(u);return{scrollLeft:n.pageXOffset,scrollTop:n.pageYOffset}}function Qs(u){return wn(Vt(u)).left+Ws(u).scrollLeft}function Xs(u){var n=Ft(u),c=n.overflow,h=n.overflowX,y=n.overflowY;return/auto|scroll|overlay|hidden/.test(c+y+h)}function fr(u){return["html","body","#document"].indexOf(Ot(u))>=0?u.ownerDocument.body:wt(u)&&Xs(u)?u:fr(is(u))}function Bn(u,n){var c;n===void 0&&(n=[]);var h=fr(u),y=h===((c=u.ownerDocument)==null?void 0:c.body),w=pt(h),O=y?[w].concat(w.visualViewport||[],Xs(h)?h:[]):h,L=n.concat(O);return y?L:L.concat(Bn(is(O)))}function Ys(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function pr(u,n,c){return n===Fs?Ys((function(h,y){var w=pt(h),O=Vt(h),L=w.visualViewport,B=O.clientWidth,H=O.clientHeight,J=0,V=0;if(L){B=L.width,H=L.height;var de=rr();(de||!de&&y==="fixed")&&(J=L.offsetLeft,V=L.offsetTop)}return{width:B,height:H,x:J+Qs(h),y:V}})(u,c)):Xt(n)?(function(h,y){var w=wn(h,!1,y==="fixed");return w.top=w.top+h.clientTop,w.left=w.left+h.clientLeft,w.bottom=w.top+h.clientHeight,w.right=w.left+h.clientWidth,w.width=h.clientWidth,w.height=h.clientHeight,w.x=w.left,w.y=w.top,w})(n,c):Ys((function(h){var y,w=Vt(h),O=Ws(h),L=(y=h.ownerDocument)==null?void 0:y.body,B=Yt(w.scrollWidth,w.clientWidth,L?L.scrollWidth:0,L?L.clientWidth:0),H=Yt(w.scrollHeight,w.clientHeight,L?L.scrollHeight:0,L?L.clientHeight:0),J=-O.scrollLeft+Qs(h),V=-O.scrollTop;return Ft(L||w).direction==="rtl"&&(J+=Yt(w.clientWidth,L?L.clientWidth:0)-B),{width:B,height:H,x:J,y:V}})(Vt(u)))}function mr(u){var n,c=u.reference,h=u.element,y=u.placement,w=y?Dt(y):null,O=y?kn(y):null,L=c.x+c.width/2-h.width/2,B=c.y+c.height/2-h.height/2;switch(w){case ot:n={x:L,y:c.y-h.height};break;case ht:n={x:L,y:c.y+c.height};break;case ft:n={x:c.x+c.width,y:B};break;case rt:n={x:c.x-h.width,y:B};break;default:n={x:c.x,y:c.y}}var H=w?zs(w):null;if(H!=null){var J=H==="y"?"height":"width";switch(O){case Qt:n[H]=n[H]-(c[J]/2-h[J]/2);break;case vn:n[H]=n[H]+(c[J]/2-h[J]/2)}}return n}function En(u,n){n===void 0&&(n={});var c=n,h=c.placement,y=h===void 0?u.placement:h,w=c.strategy,O=w===void 0?u.strategy:w,L=c.boundary,B=L===void 0?Ho:L,H=c.rootBoundary,J=H===void 0?Fs:H,V=c.elementContext,de=V===void 0?bn:V,oe=c.altBoundary,ae=oe!==void 0&&oe,ie=c.padding,le=ie===void 0?0:ie,Te=lr(typeof le!="number"?le:cr(le,_n)),Oe=de===bn?Jo:bn,me=u.rects.popper,ye=u.elements[ae?Oe:de],fe=(function(it,Et,xt,Fe){var $t=Et==="clippingParents"?(function(Ie){var at=Bn(is(Ie)),Ct=["absolute","fixed"].indexOf(Ft(Ie).position)>=0&&wt(Ie)?jn(Ie):Ie;return Xt(Ct)?at.filter(function(zt){return Xt(zt)&&ir(zt,Ct)&&Ot(zt)!=="body"}):[]})(it):[].concat(Et),Pt=[].concat($t,[xt]),Sn=Pt[0],Xe=Pt.reduce(function(Ie,at){var Ct=pr(it,at,Fe);return Ie.top=Yt(Ct.top,Ie.top),Ie.right=rs(Ct.right,Ie.right),Ie.bottom=rs(Ct.bottom,Ie.bottom),Ie.left=Yt(Ct.left,Ie.left),Ie},pr(it,Sn,Fe));return Xe.width=Xe.right-Xe.left,Xe.height=Xe.bottom-Xe.top,Xe.x=Xe.left,Xe.y=Xe.top,Xe})(Xt(ye)?ye:ye.contextElement||Vt(u.elements.popper),B,J,O),ve=wn(u.elements.reference),xe=mr({reference:ve,element:me,placement:y}),qe=Ys(Object.assign({},me,xe)),Ce=de===bn?qe:ve,Ge={top:fe.top-Ce.top+Te.top,bottom:Ce.bottom-fe.bottom+Te.bottom,left:fe.left-Ce.left+Te.left,right:Ce.right-fe.right+Te.right},mt=u.modifiersData.offset;if(de===bn&&mt){var Tt=mt[y];Object.keys(Ge).forEach(function(it){var Et=[ft,ht].indexOf(it)>=0?1:-1,xt=[ot,ht].indexOf(it)>=0?"y":"x";Ge[it]+=Tt[xt]*Et})}return Ge}function yl(u,n){n===void 0&&(n={});var c=n,h=c.placement,y=c.boundary,w=c.rootBoundary,O=c.padding,L=c.flipVariations,B=c.allowedAutoPlacements,H=B===void 0?Us:B,J=kn(h),V=J?L?js:js.filter(function(ae){return kn(ae)===J}):_n,de=V.filter(function(ae){return H.indexOf(ae)>=0});de.length===0&&(de=V);var oe=de.reduce(function(ae,ie){return ae[ie]=En(u,{placement:ie,boundary:y,rootBoundary:w,padding:O})[Dt(ie)],ae},{});return Object.keys(oe).sort(function(ae,ie){return oe[ae]-oe[ie]})}const gr={name:"flip",enabled:!0,phase:"main",fn:function(u){var n=u.state,c=u.options,h=u.name;if(!n.modifiersData[h]._skip){for(var y=c.mainAxis,w=y===void 0||y,O=c.altAxis,L=O===void 0||O,B=c.fallbackPlacements,H=c.padding,J=c.boundary,V=c.rootBoundary,de=c.altBoundary,oe=c.flipVariations,ae=oe===void 0||oe,ie=c.allowedAutoPlacements,le=n.options.placement,Te=Dt(le),Oe=B||(Te!==le&&ae?(function(Ie){if(Dt(Ie)===os)return[];var at=ls(Ie);return[hr(Ie),at,hr(at)]})(le):[ls(le)]),me=[le].concat(Oe).reduce(function(Ie,at){return Ie.concat(Dt(at)===os?yl(n,{placement:at,boundary:J,rootBoundary:V,padding:H,flipVariations:ae,allowedAutoPlacements:ie}):at)},[]),ye=n.rects.reference,fe=n.rects.popper,ve=new Map,xe=!0,qe=me[0],Ce=0;Ce<me.length;Ce++){var Ge=me[Ce],mt=Dt(Ge),Tt=kn(Ge)===Qt,it=[ot,ht].indexOf(mt)>=0,Et=it?"width":"height",xt=En(n,{placement:Ge,boundary:J,rootBoundary:V,altBoundary:de,padding:H}),Fe=it?Tt?ft:rt:Tt?ht:ot;ye[Et]>fe[Et]&&(Fe=ls(Fe));var $t=ls(Fe),Pt=[];if(w&&Pt.push(xt[mt]<=0),L&&Pt.push(xt[Fe]<=0,xt[$t]<=0),Pt.every(function(Ie){return Ie})){qe=Ge,xe=!1;break}ve.set(Ge,Pt)}if(xe)for(var Sn=function(Ie){var at=me.find(function(Ct){var zt=ve.get(Ct);if(zt)return zt.slice(0,Ie).every(function(_s){return _s})});if(at)return qe=at,"break"},Xe=ae?3:1;Xe>0&&Sn(Xe)!=="break";Xe--);n.placement!==qe&&(n.modifiersData[h]._skip=!0,n.placement=qe,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function _r(u,n,c){return c===void 0&&(c={x:0,y:0}),{top:u.top-n.height-c.y,right:u.right-n.width+c.x,bottom:u.bottom-n.height+c.y,left:u.left-n.width-c.x}}function vr(u){return[ot,ft,ht,rt].some(function(n){return u[n]>=0})}const br={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(u){var n=u.state,c=u.name,h=n.rects.reference,y=n.rects.popper,w=n.modifiersData.preventOverflow,O=En(n,{elementContext:"reference"}),L=En(n,{altBoundary:!0}),B=_r(O,h),H=_r(L,y,w),J=vr(B),V=vr(H);n.modifiersData[c]={referenceClippingOffsets:B,popperEscapeOffsets:H,isReferenceHidden:J,hasPopperEscaped:V},n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-reference-hidden":J,"data-popper-escaped":V})}},yr={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(u){var n=u.state,c=u.options,h=u.name,y=c.offset,w=y===void 0?[0,0]:y,O=Us.reduce(function(J,V){return J[V]=(function(de,oe,ae){var ie=Dt(de),le=[rt,ot].indexOf(ie)>=0?-1:1,Te=typeof ae=="function"?ae(Object.assign({},oe,{placement:de})):ae,Oe=Te[0],me=Te[1];return Oe=Oe||0,me=(me||0)*le,[rt,ft].indexOf(ie)>=0?{x:me,y:Oe}:{x:Oe,y:me}})(V,n.rects,w),J},{}),L=O[n.placement],B=L.x,H=L.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=B,n.modifiersData.popperOffsets.y+=H),n.modifiersData[h]=O}},Zs={name:"popperOffsets",enabled:!0,phase:"read",fn:function(u){var n=u.state,c=u.name;n.modifiersData[c]=mr({reference:n.rects.reference,element:n.rects.popper,placement:n.placement})},data:{}},wr={name:"preventOverflow",enabled:!0,phase:"main",fn:function(u){var n=u.state,c=u.options,h=u.name,y=c.mainAxis,w=y===void 0||y,O=c.altAxis,L=O!==void 0&&O,B=c.boundary,H=c.rootBoundary,J=c.altBoundary,V=c.padding,de=c.tether,oe=de===void 0||de,ae=c.tetherOffset,ie=ae===void 0?0:ae,le=En(n,{boundary:B,rootBoundary:H,padding:V,altBoundary:J}),Te=Dt(n.placement),Oe=kn(n.placement),me=!Oe,ye=zs(Te),fe=ye==="x"?"y":"x",ve=n.modifiersData.popperOffsets,xe=n.rects.reference,qe=n.rects.popper,Ce=typeof ie=="function"?ie(Object.assign({},n.rects,{placement:n.placement})):ie,Ge=typeof Ce=="number"?{mainAxis:Ce,altAxis:Ce}:Object.assign({mainAxis:0,altAxis:0},Ce),mt=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Tt={x:0,y:0};if(ve){if(w){var it,Et=ye==="y"?ot:rt,xt=ye==="y"?ht:ft,Fe=ye==="y"?"height":"width",$t=ve[ye],Pt=$t+le[Et],Sn=$t-le[xt],Xe=oe?-qe[Fe]/2:0,Ie=Oe===Qt?xe[Fe]:qe[Fe],at=Oe===Qt?-qe[Fe]:-xe[Fe],Ct=n.elements.arrow,zt=oe&&Ct?Ks(Ct):{width:0,height:0},_s=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ai=_s[Et],li=_s[xt],vs=Un(0,xe[Fe],zt[Fe]),Yc=me?xe[Fe]/2-Xe-vs-ai-Ge.mainAxis:Ie-vs-ai-Ge.mainAxis,Zc=me?-xe[Fe]/2+Xe+vs+li+Ge.mainAxis:at+vs+li+Ge.mainAxis,po=n.elements.arrow&&jn(n.elements.arrow),eu=po?ye==="y"?po.clientTop||0:po.clientLeft||0:0,ci=(it=mt?.[ye])!=null?it:0,tu=$t+Zc-ci,ui=Un(oe?rs(Pt,$t+Yc-ci-eu):Pt,$t,oe?Yt(Sn,tu):Sn);ve[ye]=ui,Tt[ye]=ui-$t}if(L){var di,nu=ye==="x"?ot:rt,su=ye==="x"?ht:ft,an=ve[fe],bs=fe==="y"?"height":"width",hi=an+le[nu],fi=an-le[su],mo=[ot,rt].indexOf(Te)!==-1,pi=(di=mt?.[fe])!=null?di:0,mi=mo?hi:an-xe[bs]-qe[bs]-pi+Ge.altAxis,gi=mo?an+xe[bs]+qe[bs]-pi-Ge.altAxis:fi,_i=oe&&mo?(function(ou,ru,go){var vi=Un(ou,ru,go);return vi>go?go:vi})(mi,an,gi):Un(oe?mi:hi,an,oe?gi:fi);ve[fe]=_i,Tt[fe]=_i-an}n.modifiersData[h]=Tt}},requiresIfExists:["offset"]};function wl(u,n,c){c===void 0&&(c=!1);var h,y,w=wt(n),O=wt(n)&&(function(V){var de=V.getBoundingClientRect(),oe=yn(de.width)/V.offsetWidth||1,ae=yn(de.height)/V.offsetHeight||1;return oe!==1||ae!==1})(n),L=Vt(n),B=wn(u,O,c),H={scrollLeft:0,scrollTop:0},J={x:0,y:0};return(w||!w&&!c)&&((Ot(n)!=="body"||Xs(L))&&(H=(h=n)!==pt(h)&&wt(h)?{scrollLeft:(y=h).scrollLeft,scrollTop:y.scrollTop}:Ws(h)),wt(n)?((J=wn(n,!0)).x+=n.clientLeft,J.y+=n.clientTop):L&&(J.x=Qs(L))),{x:B.left+H.scrollLeft-J.x,y:B.top+H.scrollTop-J.y,width:B.width,height:B.height}}function kl(u){var n=new Map,c=new Set,h=[];function y(w){c.add(w.name),[].concat(w.requires||[],w.requiresIfExists||[]).forEach(function(O){if(!c.has(O)){var L=n.get(O);L&&y(L)}}),h.push(w)}return u.forEach(function(w){n.set(w.name,w)}),u.forEach(function(w){c.has(w.name)||y(w)}),h}var kr={placement:"bottom",modifiers:[],strategy:"absolute"};function Er(){for(var u=arguments.length,n=new Array(u),c=0;c<u;c++)n[c]=arguments[c];return!n.some(function(h){return!(h&&typeof h.getBoundingClientRect=="function")})}function cs(u){u===void 0&&(u={});var n=u,c=n.defaultModifiers,h=c===void 0?[]:c,y=n.defaultOptions,w=y===void 0?kr:y;return function(O,L,B){B===void 0&&(B=w);var H,J,V={placement:"bottom",orderedModifiers:[],options:Object.assign({},kr,w),modifiersData:{},elements:{reference:O,popper:L},attributes:{},styles:{}},de=[],oe=!1,ae={state:V,setOptions:function(le){var Te=typeof le=="function"?le(V.options):le;ie(),V.options=Object.assign({},w,V.options,Te),V.scrollParents={reference:Xt(O)?Bn(O):O.contextElement?Bn(O.contextElement):[],popper:Bn(L)};var Oe,me,ye=(function(fe){var ve=kl(fe);return or.reduce(function(xe,qe){return xe.concat(ve.filter(function(Ce){return Ce.phase===qe}))},[])})((Oe=[].concat(h,V.options.modifiers),me=Oe.reduce(function(fe,ve){var xe=fe[ve.name];return fe[ve.name]=xe?Object.assign({},xe,ve,{options:Object.assign({},xe.options,ve.options),data:Object.assign({},xe.data,ve.data)}):ve,fe},{}),Object.keys(me).map(function(fe){return me[fe]})));return V.orderedModifiers=ye.filter(function(fe){return fe.enabled}),V.orderedModifiers.forEach(function(fe){var ve=fe.name,xe=fe.options,qe=xe===void 0?{}:xe,Ce=fe.effect;if(typeof Ce=="function"){var Ge=Ce({state:V,name:ve,instance:ae,options:qe});de.push(Ge||function(){})}}),ae.update()},forceUpdate:function(){if(!oe){var le=V.elements,Te=le.reference,Oe=le.popper;if(Er(Te,Oe)){V.rects={reference:wl(Te,jn(Oe),V.options.strategy==="fixed"),popper:Ks(Oe)},V.reset=!1,V.placement=V.options.placement,V.orderedModifiers.forEach(function(Ce){return V.modifiersData[Ce.name]=Object.assign({},Ce.data)});for(var me=0;me<V.orderedModifiers.length;me++)if(V.reset!==!0){var ye=V.orderedModifiers[me],fe=ye.fn,ve=ye.options,xe=ve===void 0?{}:ve,qe=ye.name;typeof fe=="function"&&(V=fe({state:V,options:xe,name:qe,instance:ae})||V)}else V.reset=!1,me=-1}}},update:(H=function(){return new Promise(function(le){ae.forceUpdate(),le(V)})},function(){return J||(J=new Promise(function(le){Promise.resolve().then(function(){J=void 0,le(H())})})),J}),destroy:function(){ie(),oe=!0}};if(!Er(O,L))return ae;function ie(){de.forEach(function(le){return le()}),de=[]}return ae.setOptions(B).then(function(le){!oe&&B.onFirstUpdate&&B.onFirstUpdate(le)}),ae}}var El=cs(),xl=cs({defaultModifiers:[Js,Zs,Hs,Gs]}),eo=cs({defaultModifiers:[Js,Zs,Hs,Gs,yr,gr,wr,ur,br]});const xr=Object.freeze(Object.defineProperty({__proto__:null,afterMain:er,afterRead:Xo,afterWrite:sr,applyStyles:Gs,arrow:ur,auto:os,basePlacements:_n,beforeMain:Yo,beforeRead:Wo,beforeWrite:tr,bottom:ht,clippingParents:Ho,computeStyles:Hs,createPopper:eo,createPopperBase:El,createPopperLite:xl,detectOverflow:En,end:vn,eventListeners:Js,flip:gr,hide:br,left:rt,main:Zo,modifierPhases:or,offset:yr,placements:Us,popper:bn,popperGenerator:cs,popperOffsets:Zs,preventOverflow:wr,read:Qo,reference:Jo,right:ft,start:Qt,top:ot,variationPlacements:js,viewport:Fs,write:nr},Symbol.toStringTag,{value:"Module"})),Cr="dropdown",Zt=".bs.dropdown",to=".data-api",Cl="ArrowUp",Sr="ArrowDown",Sl=`hide${Zt}`,Al=`hidden${Zt}`,Tl=`show${Zt}`,ql=`shown${Zt}`,Ar=`click${Zt}${to}`,Tr=`keydown${Zt}${to}`,Rl=`keyup${Zt}${to}`,xn="show",en='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Il=`${en}.${xn}`,us=".dropdown-menu",Ol=T()?"top-end":"top-start",Dl=T()?"top-start":"top-end",$l=T()?"bottom-end":"bottom-start",Pl=T()?"bottom-start":"bottom-end",Ll=T()?"left-start":"right-start",Nl=T()?"right-start":"left-start",Ml={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Fl={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class At extends Le{constructor(n,c){super(n,c),this._popper=null,this._parent=this._element.parentNode,this._menu=x.next(this._element,us)[0]||x.prev(this._element,us)[0]||x.findOne(us,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ml}static get DefaultType(){return Fl}static get NAME(){return Cr}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const n={relatedTarget:this._element};if(!$.trigger(this._element,Tl,n).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const c of[].concat(...document.body.children))$.on(c,"mouseover",v);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(xn),this._element.classList.add(xn),$.trigger(this._element,ql,n)}}hide(){if(p(this._element)||!this._isShown())return;const n={relatedTarget:this._element};this._completeHide(n)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(n){if(!$.trigger(this._element,Sl,n).defaultPrevented){if("ontouchstart"in document.documentElement)for(const c of[].concat(...document.body.children))$.off(c,"mouseover",v);this._popper&&this._popper.destroy(),this._menu.classList.remove(xn),this._element.classList.remove(xn),this._element.setAttribute("aria-expanded","false"),Be.removeDataAttribute(this._menu,"popper"),$.trigger(this._element,Al,n)}}_getConfig(n){if(typeof(n=super._getConfig(n)).reference=="object"&&!l(n.reference)&&typeof n.reference.getBoundingClientRect!="function")throw new TypeError(`${Cr.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return n}_createPopper(){if(xr===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let n=this._element;this._config.reference==="parent"?n=this._parent:l(this._config.reference)?n=f(this._config.reference):typeof this._config.reference=="object"&&(n=this._config.reference);const c=this._getPopperConfig();this._popper=eo(n,this._menu,c)}_isShown(){return this._menu.classList.contains(xn)}_getPlacement(){const n=this._parent;if(n.classList.contains("dropend"))return Ll;if(n.classList.contains("dropstart"))return Nl;if(n.classList.contains("dropup-center"))return"top";if(n.classList.contains("dropdown-center"))return"bottom";const c=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return n.classList.contains("dropup")?c?Dl:Ol:c?Pl:$l}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(c=>Number.parseInt(c,10)):typeof n=="function"?c=>n(c,this._element):n}_getPopperConfig(){const n={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Be.setDataAttribute(this._menu,"popper","static"),n.modifiers=[{name:"applyStyles",enabled:!1}]),{...n,...q(this._config.popperConfig,[void 0,n])}}_selectMenuItem({key:n,target:c}){const h=x.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(y=>d(y));h.length&&j(h,c,n===Sr,!h.includes(c)).focus()}static jQueryInterface(n){return this.each(function(){const c=At.getOrCreateInstance(this,n);if(typeof n=="string"){if(c[n]===void 0)throw new TypeError(`No method named "${n}"`);c[n]()}})}static clearMenus(n){if(n.button===2||n.type==="keyup"&&n.key!=="Tab")return;const c=x.find(Il);for(const h of c){const y=At.getInstance(h);if(!y||y._config.autoClose===!1)continue;const w=n.composedPath(),O=w.includes(y._menu);if(w.includes(y._element)||y._config.autoClose==="inside"&&!O||y._config.autoClose==="outside"&&O||y._menu.contains(n.target)&&(n.type==="keyup"&&n.key==="Tab"||/input|select|option|textarea|form/i.test(n.target.tagName)))continue;const L={relatedTarget:y._element};n.type==="click"&&(L.clickEvent=n),y._completeHide(L)}}static dataApiKeydownHandler(n){const c=/input|textarea/i.test(n.target.tagName),h=n.key==="Escape",y=[Cl,Sr].includes(n.key);if(!y&&!h||c&&!h)return;n.preventDefault();const w=this.matches(en)?this:x.prev(this,en)[0]||x.next(this,en)[0]||x.findOne(en,n.delegateTarget.parentNode),O=At.getOrCreateInstance(w);if(y)return n.stopPropagation(),O.show(),void O._selectMenuItem(n);O._isShown()&&(n.stopPropagation(),O.hide(),w.focus())}}$.on(document,Tr,en,At.dataApiKeydownHandler),$.on(document,Tr,us,At.dataApiKeydownHandler),$.on(document,Ar,At.clearMenus),$.on(document,Rl,At.clearMenus),$.on(document,Ar,en,function(u){u.preventDefault(),At.getOrCreateInstance(this).toggle()}),A(At);const qr="backdrop",Rr="show",Ir=`mousedown.bs.${qr}`,jl={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Ul={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Or extends Ke{constructor(n){super(),this._config=this._getConfig(n),this._isAppended=!1,this._element=null}static get Default(){return jl}static get DefaultType(){return Ul}static get NAME(){return qr}show(n){if(!this._config.isVisible)return void q(n);this._append();const c=this._getElement();this._config.isAnimated&&g(c),c.classList.add(Rr),this._emulateAnimation(()=>{q(n)})}hide(n){this._config.isVisible?(this._getElement().classList.remove(Rr),this._emulateAnimation(()=>{this.dispose(),q(n)})):q(n)}dispose(){this._isAppended&&($.off(this._element,Ir),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const n=document.createElement("div");n.className=this._config.className,this._config.isAnimated&&n.classList.add("fade"),this._element=n}return this._element}_configAfterMerge(n){return n.rootElement=f(n.rootElement),n}_append(){if(this._isAppended)return;const n=this._getElement();this._config.rootElement.append(n),$.on(n,Ir,()=>{q(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(n){P(n,this._getElement(),this._config.isAnimated)}}const ds=".bs.focustrap",Bl=`focusin${ds}`,Gl=`keydown.tab${ds}`,Dr="backward",Vl={autofocus:!0,trapElement:null},Kl={autofocus:"boolean",trapElement:"element"};class $r extends Ke{constructor(n){super(),this._config=this._getConfig(n),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Vl}static get DefaultType(){return Kl}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),$.off(document,ds),$.on(document,Bl,n=>this._handleFocusin(n)),$.on(document,Gl,n=>this._handleKeydown(n)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,ds))}_handleFocusin(n){const{trapElement:c}=this._config;if(n.target===document||n.target===c||c.contains(n.target))return;const h=x.focusableChildren(c);h.length===0?c.focus():this._lastTabNavDirection===Dr?h[h.length-1].focus():h[0].focus()}_handleKeydown(n){n.key==="Tab"&&(this._lastTabNavDirection=n.shiftKey?Dr:"forward")}}const Pr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Lr=".sticky-top",hs="padding-right",Nr="margin-right";class no{constructor(){this._element=document.body}getWidth(){const n=document.documentElement.clientWidth;return Math.abs(window.innerWidth-n)}hide(){const n=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,hs,c=>c+n),this._setElementAttributes(Pr,hs,c=>c+n),this._setElementAttributes(Lr,Nr,c=>c-n)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,hs),this._resetElementAttributes(Pr,hs),this._resetElementAttributes(Lr,Nr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(n,c,h){const y=this.getWidth();this._applyManipulationCallback(n,w=>{if(w!==this._element&&window.innerWidth>w.clientWidth+y)return;this._saveInitialAttribute(w,c);const O=window.getComputedStyle(w).getPropertyValue(c);w.style.setProperty(c,`${h(Number.parseFloat(O))}px`)})}_saveInitialAttribute(n,c){const h=n.style.getPropertyValue(c);h&&Be.setDataAttribute(n,c,h)}_resetElementAttributes(n,c){this._applyManipulationCallback(n,h=>{const y=Be.getDataAttribute(h,c);y!==null?(Be.removeDataAttribute(h,c),h.style.setProperty(c,y)):h.style.removeProperty(c)})}_applyManipulationCallback(n,c){if(l(n))c(n);else for(const h of x.find(n,this._element))c(h)}}const kt=".bs.modal",zl=`hide${kt}`,Hl=`hidePrevented${kt}`,Mr=`hidden${kt}`,Fr=`show${kt}`,Jl=`shown${kt}`,Wl=`resize${kt}`,Ql=`click.dismiss${kt}`,Xl=`mousedown.dismiss${kt}`,Yl=`keydown.dismiss${kt}`,Zl=`click${kt}.data-api`,jr="modal-open",Ur="show",so="modal-static",ec={backdrop:!0,focus:!0,keyboard:!0},tc={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class tn extends Le{constructor(n,c){super(n,c),this._dialog=x.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new no,this._addEventListeners()}static get Default(){return ec}static get DefaultType(){return tc}static get NAME(){return"modal"}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||this._isTransitioning||$.trigger(this._element,Fr,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(jr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(n)))}hide(){this._isShown&&!this._isTransitioning&&($.trigger(this._element,zl).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ur),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){$.off(window,kt),$.off(this._dialog,kt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Or({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new $r({trapElement:this._element})}_showElement(n){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const c=x.findOne(".modal-body",this._dialog);c&&(c.scrollTop=0),g(this._element),this._element.classList.add(Ur),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,Jl,{relatedTarget:n})},this._dialog,this._isAnimated())}_addEventListeners(){$.on(this._element,Yl,n=>{n.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),$.on(window,Wl,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),$.on(this._element,Xl,n=>{$.one(this._element,Ql,c=>{this._element===n.target&&this._element===c.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(jr),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,Mr)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if($.trigger(this._element,Hl).defaultPrevented)return;const n=this._element.scrollHeight>document.documentElement.clientHeight,c=this._element.style.overflowY;c==="hidden"||this._element.classList.contains(so)||(n||(this._element.style.overflowY="hidden"),this._element.classList.add(so),this._queueCallback(()=>{this._element.classList.remove(so),this._queueCallback(()=>{this._element.style.overflowY=c},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const n=this._element.scrollHeight>document.documentElement.clientHeight,c=this._scrollBar.getWidth(),h=c>0;if(h&&!n){const y=T()?"paddingLeft":"paddingRight";this._element.style[y]=`${c}px`}if(!h&&n){const y=T()?"paddingRight":"paddingLeft";this._element.style[y]=`${c}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(n,c){return this.each(function(){const h=tn.getOrCreateInstance(this,n);if(typeof n=="string"){if(h[n]===void 0)throw new TypeError(`No method named "${n}"`);h[n](c)}})}}$.on(document,Zl,'[data-bs-toggle="modal"]',function(u){const n=x.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&u.preventDefault(),$.one(n,Fr,h=>{h.defaultPrevented||$.one(n,Mr,()=>{d(this)&&this.focus()})});const c=x.findOne(".modal.show");c&&tn.getInstance(c).hide(),tn.getOrCreateInstance(n).toggle(this)}),z(tn),A(tn);const jt=".bs.offcanvas",Br=".data-api",nc=`load${jt}${Br}`,Gr="show",Vr="showing",Kr="hiding",zr=".offcanvas.show",sc=`show${jt}`,oc=`shown${jt}`,rc=`hide${jt}`,Hr=`hidePrevented${jt}`,Jr=`hidden${jt}`,ic=`resize${jt}`,ac=`click${jt}${Br}`,lc=`keydown.dismiss${jt}`,cc={backdrop:!0,keyboard:!0,scroll:!1},uc={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ut extends Le{constructor(n,c){super(n,c),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return cc}static get DefaultType(){return uc}static get NAME(){return"offcanvas"}toggle(n){return this._isShown?this.hide():this.show(n)}show(n){this._isShown||$.trigger(this._element,sc,{relatedTarget:n}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new no().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Vr),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Gr),this._element.classList.remove(Vr),$.trigger(this._element,oc,{relatedTarget:n})},this._element,!0))}hide(){this._isShown&&($.trigger(this._element,rc).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Kr),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Gr,Kr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new no().reset(),$.trigger(this._element,Jr)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const n=!!this._config.backdrop;return new Or({className:"offcanvas-backdrop",isVisible:n,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:n?()=>{this._config.backdrop!=="static"?this.hide():$.trigger(this._element,Hr)}:null})}_initializeFocusTrap(){return new $r({trapElement:this._element})}_addEventListeners(){$.on(this._element,lc,n=>{n.key==="Escape"&&(this._config.keyboard?this.hide():$.trigger(this._element,Hr))})}static jQueryInterface(n){return this.each(function(){const c=Ut.getOrCreateInstance(this,n);if(typeof n=="string"){if(c[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);c[n](this)}})}}$.on(document,ac,'[data-bs-toggle="offcanvas"]',function(u){const n=x.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),p(this))return;$.one(n,Jr,()=>{d(this)&&this.focus()});const c=x.findOne(zr);c&&c!==n&&Ut.getInstance(c).hide(),Ut.getOrCreateInstance(n).toggle(this)}),$.on(window,nc,()=>{for(const u of x.find(zr))Ut.getOrCreateInstance(u).show()}),$.on(window,ic,()=>{for(const u of x.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(u).position!=="fixed"&&Ut.getOrCreateInstance(u).hide()}),z(Ut),A(Ut);const Wr={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},dc=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),hc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,fc=(u,n)=>{const c=u.nodeName.toLowerCase();return n.includes(c)?!dc.has(c)||!!hc.test(u.nodeValue):n.filter(h=>h instanceof RegExp).some(h=>h.test(c))},pc={allowList:Wr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},mc={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},gc={entry:"(string|element|function|null)",selector:"(string|element)"};class _c extends Ke{constructor(n){super(),this._config=this._getConfig(n)}static get Default(){return pc}static get DefaultType(){return mc}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(n=>this._resolvePossibleFunction(n)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(n){return this._checkContent(n),this._config.content={...this._config.content,...n},this}toHtml(){const n=document.createElement("div");n.innerHTML=this._maybeSanitize(this._config.template);for(const[y,w]of Object.entries(this._config.content))this._setContent(n,w,y);const c=n.children[0],h=this._resolvePossibleFunction(this._config.extraClass);return h&&c.classList.add(...h.split(" ")),c}_typeCheckConfig(n){super._typeCheckConfig(n),this._checkContent(n.content)}_checkContent(n){for(const[c,h]of Object.entries(n))super._typeCheckConfig({selector:c,entry:h},gc)}_setContent(n,c,h){const y=x.findOne(h,n);y&&((c=this._resolvePossibleFunction(c))?l(c)?this._putElementInTemplate(f(c),y):this._config.html?y.innerHTML=this._maybeSanitize(c):y.textContent=c:y.remove())}_maybeSanitize(n){return this._config.sanitize?(function(c,h,y){if(!c.length)return c;if(y&&typeof y=="function")return y(c);const w=new window.DOMParser().parseFromString(c,"text/html"),O=[].concat(...w.body.querySelectorAll("*"));for(const L of O){const B=L.nodeName.toLowerCase();if(!Object.keys(h).includes(B)){L.remove();continue}const H=[].concat(...L.attributes),J=[].concat(h["*"]||[],h[B]||[]);for(const V of H)fc(V,J)||L.removeAttribute(V.nodeName)}return w.body.innerHTML})(n,this._config.allowList,this._config.sanitizeFn):n}_resolvePossibleFunction(n){return q(n,[void 0,this])}_putElementInTemplate(n,c){if(this._config.html)return c.innerHTML="",void c.append(n);c.textContent=n.textContent}}const vc=new Set(["sanitize","allowList","sanitizeFn"]),oo="fade",fs="show",bc=".tooltip-inner",Qr=".modal",Xr="hide.bs.modal",Gn="hover",ro="focus",io="click",yc={AUTO:"auto",TOP:"top",RIGHT:T()?"left":"right",BOTTOM:"bottom",LEFT:T()?"right":"left"},wc={allowList:Wr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},kc={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class nn extends Le{constructor(n,c){if(xr===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(n,c),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return wc}static get DefaultType(){return kc}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(Qr),Xr,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const n=$.trigger(this._element,this.constructor.eventName("show")),c=(m(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(n.defaultPrevented||!c)return;this._disposePopper();const h=this._getTipElement();this._element.setAttribute("aria-describedby",h.getAttribute("id"));const{container:y}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(y.append(h),$.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(h),h.classList.add(fs),"ontouchstart"in document.documentElement)for(const w of[].concat(...document.body.children))$.on(w,"mouseover",v);this._queueCallback(()=>{$.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!$.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(fs),"ontouchstart"in document.documentElement)for(const n of[].concat(...document.body.children))$.off(n,"mouseover",v);this._activeTrigger[io]=!1,this._activeTrigger[ro]=!1,this._activeTrigger[Gn]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),$.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(n){const c=this._getTemplateFactory(n).toHtml();if(!c)return null;c.classList.remove(oo,fs),c.classList.add(`bs-${this.constructor.NAME}-auto`);const h=(y=>{do y+=Math.floor(1e6*Math.random());while(document.getElementById(y));return y})(this.constructor.NAME).toString();return c.setAttribute("id",h),this._isAnimated()&&c.classList.add(oo),c}setContent(n){this._newContent=n,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(n){return this._templateFactory?this._templateFactory.changeContent(n):this._templateFactory=new _c({...this._config,content:n,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[bc]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(n){return this.constructor.getOrCreateInstance(n.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(oo)}_isShown(){return this.tip&&this.tip.classList.contains(fs)}_createPopper(n){const c=q(this._config.placement,[this,n,this._element]),h=yc[c.toUpperCase()];return eo(this._element,n,this._getPopperConfig(h))}_getOffset(){const{offset:n}=this._config;return typeof n=="string"?n.split(",").map(c=>Number.parseInt(c,10)):typeof n=="function"?c=>n(c,this._element):n}_resolvePossibleFunction(n){return q(n,[this._element,this._element])}_getPopperConfig(n){const c={placement:n,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:h=>{this._getTipElement().setAttribute("data-popper-placement",h.state.placement)}}]};return{...c,...q(this._config.popperConfig,[void 0,c])}}_setListeners(){const n=this._config.trigger.split(" ");for(const c of n)if(c==="click")$.on(this._element,this.constructor.eventName("click"),this._config.selector,h=>{const y=this._initializeOnDelegatedTarget(h);y._activeTrigger[io]=!(y._isShown()&&y._activeTrigger[io]),y.toggle()});else if(c!=="manual"){const h=c===Gn?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),y=c===Gn?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");$.on(this._element,h,this._config.selector,w=>{const O=this._initializeOnDelegatedTarget(w);O._activeTrigger[w.type==="focusin"?ro:Gn]=!0,O._enter()}),$.on(this._element,y,this._config.selector,w=>{const O=this._initializeOnDelegatedTarget(w);O._activeTrigger[w.type==="focusout"?ro:Gn]=O._element.contains(w.relatedTarget),O._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(Qr),Xr,this._hideModalHandler)}_fixTitle(){const n=this._element.getAttribute("title");n&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",n),this._element.setAttribute("data-bs-original-title",n),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(n,c){clearTimeout(this._timeout),this._timeout=setTimeout(n,c)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(n){const c=Be.getDataAttributes(this._element);for(const h of Object.keys(c))vc.has(h)&&delete c[h];return n={...c,...typeof n=="object"&&n?n:{}},n=this._mergeConfigObj(n),n=this._configAfterMerge(n),this._typeCheckConfig(n),n}_configAfterMerge(n){return n.container=n.container===!1?document.body:f(n.container),typeof n.delay=="number"&&(n.delay={show:n.delay,hide:n.delay}),typeof n.title=="number"&&(n.title=n.title.toString()),typeof n.content=="number"&&(n.content=n.content.toString()),n}_getDelegateConfig(){const n={};for(const[c,h]of Object.entries(this._config))this.constructor.Default[c]!==h&&(n[c]=h);return n.selector=!1,n.trigger="manual",n}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(n){return this.each(function(){const c=nn.getOrCreateInstance(this,n);if(typeof n=="string"){if(c[n]===void 0)throw new TypeError(`No method named "${n}"`);c[n]()}})}}A(nn);const Ec=".popover-header",xc=".popover-body",Cc={...nn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Sc={...nn.DefaultType,content:"(null|string|element|function)"};class ps extends nn{static get Default(){return Cc}static get DefaultType(){return Sc}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ec]:this._getTitle(),[xc]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(n){return this.each(function(){const c=ps.getOrCreateInstance(this,n);if(typeof n=="string"){if(c[n]===void 0)throw new TypeError(`No method named "${n}"`);c[n]()}})}}A(ps);const ao=".bs.scrollspy",Ac=`activate${ao}`,Yr=`click${ao}`,Tc=`load${ao}.data-api`,Cn="active",lo="[href]",Zr=".nav-link",qc=`${Zr}, .nav-item > ${Zr}, .list-group-item`,Rc={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ic={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Vn extends Le{constructor(n,c){super(n,c),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Rc}static get DefaultType(){return Ic}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const n of this._observableSections.values())this._observer.observe(n)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(n){return n.target=f(n.target)||document.body,n.rootMargin=n.offset?`${n.offset}px 0px -30%`:n.rootMargin,typeof n.threshold=="string"&&(n.threshold=n.threshold.split(",").map(c=>Number.parseFloat(c))),n}_maybeEnableSmoothScroll(){this._config.smoothScroll&&($.off(this._config.target,Yr),$.on(this._config.target,Yr,lo,n=>{const c=this._observableSections.get(n.target.hash);if(c){n.preventDefault();const h=this._rootElement||window,y=c.offsetTop-this._element.offsetTop;if(h.scrollTo)return void h.scrollTo({top:y,behavior:"smooth"});h.scrollTop=y}}))}_getNewObserver(){const n={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(c=>this._observerCallback(c),n)}_observerCallback(n){const c=O=>this._targetLinks.get(`#${O.target.id}`),h=O=>{this._previousScrollData.visibleEntryTop=O.target.offsetTop,this._process(c(O))},y=(this._rootElement||document.documentElement).scrollTop,w=y>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=y;for(const O of n){if(!O.isIntersecting){this._activeTarget=null,this._clearActiveClass(c(O));continue}const L=O.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(w&&L){if(h(O),!y)return}else w||L||h(O)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const n=x.find(lo,this._config.target);for(const c of n){if(!c.hash||p(c))continue;const h=x.findOne(decodeURI(c.hash),this._element);d(h)&&(this._targetLinks.set(decodeURI(c.hash),c),this._observableSections.set(c.hash,h))}}_process(n){this._activeTarget!==n&&(this._clearActiveClass(this._config.target),this._activeTarget=n,n.classList.add(Cn),this._activateParents(n),$.trigger(this._element,Ac,{relatedTarget:n}))}_activateParents(n){if(n.classList.contains("dropdown-item"))x.findOne(".dropdown-toggle",n.closest(".dropdown")).classList.add(Cn);else for(const c of x.parents(n,".nav, .list-group"))for(const h of x.prev(c,qc))h.classList.add(Cn)}_clearActiveClass(n){n.classList.remove(Cn);const c=x.find(`${lo}.${Cn}`,n);for(const h of c)h.classList.remove(Cn)}static jQueryInterface(n){return this.each(function(){const c=Vn.getOrCreateInstance(this,n);if(typeof n=="string"){if(c[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);c[n]()}})}}$.on(window,Tc,()=>{for(const u of x.find('[data-bs-spy="scroll"]'))Vn.getOrCreateInstance(u)}),A(Vn);const sn=".bs.tab",Oc=`hide${sn}`,Dc=`hidden${sn}`,$c=`show${sn}`,Pc=`shown${sn}`,Lc=`click${sn}`,Nc=`keydown${sn}`,Mc=`load${sn}`,Fc="ArrowLeft",ei="ArrowRight",jc="ArrowUp",ti="ArrowDown",co="Home",ni="End",on="active",si="fade",uo="show",oi=".dropdown-toggle",ho=`:not(${oi})`,ri='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',fo=`.nav-link${ho}, .list-group-item${ho}, [role="tab"]${ho}, ${ri}`,Uc=`.${on}[data-bs-toggle="tab"], .${on}[data-bs-toggle="pill"], .${on}[data-bs-toggle="list"]`;class rn extends Le{constructor(n){super(n),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),$.on(this._element,Nc,c=>this._keydown(c)))}static get NAME(){return"tab"}show(){const n=this._element;if(this._elemIsActive(n))return;const c=this._getActiveElem(),h=c?$.trigger(c,Oc,{relatedTarget:n}):null;$.trigger(n,$c,{relatedTarget:c}).defaultPrevented||h&&h.defaultPrevented||(this._deactivate(c,n),this._activate(n,c))}_activate(n,c){n&&(n.classList.add(on),this._activate(x.getElementFromSelector(n)),this._queueCallback(()=>{n.getAttribute("role")==="tab"?(n.removeAttribute("tabindex"),n.setAttribute("aria-selected",!0),this._toggleDropDown(n,!0),$.trigger(n,Pc,{relatedTarget:c})):n.classList.add(uo)},n,n.classList.contains(si)))}_deactivate(n,c){n&&(n.classList.remove(on),n.blur(),this._deactivate(x.getElementFromSelector(n)),this._queueCallback(()=>{n.getAttribute("role")==="tab"?(n.setAttribute("aria-selected",!1),n.setAttribute("tabindex","-1"),this._toggleDropDown(n,!1),$.trigger(n,Dc,{relatedTarget:c})):n.classList.remove(uo)},n,n.classList.contains(si)))}_keydown(n){if(![Fc,ei,jc,ti,co,ni].includes(n.key))return;n.stopPropagation(),n.preventDefault();const c=this._getChildren().filter(y=>!p(y));let h;if([co,ni].includes(n.key))h=c[n.key===co?0:c.length-1];else{const y=[ei,ti].includes(n.key);h=j(c,n.target,y,!0)}h&&(h.focus({preventScroll:!0}),rn.getOrCreateInstance(h).show())}_getChildren(){return x.find(fo,this._parent)}_getActiveElem(){return this._getChildren().find(n=>this._elemIsActive(n))||null}_setInitialAttributes(n,c){this._setAttributeIfNotExists(n,"role","tablist");for(const h of c)this._setInitialAttributesOnChild(h)}_setInitialAttributesOnChild(n){n=this._getInnerElement(n);const c=this._elemIsActive(n),h=this._getOuterElement(n);n.setAttribute("aria-selected",c),h!==n&&this._setAttributeIfNotExists(h,"role","presentation"),c||n.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(n,"role","tab"),this._setInitialAttributesOnTargetPanel(n)}_setInitialAttributesOnTargetPanel(n){const c=x.getElementFromSelector(n);c&&(this._setAttributeIfNotExists(c,"role","tabpanel"),n.id&&this._setAttributeIfNotExists(c,"aria-labelledby",`${n.id}`))}_toggleDropDown(n,c){const h=this._getOuterElement(n);if(!h.classList.contains("dropdown"))return;const y=(w,O)=>{const L=x.findOne(w,h);L&&L.classList.toggle(O,c)};y(oi,on),y(".dropdown-menu",uo),h.setAttribute("aria-expanded",c)}_setAttributeIfNotExists(n,c,h){n.hasAttribute(c)||n.setAttribute(c,h)}_elemIsActive(n){return n.classList.contains(on)}_getInnerElement(n){return n.matches(fo)?n:x.findOne(fo,n)}_getOuterElement(n){return n.closest(".nav-item, .list-group-item")||n}static jQueryInterface(n){return this.each(function(){const c=rn.getOrCreateInstance(this);if(typeof n=="string"){if(c[n]===void 0||n.startsWith("_")||n==="constructor")throw new TypeError(`No method named "${n}"`);c[n]()}})}}$.on(document,Lc,ri,function(u){["A","AREA"].includes(this.tagName)&&u.preventDefault(),p(this)||rn.getOrCreateInstance(this).show()}),$.on(window,Mc,()=>{for(const u of x.find(Uc))rn.getOrCreateInstance(u)}),A(rn);const Kt=".bs.toast",Bc=`mouseover${Kt}`,Gc=`mouseout${Kt}`,Vc=`focusin${Kt}`,Kc=`focusout${Kt}`,zc=`hide${Kt}`,Hc=`hidden${Kt}`,Jc=`show${Kt}`,Wc=`shown${Kt}`,ii="hide",ms="show",gs="showing",Qc={animation:"boolean",autohide:"boolean",delay:"number"},Xc={animation:!0,autohide:!0,delay:5e3};class Kn extends Le{constructor(n,c){super(n,c),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Xc}static get DefaultType(){return Qc}static get NAME(){return"toast"}show(){$.trigger(this._element,Jc).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ii),g(this._element),this._element.classList.add(ms,gs),this._queueCallback(()=>{this._element.classList.remove(gs),$.trigger(this._element,Wc),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&($.trigger(this._element,zc).defaultPrevented||(this._element.classList.add(gs),this._queueCallback(()=>{this._element.classList.add(ii),this._element.classList.remove(gs,ms),$.trigger(this._element,Hc)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ms),super.dispose()}isShown(){return this._element.classList.contains(ms)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(n,c){switch(n.type){case"mouseover":case"mouseout":this._hasMouseInteraction=c;break;case"focusin":case"focusout":this._hasKeyboardInteraction=c}if(c)return void this._clearTimeout();const h=n.relatedTarget;this._element===h||this._element.contains(h)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,Bc,n=>this._onInteraction(n,!0)),$.on(this._element,Gc,n=>this._onInteraction(n,!1)),$.on(this._element,Vc,n=>this._onInteraction(n,!0)),$.on(this._element,Kc,n=>this._onInteraction(n,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(n){return this.each(function(){const c=Kn.getOrCreateInstance(this,n);if(typeof n=="string"){if(c[n]===void 0)throw new TypeError(`No method named "${n}"`);c[n](this)}})}}return z(Kn),A(Kn),{Alert:Se,Button:re,Carousel:pn,Collapse:gn,Dropdown:At,Modal:tn,Offcanvas:Ut,Popover:ps,ScrollSpy:Vn,Tab:rn,Toast:Kn,Tooltip:nn}})});export default Jy();
